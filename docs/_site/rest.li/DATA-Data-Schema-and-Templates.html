<!DOCTYPE html>
<html lang="en">

  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>

    <title>DATA-Data-Schema-and-Templates</title>
    <meta name="description" content="A REST framework for building scalable service architectures using dynamic discovery and simple asynchronous APIs" />

    <link rel="icon"
      type="image/png"
      href="/images/icon_pegasus.png">
  
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" type="text/css" media="screen,projection" href="/assets/materialize.css" />
    <link rel="stylesheet" type="text/css" media="screen,projection" href="/assets/main.css">
    <link rel="canonical" href="http://localhost:4000/rest.li/DATA-Data-Schema-and-Templates" />
    <link rel="alternate" type="application/rss+xml" title="rest.li" href="/feed.xml" />
  
    
</head>


  <body>

    <nav class="dark-grey" role="navigation">
    <div class="nav-wrapper container"><a id="logo-container" class="brand-logo" href="/">Rest.li</a>


          <ul class="right hide-on-med-and-down">
               
      
        <li>
          <a href="/rest.li/get_started/quick_start" >
            Getting Started
          </a>
        </li>
        
        <li>
          <a href="/rest.li/user_guide/server_architecture" >
            User guide
          </a>
        </li>
        
        <li>
          <a href="/rest.li/reference/architecture" >
            API reference
          </a>
        </li>
        
        <li>
          <a href="/rest.li/contribute/howto" >
            Contribute
          </a>
        </li>
        
          </ul>


      <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
</nav>


        <div class="container">
        <div class="row">
                <div class="col s12 m4 l3"> 
               
                    
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">User Guide</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/user_guide/server_architecture">Rest.li Architecture</a></li>
                       
                         <li><a href="/rest.li/user_guide/restli_server">Rest.li Server</a></li>
                       
                         <li><a href="/rest.li/user_guide/restli_client">Rest.li Client Framework</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Spec</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/spec/protocol">Rest.li Protocol</a></li>
                       
                         <li><a href="/rest.li/spec/restspec_format">Restspec json format</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Modeling Resources</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/modeling/modeling">Modeling Resources</a></li>
                       
                         <li><a href="/rest.li/modeling/compatibiltiy_check">Snapshots and Resource Compatibility Checking</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">wiki</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/Asynchronous-Servers-and-Clients-in-Rest_li">Asynchronous-Servers-and-Clients-in-Rest.li</a></li>
                       
                         <li><a href="/rest.li/Attachment-Streaming">Attachment-Streaming</a></li>
                       
                         <li><a href="/rest.li/Building-Rest_li-from-Source">Building-Rest.li-from-Source</a></li>
                       
                         <li><a href="/rest.li/Components">Components</a></li>
                       
                         <li><a href="/rest.li/Compression">Compression</a></li>
                       
                         <li><a href="/rest.li/D2-Zookeeper-Properties">D2-Zookeeper-Properties</a></li>
                       
                         <li><a href="/rest.li/DATA-Data-Schema-and-Templates">DATA-Data-Schema-and-Templates</a></li>
                       
                         <li><a href="/rest.li/Data-FAQ">Data-FAQ</a></li>
                       
                         <li><a href="/rest.li/Dynamic_Discovery">Dynamic_Discovery</a></li>
                       
                         <li><a href="/rest.li/Guice-Dependency-Injection">Guice-Dependency-Injection</a></li>
                       
                         <li><a href="/rest.li/How_To:Rest_li_Avro_conversions">How_To:Rest.li_Avro_conversions</a></li>
                       
                         <li><a href="/rest.li/How-to-use-projections-in-Java">How-to-use-projections-in-Java</a></li>
                       
                         <li><a href="/rest.li/Modeling-Resources-with-Rest_li">Modeling-Resources-with-Rest.li</a></li>
                       
                         <li><a href="/rest.li/Projections">Projections</a></li>
                       
                         <li><a href="/rest.li/Request-Response-API-(R2)">Request-Response-API-(R2)</a></li>
                       
                         <li><a href="/rest.li/Request-Response-Framework">Request-Response-Framework</a></li>
                       
                         <li><a href="/rest.li/Rest_li-2_0-response-API">Rest.li-2.0-response-API</a></li>
                       
                         <li><a href="/rest.li/Rest_li-2_x-upgrade-instructions">Rest.li-2.x-upgrade-instructions</a></li>
                       
                         <li><a href="/rest.li/Rest_li-Filters">Rest.li-Filters</a></li>
                       
                         <li><a href="/rest.li/Rest_li-Protocol">Rest.li-Protocol</a></li>
                       
                         <li><a href="/rest.li/Rest_li-with-Netty">Rest.li-with-Netty</a></li>
                       
                         <li><a href="/rest.li/Rest_li-with-Servlet-Containers">Rest.li-with-Servlet-Containers</a></li>
                       
                         <li><a href="/rest.li/Scala-Integration">Scala-Integration</a></li>
                       
                         <li><a href="/rest.li/Send-Rest_li-Request-Query-In-Request-Body">Send-Rest.li-Request-Query-In-Request-Body</a></li>
                       
                         <li><a href="/rest.li/Spring-Dependency-Injection">Spring-Dependency-Injection</a></li>
                       
                         <li><a href="/rest.li/Validation-in-Rest_li">Validation-in-Rest.li</a></li>
                       
                         <li><a href="/rest.li/Writing-unit-tests-for-Rest_li-clients-and-servers">Writing-unit-tests-for-Rest.li-clients-and-servers</a></li>
                       
                        </ul>
                     </ul>
                        
                    </div>
                     <div class="markdown-body col s12 m3 l9">
                            <h1 id="contents">Contents</h1>

<ul>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#schema-definition">Schema Definition</a></li>
  <li><a href="#how-data-is-serialized-for-transport">How Data is Serialized for
Transport</a></li>
  <li><a href="#how-data-is-represented-in-memory">How Data is Represented in
Memory</a></li>
  <li><a href="#java-binding">Java Binding</a></li>
  <li><a href="#avro-translation">Avro Translation</a></li>
</ul>

<h1 id="introduction">Introduction</h1>

<p>The Pegasus Data layer includes the following:</p>

<ul>
  <li>The schema definition language for specifying the data that will be
exchanged among systems</li>
  <li>How this data will be serialized for transport</li>
  <li>How this data will be represented in memory</li>
  <li>The generic and type-safe Java API’s for manipulating data. These
generated Java classes are referred to as the ‘data templates’.</li>
</ul>

<h1 id="schema-definition">Schema Definition</h1>

<p>The Pegasus schema definition language is inspired by the <a href="http://avro.apache.org/docs/1.4.1/spec.html">Avro 1.4.1
specification</a>.</p>

<ul>
  <li>Pegasus leverages Avro’s JSON-based schema definition syntax, type
system, and JSON serialization format.</li>
  <li>Pegasus does not implement or use Avro’s binary data serialization
format, object container files, protocol wire format, and schema
resolution.</li>
  <li>Pegasus does not require or re-use any Avro implementation.</li>
  <li>The code generator supports all of Avro’s types: primitive types,
records, enums, arrays, maps, unions, fixed.</li>
</ul>

<p>The Pegasus schema differs from Avro in the following ways:</p>

<ul>
  <li>Pegasus uses “optional” to indicate that a field in a record is
optional. Union with null should not be used to indicate an optional
field. Future versions of Pegasus may remove the null type from the
schema definition language.</li>
  <li>Pegasus unions can have more than one member of the same type. This
is supported by specifying an alias for each member which is unique
within that union.</li>
  <li>Pegasus default values for union types must include the member
discriminator. Avro default values for union types do not include
the member discriminator. The type of the Avro union default value
is always the 1st member type of the union.</li>
  <li>Pegasus implements a mechanism for including all the fields from
another record into the current record.</li>
  <li>Pegasus schema files have file names that ends with <code class="highlighter-rouge">.pdsc</code> instead
of <code class="highlighter-rouge">.avsc</code>.</li>
  <li>The Pegasus code generator also implements resolvers similar to Java
class loaders that allow each named schema to be specified in a
different source file.<br />
(Note the Avro code generator requires all referenced named schemas
to be in the same source file. The schema resolver of the Pegasus
code generator is unrelated to the schema resolution feature of
Avro.)</li>
  <li>Pegasus ignores the aliases (but allows them in the schema
definition). Future versions of Pegasus may remove aliases.</li>
  <li>Pegasus schema resolution and compatibility rules are different.</li>
  <li>Pegasus named schema provides option to override language binding
namespace for generated data model from the schema. <strong>Note that this
binding namespace override will not change how data is transported
over the wire.</strong></li>
</ul>

<h2 id="creating-a-schema">Creating a Schema</h2>

<p>Each schema should be stored in its own file with a <code class="highlighter-rouge">.pdsc</code> extension.
The Pegasus code generator implements a resolver that is similar to Java
class loaders. If there is a reference to a named schema, the code
generator will try to look for a file in the code generator’s resolver
path. The resolver path is similar to a Java classpath. The fully
qualified name of the named schema will be translated to a relative file
name. The relative file name is computed by replacing dots (“.”) in the
fully qualified name by the directory path separator (typically “/”) and
appending a <code class="highlighter-rouge">.pdsc</code> extension. This relative file name is appended to
each path in the resolver path. The resolver opens each of these files
until it finds a file that contains the named schema.</p>

<p>The named schema declarations support the following attributes:</p>

<ul>
  <li><code class="highlighter-rouge">type</code> a JSON string providing the type of the named schema
(required).</li>
  <li><code class="highlighter-rouge">name</code> a JSON string providing the name of the named schema
(required).</li>
  <li><code class="highlighter-rouge">namespace</code> a JSON string that qualifies the namespace for the named
schema.</li>
  <li><code class="highlighter-rouge">package</code> a JSON string that qualifies the language binding
namespace for the named schema (optional). If this is not specified,
language binding class for the named schema will use <code class="highlighter-rouge">namespace</code> as
its default namespace.</li>
  <li><code class="highlighter-rouge">doc</code> a JSON string providing documentation to the user of this
named schema (optional).</li>
</ul>

<p>The named schemas with type “enum” also supports a <code class="highlighter-rouge">symbolDocs</code>
attribute to provide documentation for each enum symbol.</p>

<p><strong>Note:</strong> Due to the addition of doclint in JDK8, anything under the
<code class="highlighter-rouge">doc</code> or <code class="highlighter-rouge">symbolDocs</code> attribute must be W3C HTML 4.01 compliant. This is
because the contents of this string will appear as Javadocs in the
generated Java ‘data template’ classes later. Please take this into
consideration when writing your documentation.</p>

<p>The following are a few example schemas and their file names.</p>

<p>com/linkedin/pegasus/generator/examples/Foo.pdsc</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```{
  "type" : "record",
  "name" : "Foo",
  "namespace" : "com.linkedin.pegasus.generator.examples",
  "doc" : "A foo record",
  "fields" : [
    { "name" : "intField",       "type" : "int" },
    { "name" : "longField",      "type" : "long" },
    { "name" : "floatField",     "type" : "float" },
    { "name" : "doubleField",    "type" : "double" },
    { "name" : "bytesField",     "type" : "bytes" },
    { "name" : "stringField",    "type" : "string" },
    { "name" : "fruitsField",    "type" : "Fruits" },
    { "name" : "intArrayField",  "type" : { "type" : "array", "items" : "int" } },
    { "name" : "stringMapField", "type" : { "type" : "map", "values" : "string" } },
    {
      "name" : "unionField",
      "type" : [
        "int",
        "string",
        "Fruits",
        "Foo",
        { "type" : "array", "items" : "string" },
        { "type" : "map", "values" : "long" },
        "null"
      ]
    }
  ]
}
```
</code></pre></div></div>

<p>com/linkedin/pegasus/generator/examples/FooWithNamespaceOverride.pdsc
(please see Java Binding section to see how this “package” affects
generated java class.)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```{
  "type" : "record",
  "name" : "FooWithNamespaceOverride",
  "namespace" : "com.linkedin.pegasus.generator.examples",
  "package" : "com.linkedin.pegasus.generator.examples.record",
  "doc" : "A foo record",
  "fields" : [
    { "name" : "intField",       "type" : "int" },
    { "name" : "longField",      "type" : "long" },
    { "name" : "floatField",     "type" : "float" },
    { "name" : "doubleField",    "type" : "double" },
    { "name" : "bytesField",     "type" : "bytes" },
    { "name" : "stringField",    "type" : "string" },
    { "name" : "fruitsField",    "type" : "Fruits" },
    { "name" : "intArrayField",  "type" : { "type" : "array", "items" : "int" } },
    { "name" : "stringMapField", "type" : { "type" : "map", "values" : "string" } },
    {
      "name" : "unionField",
      "type" : [
        "int",
        "string",
        "Fruits",
        "Foo",
        { "type" : "array", "items" : "string" },
        { "type" : "map", "values" : "long" },
        "null"
      ]
    }
  ]
}
```
</code></pre></div></div>

<p>com/linkedin/pegasus/generator/examples/Fruits.pdsc</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```{
  "type" : "enum",
  "name" : "Fruits",
  "namespace" : "com.linkedin.pegasus.generator.examples",
  "doc" : "A fruit",
  "symbols" : [ "APPLE", "BANANA", "ORANGE", "PINEAPPLE" ],
  "symbolDocs" : { "APPLE":"A red, yellow or green fruit.", "BANANA":"A yellow fruit.", "ORANGE":"An orange fruit.", "PINEAPPLE":"A yellow fruit."} 
}
```
</code></pre></div></div>

<p>com/linkedin/pegasus/generator/examples/MD5.pdsc</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```{
  "type" : "fixed",
  "name" : "MD5",
  "namespace" : "com.linkedin.pegasus.generator.examples",
  "doc" : "MD5",
  "size" : 16
}
```
</code></pre></div></div>

<p>com/linkedin/pegasus/generator/examples/StringList.pdsc</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```{
  "type" : "record",
  "name" : "StringList",
  "namespace" : "com.linkedin.pegasus.generator.examples",
  "doc" : "A list of strings",
  "fields" : [
    { "name" : "element", "type" : "string" },
    { "name" : "next"   , "type" : "StringList", "optional" : true }
  ]

}
```
</code></pre></div></div>

<p>com/linkedin/pegasus/generator/examples/InlinedExample.pdsc</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```{
  "type": "record",
  "name": "InlinedExample",
  "namespace": "com.linkedin.pegasus.generator.examples",
  "doc": "Example on how you can declare an enum and a record inside another record",
  "fields": [
    {
      "name": "myEnumField",
      "type": {
      "type" : "enum",
      "name" : "EnumDeclarationInTheSameFile",
      "symbols" : ["FOO", "BAR", "BAZ"]
      },
      "doc": "This is how we inline enum declaration without creating a new pdsc file",
      "symbolDocs": {"FOO":"It's a foo!", "HASH":"It's a bar!", "NONE":"It's a baz!"}
    },
    {
      "name": "stringField",
      "type": "string",
      "doc": "A regular string"
    },
    {
      "name": "intField",
      "type": "int",
      "doc": "A regular int"
    },
    {
      "name": "UnionFieldWithInlineRecordAndEnum",
      "doc": "In this example we will declare a record and an enum inside a union",
      "type": [
        {
          "type" : "record",
          "name" : "myRecord",
          "fields": [
            {
              "name": "foo1",
              "type": "int",
              "doc": "random int field"
            },
            {
              "name": "foo2",
              "type": "int",
              "doc": "random int field"
            }
          ]
        },
        {
          "name": "anotherEnum",
          "type" : "enum",
          "symbols" : ["FOOFOO", "BARBAR"],
          "doc": "Random enum",
          "symbolDocs": {"FOOFOO":"description about FOOFOO", "BARBAR":"description about BARBAR"}
        }
      ],
      "optional": true
    }
  ]
}
```
</code></pre></div></div>

<h2 id="typeref">Typeref</h2>

<p>Pegasus supports a new schema type known as a typeref. A typeref is like
a typedef in C. It does not declare a new type but declares an alias to
an existing type.</p>

<ul>
  <li>Typerefs are useful for differentiating different uses of the same
type. For example, we can use to a typeref to differentiate a string
field that holds an URN (uniform resource name) from an arbitrary
string value or a long field that holds an epoch time in
milliseconds from a generic long value.</li>
  <li>A typeref allows additional meta-data to be associated with
primitive and unnamed types. This meta-data can be used to provide
documentation or support custom properties.</li>
  <li>A typeref provides a way to refer to common unnamed types such as
arrays, maps, and unions. Without typerefs, users may have to wrap
these unnamed types with a record in order to address them.
Alternatively, users may cut-and-paste common type declarations,
resulting in unnecessary duplication and potentially causing
inconsistencies if future changes are not propagated correctly to
all copies.</li>
</ul>

<p>Typerefs use the type name “typeref” and support the following
attributes:</p>

<ul>
  <li><code class="highlighter-rouge">name</code> a JSON string providing the name of the typeref (required).</li>
  <li><code class="highlighter-rouge">namespace</code> a JSON string that qualifies the name;</li>
  <li><code class="highlighter-rouge">package</code> a JSON string that qualifies the language binding
namespace for this typeref (optional). If this is not specified,
language binding class for the typeref will use <code class="highlighter-rouge">namespace</code> as its
default namespace.</li>
  <li><code class="highlighter-rouge">doc</code> a JSON string providing documentation to the user of this
schema (optional).</li>
  <li><code class="highlighter-rouge">ref</code> the schema that the typeref refers to.</li>
</ul>

<p><strong>Note:</strong> Due to the addition of doclint in JDK8, anything under the
<code class="highlighter-rouge">doc</code> attribute must be W3C HTML 4.01 compliant. This is because the
contents of this string will appear as Javadocs in the generated Java
‘data template’ classes later. Please take this into consideration
when writing your documentation.</p>

<p>Here are a few examples:</p>

<p>Differentiate URN from string</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{
  "type" : "typeref",
  "name" : "URN",
  "ref"  : "string",
  "doc"  : "A URN, the format is defined by RFC 2141"
}
```
</code></pre></div></div>

<p>Differentiate time from long</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{
  "type" : "typeref",
  "name" : "time",
  "ref"  : "long",
  "doc"  : "Time in milliseconds since Jan 1, 1970 UTC"
}
```
</code></pre></div></div>

<p>Typerefs (by default) do not alter the serialization format or in-memory
representation.</p>

<h2 id="record-field-attributes">Record Field Attributes</h2>

<p>You can use the following record field attributes to annotate fields
with metadata.</p>

<ul>
  <li><code class="highlighter-rouge">optional</code> - marks the field as optional, meaning it doesn’t require
a value. See <a href="#OptionalFields">Optional Fields</a>.</li>
</ul>

<p><a name="OptionalFields"></a></p>

<h2 id="optional-fields">Optional Fields</h2>

<p>Pegasus supports optional fields implicitly through the “optional” flag
in the field definition. A field is required unless the field is
declared with the optional flag set to true. A field without the
optional flag is required. A field with the optional flag set to false
is also required. An optional field may be present or absent in the
in-memory data structure or serialized data.</p>

<p>The Java binding provides methods to determine if an optional field is
present and a specialized get accessor allows the caller to specify
whether the default value or null should be returned when an absent
optional field is accessed. The has field accessor may also be used to
determine if an optional field is present.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{
  "type" : "record",
  "name" : "Optional",
  "namespace" : "com.linkedin.pegasus.generator.examples",
  "fields" :
  [
    {
      "name"     : "foo",
      "type"     : "string",
      "optional" : true
    }
  ]
}
```
</code></pre></div></div>

<p>Optional field present</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{
  "foo" : "abcd"
}
```
</code></pre></div></div>

<p>Optional field absent</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{
}
```
</code></pre></div></div>

<p>See <a href="#GetMode">GetMode</a> for more detailed information on how the code
generated data stubs access optional/default fields.</p>

<h3 id="avros-approach-to-declaring-optional-fields">Avro’s Approach to Declaring Optional Fields</h3>

<p>DO NOT USE UNION WITH NULL TO DECLARE AN OPTIONAL FIELD IN PEGASUS.</p>

<p>Avro’s approach to declaring an optional field is to use a union type
whose values may be null or the desired value type. Pegasus discourages
this practice and may remove support for union with null as well as the
null type in the future. The reason for this is that declaring an
optional field using a union causes the optional field to be always
present in the underlying in-memory data structure and serialized data.
Absence of a value is represented by a null value. Presence of a value
is represented by a value in the union of the value’s type.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{
  "type" : "record",
  "name" : "OptionalWithUnion",
  "namespace" : "com.linkedin.pegasus.generator.examples",
  "fields" :
  [
    {
      "name"    : "foo",
      "type"    : ["string", "null"]
    }
  ]
}
```
</code></pre></div></div>

<p>optional field present</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{
  "foo" : { "string" : "abcd" }
}
```
</code></pre></div></div>

<p>optional field absent</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{
  "foo" : null
}
```
</code></pre></div></div>

<p>Note Avro uses the union approach because Avro serialization is
optimized to not include a field identifier in the serialized data.</p>

<h2 id="union">Union</h2>

<p>Union is a powerful way to model data that can be of different types at
different scenarios. Record fields that have this behavior can be
defined as a Union type with the expected value types as its members.
Here is an example of a record field defined an a union with <code class="highlighter-rouge">string</code>
and <code class="highlighter-rouge">array</code> as its members.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{
  "type" : "record",
  "name" : "RecordWithUnion",
  "namespace" : "com.linkedin.pegasus.examples",
  "fields" :
  [
    {
      "name" : "result",
      "type" : [
        "string",
        {
          "type" : "array",
          "items" : "Result"
        }
      ]
    }
  ]
}
```
</code></pre></div></div>

<h3 id="union-with-members-of-the-same-type">Union With Members Of The Same Type</h3>

<p>In addition to the unions with disparate member types, Pegasus unions
can have more than one member of the same type inside a single union
definition. For example a union can have multiple members that are of,</p>

<ul>
  <li>same primitive type</li>
  <li>same named complex type</li>
  <li>array of same or different item types</li>
  <li>map of same or different value types</li>
  <li>typeref dereferenced to same type.</li>
</ul>

<p>Such unions <strong>must</strong> specify an unique alias for each member in the
union definition. When an alias is specified, it acts as the member’s
discriminator unlike the member type name on the standard unions
<a href="#union">defined above</a>.</p>

<p>In the example below, the union definition has a <code class="highlighter-rouge">string</code> and two
<code class="highlighter-rouge">array</code> members with unique aliases for each of them.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{
  "type" : "record",
  "name" : "RecordWithAliasedUnion",
  "namespace" : "com.linkedin.pegasus.examples",
  "fields" :
  [
    {
      "name" : "result",
      "type" : [
        {
          "type" : "string",
          "alias" : "message"
        },
        {
          "type": {
            "type" : "array",
            "items" : "Result"
          },
          "alias" : "successResults"
        },
        {
          "type": {
            "type" : "array",
            "items" : "Result"
          },
          "alias" : "failureResults"
        }
      ]
    }
  ]
}
```
</code></pre></div></div>

<p>There are few constraints that must be taken in consideration while
specifying aliases for union members,</p>

<ol>
  <li>Aliases must be unique for each member in a union definition.</li>
  <li>Aliases must be specified for either all or none of the members in a
union definition.</li>
  <li>Aliases cannot be specified for <code class="highlighter-rouge">null</code> member types which means
there can only be one null member inside a union definition.</li>
</ol>

<h2 id="default-values">Default Values</h2>

<p>A field may be declared to have a default value. The default value will
be validated against the schema type of the field. For example, if the
type is record and it has non-optional fields, then the default value
must include the non-optional fields in the default value.</p>

<p>A default value may be declared for a required or an optional field. The
default value is used by the get accessor. Unlike Avro, default values
are not assigned to absent fields on de-serialization.</p>

<p>If a default value is declared for a required field, for all three
<a href="#GetMode">GetMode</a>, the get accessor behaves the same as that for an
optional field with a default value. More specifically, the get accessor
doesn’t fail even if the field is absent. However, in this case, <a href="#data-to-schema-validation">data
validation</a> may fail if
<a href="#requiredmode">RequiredMode</a> is set to <code class="highlighter-rouge">MUST_BE_PRESENT</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{
  "type" : "record",
  "name" : "Default",
  "namespace" : "com.linkedin.pegasus.generator.examples",
  "fields" :
  [
    {
      "name"     : "mandatoryWithDefault",
      "type"     : "string",
      "default"  : "this is the default string"
    },
    {
      "name"     : "optionalWithDefault",
      "type"     : "string",
      "optional" : true,
      "default"  : "this is the default string"
    }
  ]
}
```
</code></pre></div></div>

<p>See <a href="#GetMode">GetMode</a> for more detailed information on how the code
generated data stubs access optional/default fields.</p>

<h3 id="default-values-for-union-types">Default Values for Union Types</h3>

<p>An Avro default value for a union type does not include the member
discriminator and the type of the default value must be the first member
type in the list of member types.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{
  ...
  "fields" :
  [
    {
      "name"     : "foo",
      "type"     : [ "int", "string" ],
      "default"  : 42
    }
  ]
}
```
</code></pre></div></div>

<p>A Pegasus default value for a union type must include the member
discriminator. This allows the same typeref’ed union to have default
values of different member types.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{
  ...
  "fields" :
  [
    {
      "name"     : "foo",
      "type"     : [ "int", "string" ]
      "default"  : { "int" : 42 }
    }
  ]
}
```
</code></pre></div></div>

<p>For unions with aliased members, the specified alias is used as member
discriminator instead of the type name.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{
  ...
  "fields" :
  [
    {
      "name"     : "foo",
      "type"     : [
        { "type" : "int", "alias" : "count" },
        { "type" : "string", "alias" : "message" }
      ],
      "default"  : { "count" : 42 }
    }
  ]
}
```
</code></pre></div></div>

<p>Note the Avro syntax optimizes the most common union with null pattern
that is used to represent optional fields to be less verbose. However,
Pegasus has explicit support for optional fields and discourages the use
of union with null. This significantly reduces the syntactical sugar
benefit of the Avro optimization.</p>

<p>If a union type may be translated to Avro, all default values provided
for the union type must be of the first member type in the list of
member types. This restriction is because Avro requires default values
of a union type to be of the first member type of the union.</p>

<h2 id="including-fields-from-another-record">Including Fields from Another Record</h2>

<p>Pegasus implements the “include” attribute. It is used to include all
fields from another record into the current record. It does not include
any other attribute of the record. Include is transitive, if record A
includes record B and record B includes record C, record A contains all
the fields declared in record A, record B and record C.</p>

<p>The value of the “include” attribute should be a list of records or
typerefs of records. It is an error to specify non-record types in this
list.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{
  "doc"  : "Bar includes fields of Foo, Bar will have fields f1 from itself and b1 from Bar",
  "type" : "record",
  "name" : "Bar",
  "include" : [ "Foo" ],
  "fields" : [
    {
      "name"     : "b1",
      "type"     : "string",
    }
  ]
}

{
  "type" : "record",
  "name" : "Foo",
  "fields" : [
    {
      "name"     : "f1",
      "type"     : "string",
    }
  ]
}
```
</code></pre></div></div>

<h2 id="deprecation">Deprecation</h2>

<p>Named schema, record field, and enum symbol can be deprecated using
<code class="highlighter-rouge">deprecated</code> property or <code class="highlighter-rouge">deprecatedSymbols</code> property in enum
declaration. The property value can be a string describing why the
schema element is deprecated or an alternative, or simply boolean
<code class="highlighter-rouge">true</code>. However, the latter use is discouraged and may be removed in the
future. The Java binding generated for these elements will be marked as
deprecated.</p>

<h3 id="named-schema">Named Schema</h3>

<p>To deprecate a named schema, add <code class="highlighter-rouge">deprecated</code> property to its
declaration.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{
  "type" : "record",
  "name" : "Deprecated",
  "namespace" : "com.linkedin.pegasus.generator.test",
  "deprecated": "Use Foo instead.",
  "fields" : [
    ...
  ]
}
```
</code></pre></div></div>

<h3 id="record-field">Record Field</h3>

<p>To deprecate a record field, add <code class="highlighter-rouge">deprecated</code> property to its
declaration.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{
  "type" : "record",
  "name" : "Foo",
  "namespace" : "com.linkedin.pegasus.generator.test",
  "fields" : [
    {
      "name" : "deprecatedInt",
      "type" : "int",
      "deprecated": "Reason for int deprecation."
    }
  ]
}
```
</code></pre></div></div>

<h3 id="enum-symbol">Enum Symbol</h3>

<p>To deprecate an enum symbol, add <code class="highlighter-rouge">deprecatedSymbols</code> property to the
enum declaration. The value of the property is a map from the symbol
name to a string description.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{
  "name" : "Planet",
  "namespace" : "com.linkedin.pegasus.generator.test",
  "type" : "enum",
  "symbols" : [ "MERCURY", "VENUS", "EARTH", "MARS", "JUPITER", "SATURN", "URANUS", "NEPTUNE", "PLUTO" ],
  "deprecatedSymbols": {
    "PLUTO": "Reclassified as dwarf planet."
  }
}
```
</code></pre></div></div>

<p><a name="HowDataisSerializedforTransport"></a></p>

<h1 id="how-data-is-serialized-for-transport">How Data is Serialized for Transport</h1>

<p>The data is serialized for transport using JSON encoding in following
the Avro 1.4.1 specification. This JSON encoding is also the same as the
JSON expression used to describe default values.</p>

<p><strong>One notable difference from the Avro spec is that optional fields with
no value are represented by its omission in the serialized data. To
phrase it differently, optional fields are never explicitly set to
<code class="highlighter-rouge">null</code> in the serialized body.</strong> As such, <code class="highlighter-rouge">null</code> is never a valid value
to appear in the serialized data. The only exception to this rule is if
the schema for the data is a union that has a <code class="highlighter-rouge">null</code> member.</p>

<p>The following table summarizes the JSON encoding.</p>

<table>
<thead>
<tr class="header">
<th>Schema Type <br /></th>
<th>JSON Type <br /></th>
<th>JSON Encoding Examples <br /></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>int <br /></td>
<td>number <br /></td>
<td>123 <br /></td>
</tr>
<tr class="even">
<td>long <br /></td>
<td>number <br /></td>
<td>123456789000 <br /></td>
</tr>
<tr class="odd">
<td>float <br /></td>
<td>number <br /></td>
<td>3.5 <br /></td>
</tr>
<tr class="even">
<td>double <br /></td>
<td>number <br /></td>
<td>3.5555555 <br /></td>
</tr>
<tr class="odd">
<td>boolean <br /></td>
<td>true or false <br /></td>
<td>true <br /></td>
</tr>
<tr class="even">
<td>string <br /></td>
<td>string <br /></td>
<td>“hello” <br /></td>
</tr>
<tr class="odd">
<td>bytes <br /></td>
<td>string (bytes encoded as least significant 8-bits of 16-bit character) <br /></td>
<td>“\u00ba\u00db\u00ad” <br /></td>
</tr>
<tr class="even">
<td>enum <br /></td>
<td>string <br /></td>
<td>“APPLE” <br /></td>
</tr>
<tr class="odd">
<td>fixed <br /></td>
<td>string (bytes encoded as least significant 8-bits of 16-bit character)</td>
<td>“\u0001\u0002\u0003\u0004” (fixed of size 4) <br /></td>
</tr>
<tr class="even">
<td>array <br /></td>
<td>array <br /></td>
<td>[ 1, 2, 3 ] <br /></td>
</tr>
<tr class="odd">
<td>map <br /></td>
<td>object <br /></td>
<td>{ “a” : 95, “b” : 90, “c” : 85 } <br /></td>
</tr>
<tr class="even">
<td>record (error) <br /></td>
<td>object (each field is encoded using a name/value pair in the object) <br /></td>
<td>{ “intField” : 1, “stringField” : “abc”, “fruitsField” : “APPLE” }</td>
</tr>
<tr class="odd">
<td>union <br /></td>
<td>null if value is null. <br /><br />
object if member value is not null with only one name/value pair in the object. The name will be the member discriminator (<strong>NOTE Member discriminator will be the member’s alias if one is specified, else it is the member’s fully qualified type name.</strong>) and value is the JSON encoded value. <br /></td>
<td>null <br /><br />
{ “int” : 1 } <br /><br />
{ “float” : 3.5 } <br /><br />
{ “string” : “abc” } <br /><br />
{ “array” : { “s1”, “s2”, “s3” } } <br /><br />
{ “map” : { “key1” : 10, “key2” : 20, “key3” : 30 } } <br /><br />
{ “com.linkedin.generator.examples.Fruits” : “APPLE” }</td>
</tr>
</tbody>
</table>

<p>If a union schema has a typeref member, then the key for that member is
the dereferenced type. E.g. for union</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```{
  "name" : "unionField",
  "type" : [
    "int",
    { "type" : "typeref", "name" : "a.b.c.d.Foo", "ref"  : "string" }
  ]
}
```
</code></pre></div></div>

<p>the JSON encoding for the typeref member should look like</p>

<p><code class="highlighter-rouge">{ “string” : “Correct key” }</code></p>

<p>NOT</p>

<p><code class="highlighter-rouge">{ “a.b.c.d.Foo” : “Wrong key” }</code></p>

<p>Similarly, for a union with aliased members the key for the members will
be its corresponding alias. For example,</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```{
  "name" : "unionField",
  "type" : [
    { "type" : "int", "alias" : "count" },
    { "type" : { "type" : "typeref", "name" : "a.b.c.d.Foo", "ref"  : "string" }, "alias" : "foo" }
  ]
}
```
</code></pre></div></div>

<p>the JSON encoding for the typeref member should look like</p>

<p><code class="highlighter-rouge">{ “foo” : “Correct key” }</code></p>

<h4 id="how-to-serialize-data-to-json">How to serialize data to JSON</h4>

<p><code class="highlighter-rouge">DataMapUtils</code> provides convenience methods to serialize and deserialize
between data and JSON using <code class="highlighter-rouge">JacksonDataCodec</code>.</p>

<p>To serialize from a DataMap to JSON:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
DataMap dataMap = new DataMap();
dataMap.put("message", "Hi!");
byte[] jsonBytes = DataMapUtils.mapToBytes(dataMap);
String json = new String(jsonBytes, "UTF-8");
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
To serialize from a RecordTemplate instance to JSON:

    ```
    Greeting greeting = new Greeting().setMessage("Hi!"); // Where Greeting is class extending RecordTemplate
    byte[] jsonBytes = DataMapUtils.dataTemplateToBytes(greeting, true);
    String json = new String(jsonBytes, "UTF-8");

</code></pre></div></div>

<h4 id="how-to-deserialize-json-to-data">How to Deserialize JSON to Data</h4>

<p>To deserialize from JSON to a DataMap:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
InputStream in = IOUtils.toInputStream("{'message':'Hi!'}");
DataMap dataMap = DataMapUtils.readMap(in);
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
To deserialize from JSON to a RecordTemplate:

    ```
    InputStream in = IOUtils.toInputStream("{'message':'Hi!'}");
    Greeting deserialized = DataMapUtils.read(in, Greeting.class); // Where Greeting is class extending RecordTemplate

</code></pre></div></div>

<h4 id="how-to-serialize-data-to-pson">How to Serialize Data to PSON</h4>

<p>PSON is a binary format that can represent any JSON data but is more
compact, requires less computation to serialize and deserialize, and can
transmit byte strings directly.</p>

<p>PSON serialization/deserialization works similar to JSON (as described
above) but uses these two methods:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
DataMapUtils.readMapPson()
DataMapUtils.mapToPsonBytes()
```
</code></pre></div></div>

<h1 id="how-data-is-represented-in-memory">How Data is Represented in Memory</h1>

<p>There are three architectural layers that define how data is stored
in-memory and provide the API’s used to access this data.</p>

<ul>
  <li>The first layer is the Data layer. This is the storage layer and is
totally generic, for example, not schema aware.</li>
  <li>The second layer is the Data Schema layer. This layer provides the
in-memory representation of the data schema.</li>
  <li>The third layer is the Data Template layer. This layer provides Java
type-safe access to data stored by the Data layer.</li>
</ul>

<h2 id="the-data-layer">The Data Layer</h2>

<p>At the conceptual level, the Data layer provides generic in-memory
representations of JSON objects and arrays. A <code class="highlighter-rouge">DataMap</code> and a <code class="highlighter-rouge">DataList</code>
provide the in-memory representation of a JSON object and a JSON array
respectively. These DataMaps and DataLists are the primary in-memory
data structures that store and manage data belonging to instances of
complex schema types. This layer allows data to be serialized and
de-serialized into in-memory representations without requiring the
schema to be known. In fact, the Data layer is not aware of schemas and
do not require a schema to access the underlying data.</p>

<p>The main motivations behind the Data layer are:</p>

<ul>
  <li>To allow generic access to the underlying data for building generic
assembly and query engines. These engines need a generic data
representation to data access. Furthermore, they may need to
construct new instances from dynamically executed expressions, such
as joins and projections. The schema of these instances depend on
the expression executed, and could not be known in advance.</li>
  <li>To facilitate schema evolution. The Data layer enables “use what you
know and pass on what you don’t”. It allows new fields to be added
and passed through intermediate nodes in the service graph without
requiring these nodes to also have their schemas updated to include
these new fields.</li>
  <li>To permit some Java Virtual Machine service calls to be optimized by
avoiding serialization.</li>
</ul>

<h3 id="constraints">Constraints</h3>

<p>The Data layer implements the following constraints:</p>

<ul>
  <li>It permits only allowed types to be stored as values.</li>
  <li>All non-container values (not <code class="highlighter-rouge">DataMap</code> and not <code class="highlighter-rouge">DataList</code>) are
immutable.</li>
  <li>Null is not a value. The <code class="highlighter-rouge">Data.NULL</code> constant is used to represent
null deserialized from or to be serialized to JSON. Avoiding null
Java values reduces complexity by reducing the number of states a
field may have. Without null values, a field can have two states,
“absent” or “has valid value”. If null values are permitted, a
field can have three states, “absent”, “has null value”, and “has
valid value”.</li>
  <li>The object graph is always acyclic. The object graph is the graph of
objects connected by DataMaps and DataLists.</li>
  <li>The key type for a <code class="highlighter-rouge">DataMap</code> is always <code class="highlighter-rouge">java.lang.String</code>.</li>
</ul>

<h3 id="additional-features">Additional Features</h3>

<p>The Data layer provides the following additional features (above and
beyond what the Java library provides.)</p>

<ul>
  <li>A <code class="highlighter-rouge">DataMap</code> and <code class="highlighter-rouge">DataList</code> may be made read-only. Once it is
read-only, mutations will no longer be allowed and will throw
<code class="highlighter-rouge">java.lang.UnsupportedOperationException</code>. There is no way to revert
a read-only instance to read-write.</li>
  <li>Access instrumentation. See <code class="highlighter-rouge">com.linkedin.data.Instrumentable</code> for
details.</li>
  <li>Implements deep copy that should return a object graph that is
isomorphic with the source, i.e. the copy will retain the directed
acyclic graph structure of the source.</li>
</ul>

<h3 id="allowed-value-types">Allowed Value Types</h3>

<ul>
  <li><code class="highlighter-rouge">java.lang.Integer</code></li>
  <li><code class="highlighter-rouge">java.lang.Long</code></li>
  <li><code class="highlighter-rouge">java.lang.Float</code></li>
  <li><code class="highlighter-rouge">java.lang.Double</code></li>
  <li><code class="highlighter-rouge">java.lang.Boolean</code></li>
  <li><code class="highlighter-rouge">java.lang.String</code></li>
  <li><code class="highlighter-rouge">com.linkedin.data.ByteString</code></li>
  <li><code class="highlighter-rouge">com.linkedin.data.DataMap</code></li>
  <li><code class="highlighter-rouge">com.linkedin.data.DataList</code></li>
</ul>

<p>Note Enum types are not allowed because enum types are not generic and
portable. Enum values are stored as a string.</p>

<h3 id="datacomplex">DataComplex</h3>

<p>Both <code class="highlighter-rouge">DataMap</code> and <code class="highlighter-rouge">DataList</code> implement the
<code class="highlighter-rouge">com.linkedin.data.DataComplex</code> interface. This interface declares the
methods that supports the additional features common to a <code class="highlighter-rouge">DataMap</code> and
a <code class="highlighter-rouge">DataList</code>. These methods are:</p>

<table>
<thead>
<tr class="header">
<th>Method</th>
<th>Declared by <br /></th>
<th>Description <br /></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>```DataComplex clone()``` <br /></td>
<td>```DataComplex``` <br /></td>
<td>A shallow copy of the instance. <br /><br />
The read-only state is not copied, the clone will be mutable. <br /><br />
The instrumentation state is also not copied. <br /><br />
Although ```java.lang.CloneNotSupportedException``` is declared in the throws clause, the method should not throw this exception. <br /></td>
</tr>
<tr class="even">
<td>```DataComplex copy()``` <br /></td>
<td>```DataComplex``` <br /></td>
<td>A deep copy of the object graph rooted at the instance. The copy will be isomorphic to the original. <br /><br />
The read-only state is not deep copied, and the new ```DataComplex``` copies will be mutable. <br /><br />
The instrumentation state is also not copied. <br /><br />
Although ```java.lang.CloneNotSupportedException``` is declared in the throws clause, the method should not throw this exception.</td>
</tr>
<tr class="odd">
<td>```void setReadOnly()``` <br /></td>
<td>```CowCommon``` <br /></td>
<td>Make the instance read-only. It does not affect the read-only state of contained ```DataComplex``` values. <br /></td>
</tr>
<tr class="even">
<td>```boolean isReadOnly()``` <br /></td>
<td>```CowCommon``` <br /></td>
<td>Whether the instance is in read-only state. <br /></td>
</tr>
<tr class="odd">
<td>```void makeReadOnly()``` <br /></td>
<td>```DataComplex``` <br /></td>
<td>Make the object graph rooted at this instance read-only. <br /></td>
</tr>
<tr class="even">
<td>void ```isMadeReadOnly()``` <br /></td>
<td>```DataComplex``` <br /></td>
<td>Whether the object graph rooted at this instance has been made read-only. <br /></td>
</tr>
<tr class="odd">
<td>```Collection&lt;Object&gt; values()``` <br /></td>
<td>```DataComplex``` <br /></td>
<td>Returns the values stored in the ```DataComplex``` instance, i.e. returns the values of a ```DataMap``` or the elements of a ```DataList```. <br /></td>
</tr>
<tr class="even">
<td>```void startInstrumentatingAccess()``` <br /></td>
<td>```Instrumentable``` <br /></td>
<td>Starts instrumenting access. <br /></td>
</tr>
<tr class="odd">
<td>```void stopInstrumentingAccess()``` <br /></td>
<td>```Instrumentable``` <br /></td>
<td>Stops instrumenting access. <br /></td>
</tr>
<tr class="even">
<td>```void clearInstrumentedData()``` <br /></td>
<td>```Instrumentable``` <br /></td>
<td>Clears instrumentation data collected. <br /></td>
</tr>
<tr class="odd">
<td>```void collectInstrumentedData(...)``` <br /></td>
<td>```Instrumentable``` <br /></td>
<td>Collect data gathered when instrumentation was enabled. <br /></td>
</tr>
</tbody>
</table>

<p>Note: Details on <code class="highlighter-rouge">CowCommon</code>, <code class="highlighter-rouge">CowMap</code>, and <code class="highlighter-rouge">CowList</code> have been omitted
or covered under <code class="highlighter-rouge">DataComplex</code>. Cow provides copy-on-write
functionality. The semantics of <code class="highlighter-rouge">CowMap</code> and <code class="highlighter-rouge">CowList</code> is similar to
<code class="highlighter-rouge">HashMap</code> and <code class="highlighter-rouge">ArrayList</code>.</p>

<h3 id="datamap">DataMap</h3>

<p>The <code class="highlighter-rouge">com.linkedin.data.DataMap</code> class has the following characteristics:</p>

<ul>
  <li><code class="highlighter-rouge">DataMap</code> implements <code class="highlighter-rouge">java.util.Map&lt;String, Object&gt;</code>.</li>
  <li>Its <code class="highlighter-rouge">entrySet()</code>, <code class="highlighter-rouge">keySet()</code>, and <code class="highlighter-rouge">values()</code> methods return
unmodifiable set and collection views.</li>
  <li>Its <code class="highlighter-rouge">clone()</code> and <code class="highlighter-rouge">copy()</code> methods returns a <code class="highlighter-rouge">DataMap</code>.</li>
</ul>

<h3 id="datalist">DataList</h3>

<p>The <code class="highlighter-rouge">com.linkedin.data.DataList</code> class has the following
characteristics.</p>

<ul>
  <li><code class="highlighter-rouge">DataList</code> implements <code class="highlighter-rouge">java.util.List&lt;Object&gt;</code>.</li>
  <li>Its <code class="highlighter-rouge">clone()</code> and <code class="highlighter-rouge">copy()</code> method return a <code class="highlighter-rouge">DataList</code>.</li>
</ul>

<h2 id="the-data-schema-layer">The Data Schema Layer</h2>

<p>The Data Schema layer provides the in-memory representation of the data
schema. The Data Schema Layer provides the following main features:</p>

<ul>
  <li>Parse a JSON encoded schema into in-memory representation using
classes in this layer</li>
  <li>Validate a Data object against a schema</li>
</ul>

<p>Their common base class for Data Schema classes is
<code class="highlighter-rouge">com.linkedin.data.schema.DataSchema</code>. It defines the following methods:</p>

<p>|<em>. Method <br /> |</em>. Description <br /> |<br />
| <code class="highlighter-rouge">Type getType()</code> <br /> | Provide the type of the schema, can be
<code class="highlighter-rouge">BOOLEAN</code>, <code class="highlighter-rouge">INT</code>, <code class="highlighter-rouge">LONG</code>, <code class="highlighter-rouge">FLOAT</code>, <code class="highlighter-rouge">DOUBLE</code>, <code class="highlighter-rouge">BYTES</code>, <code class="highlighter-rouge">STRING</code>, <code class="highlighter-rouge">FIXED</code>,
<code class="highlighter-rouge">ENUM</code>, <code class="highlighter-rouge">NULL</code>, <code class="highlighter-rouge">ARRAY</code>, <code class="highlighter-rouge">RECORD</code>, <code class="highlighter-rouge">MAP</code>, <code class="highlighter-rouge">UNION</code>. <br /> |<br />
| <code class="highlighter-rouge">boolean hasError()</code> <br /> | Whether the schema definition contains
at least one error. <br /> |<br />
| <code class="highlighter-rouge">boolean isPrimitive()</code> <br /> | Whether the schema type is a
primitive schema type. <br /> |<br />
| <code class="highlighter-rouge">boolean isComplex()</code> <br /> | Whether the schema type is a complex
schema type, i.e. not primitive type. <br /> |<br />
| <code class="highlighter-rouge">Map&lt;String,Object&gt; getProperties()</code> <br /> | Return the properties of
the schema. These properties are the keys and values from the JSON
fields in complex schema definitions that are not processed and
interpreted by the schema parser. For primitive types, this method
always return an immutable empty map. <br /> |<br />
| <code class="highlighter-rouge">String getUnionMemberKey()</code> <br /> | If this type is used as a member
of a union without an alias, this will be the key that uniquely
identifies/selects this type within the union. This value of this key is
as defined by the Avro 1.4.1 specification for JSON serialization.
<br /> |<br />
| <code class="highlighter-rouge">String toString()</code> <br /> | A more human consumable formatting of the
schema in JSON encoding. Space will added between fields, items, names,
values, … etc. <br /> |<br />
| <code class="highlighter-rouge">Type getDereferencedType</code> <br /> | If the type is a typeref, it will
follow the typeref reference chain and return the type referenced at the
end of the typeref chain. <br /> |<br />
| <code class="highlighter-rouge">DataSchema getDereferencedSchema</code> <br /> | If the type is a typeref,
it will follow the typeref reference chain and return the DataSchema
referenced at the end of the typeref chain. <br /> |<br />
The following table shows the mapping of schema types to Data Schema
classes.</p>

<table>
<thead>
<tr class="header">
<th>Schema Type <br /></th>
<th>Data Schema class <br /></th>
<th>Relevant Specific Attributes <br /></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>int <br /></td>
<td>```IntegerDataSchema``` <br /></td>
<td></td>
</tr>
<tr class="even">
<td>long <br /></td>
<td>```LongDataSchema``` <br /></td>
<td></td>
</tr>
<tr class="odd">
<td>float <br /></td>
<td>```FloatDataSchema``` <br /></td>
<td></td>
</tr>
<tr class="even">
<td>double <br /></td>
<td>```DoubleDataSchema``` <br /></td>
<td></td>
</tr>
<tr class="odd">
<td>boolean <br /></td>
<td>```BooleanDataSchema``` <br /></td>
<td></td>
</tr>
<tr class="even">
<td>string <br /></td>
<td>```StringDataSchema``` <br /></td>
<td></td>
</tr>
<tr class="odd">
<td>bytes <br /></td>
<td>```BytesDataSchema``` <br /></td>
<td></td>
</tr>
<tr class="even">
<td>enum <br /></td>
<td>```EnumDataSchema``` <br /></td>
<td>```List&lt;String&gt; getSymbols()``` <br /><br />
```int index(String symbol)``` <br /><br />
```boolean contains(String symbol)``` <br /></td>
</tr>
<tr class="odd">
<td>array <br /></td>
<td>```ArrayDataSchema``` <br /></td>
<td>```DataSchema getItems()``` <br /></td>
</tr>
<tr class="even">
<td>map <br /></td>
<td>```MapDataSchema``` <br /></td>
<td>```DataSchema getValues()```</td>
</tr>
<tr class="odd">
<td>fixed <br /></td>
<td>```FixedDataSchema``` <br /></td>
<td>```int getSize()``` <br /></td>
</tr>
<tr class="even">
<td>record, error <br /></td>
<td>```RecordDataSchema``` <br /></td>
<td>```RecordType recordType()``` (record or error) <br /><br />
```boolean isErrorRecord()``` <br /><br />
```List&lt;Field&gt; getFields()``` <br /><br />
```int index(String fieldName)``` <br /><br />
```boolean contains(String fieldName)``` <br /><br />
```Field getField(String fieldName)``` <br /></td>
</tr>
<tr class="odd">
<td>union <br /></td>
<td>```UnionDataSchema``` <br /></td>
<td>```List&lt;Member&gt; getMembers()``` <br /><br />
```boolean contains(String memberKey)``` <br /><br />
```DataSchema getTypeByMemberKey(String memberKey)``` <br /><br />
```boolean areMembersAliased()``` <br /></td>
</tr>
<tr class="even">
<td>null <br /></td>
<td>```NullDataSchema``` <br /></td>
<td></td>
</tr>
</tbody>
</table>

<h2 id="data-to-schema-validation">Data to Schema Validation</h2>

<p>The <code class="highlighter-rouge">ValidateDataAgainstSchema</code> class provides methods for validating
Data layer instances with a Data Schema. The <code class="highlighter-rouge">ValidationOption</code> class is
used to specify how validation should be performed and how to fix-up the
input Data layer objects to conform to the schema. There are two
independently configuration options:</p>

<ul>
  <li><code class="highlighter-rouge">RequiredMode</code> option indicates how required fields should be
handled during validation.</li>
  <li><code class="highlighter-rouge">CoercionMode</code> option indicates how to coerce Data layer objects to
the Java type corresponding to their schema type.</li>
</ul>

<p>Example Usage:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ValidationResult</span> <span class="n">validationResult</span> <span class="o">=</span>
<span class="n">ValidateDataAgainstSchema</span><span class="o">.</span><span class="na">validate</span><span class="o">(</span><span class="n">dataTemplate</span><span class="o">,</span> <span class="n">dataTemplate</span><span class="o">.</span><span class="na">schema</span><span class="o">(),</span>
<span class="k">new</span> <span class="nf">ValidationOptions</span><span class="o">());</span>  
<span class="k">if</span> <span class="o">(</span><span class="err">\</span><span class="o">!</span><span class="n">validationResult</span><span class="o">.</span><span class="na">isValid</span><span class="o">())</span>  
<span class="o">{</span>  
<span class="c1">// do something  </span>
<span class="o">}</span>  
</code></pre></div></div>

<h3 id="requiredmode">RequiredMode</h3>

<p>The available RequiredModes are:</p>

<ul>
  <li><code class="highlighter-rouge">IGNORE</code><br />
Required fields may be absent. Do not indicate a validation error if
a required field is absent.</li>
  <li><code class="highlighter-rouge">MUST_BE_PRESENT</code><br />
If a required field is absent, then validation fails. Validation
will fail even if the required field has been declared with a
default value.</li>
  <li><code class="highlighter-rouge">CAN_BE_ABSENT_IF_HAS_DEFAULT</code><br />
If a required field is absent and the field has not been declared
with a default value, then validation fails. Validation will not
attempt to modify the field to provide it with the default value.</li>
  <li><code class="highlighter-rouge">FIXUP_ABSENT_WITH_DEFAULT</code><br />
If a required field is absent and it cannot be fixed-up with a
default value, then validation fails.<br />
This mode will attempt to modify an absent field to provide it with
the field’s default value.<br />
If the field does not have a default value, validation fails.<br />
If the field has a default value, validation will attempt to set the
field’s value to the default value.<br />
This attempt may fail if fixup is not enabled or the <code class="highlighter-rouge">DataMap</code>
containing the field cannot be modified because it is read-only.<br />
The provided default value will be read-only.</li>
</ul>

<h3 id="coercionmode">CoercionMode</h3>

<p>Since JSON does not have or encode enough information on the actual
types of primitives, and schema types like bytes and fixed are not
represented by native types in JSON, the initial de-serialized in-memory
representation of instances of these types may not be the actual type
specified in the schema. For example, when de-serializing the number 52,
it will be de-serialized into an <code class="highlighter-rouge">Integer</code> even though the schema type
may be a <code class="highlighter-rouge">Long</code>. This is because a schema is not required to serialize
or de-serialize.</p>

<p>When the data is accessed via schema aware language binding like the
Java binding, the conversion/coercion can occur at the language binding
layer. In cases when the language binding is not used, it may be
desirable to fix-up a Data layer object by coercing it the Java type
corresponding to the object’s schema. For example, the appropriate Java
type the above example would be a <code class="highlighter-rouge">Long</code>. Another fix-up would be to
fixup Avro-specified string encoding of binary data (bytes or fixed)
into a <code class="highlighter-rouge">ByteString</code>. In another case, it may be desirable to coerce the
string representation of a value to the Java type corresponding to the
object’s schema. For example, coerce “65” to 65, the integer, if the
schema type is “int”.</p>

<p>Whether an how coercion is performed is specified by <code class="highlighter-rouge">CoercionMode</code>. The
available CoercionModes are:</p>

<ul>
  <li><code class="highlighter-rouge">OFF</code><br />
No coercion is performed.</li>
  <li><code class="highlighter-rouge">NORMAL</code><br />
Numeric types are coerced to the schema’s corresponding Java numeric
type. Avro-encoded binary strings are coerced to ByteString if the
schema type is bytes or fixed.</li>
  <li><code class="highlighter-rouge">STRING_TO_PRIMITIVE</code><br />
Includes all the coercions performed by <code class="highlighter-rouge">NORMAL</code>. In addition, also
coerces string representations of numbers to the schema’s
corresponding numeric type, and string representation of booleans
(“true” or “false” case-insenstive) to <code class="highlighter-rouge">Boolean</code>.</li>
</ul>

<p><a name="NormalMode"></a></p>

<h4 id="normal-coercion-mode"><code class="highlighter-rouge">NORMAL</code> Coercion Mode</h4>

<p>The following table provides additional details on the <code class="highlighter-rouge">NORMAL</code>
validation and coercion mode.</p>

<table>
<thead>
<tr class="header">
<th>Schema Type <br /></th>
<th>Post-coercion Java Type <br /></th>
<th>Pre-coercion Input Java Types <br /></th>
<th>Validation Performed <br /></th>
<th>Coercion Method</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>int <br /></td>
<td>```java.lang.Integer``` <br /></td>
<td>```java.lang.Number``` (1) <br /></td>
<td>Value must be a ```Number```. <br /></td>
<td>```Number.intValue()``` <br /></td>
</tr>
<tr class="even">
<td>long <br /></td>
<td>```java.lang.Long``` <br /></td>
<td>```java.lang.Number``` (1)</td>
<td>Value must be a ```Number```. <br /></td>
<td>```Number.longValue()``` <br /></td>
</tr>
<tr class="odd">
<td>float <br /></td>
<td>```java.lang.Float``` <br /></td>
<td>```java.lang.Number``` (1)</td>
<td>Value must be a ```Number```.</td>
<td>```Number.floatValue()``` <br /></td>
</tr>
<tr class="even">
<td>double <br /></td>
<td>```java.lang.Double``` <br /></td>
<td>```java.lang.Number``` (1)</td>
<td>Value must be a ```Number```.</td>
<td>```Number.doubleValue()``` <br /></td>
</tr>
<tr class="odd">
<td>boolean <br /></td>
<td>```java.lang.Boolean``` <br /></td>
<td>```java.lang.Boolean``` (2) <br /></td>
<td>Value must be a ```Boolean```. <br /></td>
<td></td>
</tr>
<tr class="even">
<td>string <br /></td>
<td>```java.lang.String``` <br /></td>
<td>```java.lang.String``` (2) <br /></td>
<td>Value must be a ```String```. <br /></td>
<td></td>
</tr>
<tr class="odd">
<td>bytes <br /></td>
<td>```com.linkedin.data.ByteString``` <br /></td>
<td>```com.linkedin.data.ByteString```, ```java.lang.String``` (3) <br /></td>
<td>If the value is a ```String```, the ```String``` must be a valid encoding of binary data as specified by the Avro specification for encoding bytes into a JSON string. <br /></td>
<td>```ByteString.copyFromAvroString()``` <br /></td>
</tr>
<tr class="even">
<td>enum <br /></td>
<td>```java.lang.String``` <br /></td>
<td>```java.lang.String``` <br /></td>
<td>The value must be a symbol defined by the enum schema. <br /></td>
<td></td>
</tr>
<tr class="odd">
<td>array <br /></td>
<td>```com.linkedin.data.DataList``` <br /></td>
<td>```com.linkedin.data.DataList``` (2) <br /></td>
<td>Each element in the ```DataList``` must be a valid Java type for the schema’s item type. For example, if the schema is an array of longs, then every element in the ```DataList``` must be a ```Number```. <br /></td>
<td></td>
</tr>
<tr class="even">
<td>map <br /></td>
<td>```com.linkedin.data.DataMap``` <br /></td>
<td>```com.linkedin.data.DataMap``` (2) <br /></td>
<td>Each value in the ```DataMap``` must be a valid Java type for the schema’s value type. For example, if the schema is a map of longs, then every value in the ```DataMap``` must be a ```Number```.</td>
<td></td>
</tr>
<tr class="odd">
<td>fixed <br /></td>
<td>```com.linkedin.data.ByteString``` <br /></td>
<td>```com.linked.data.ByteString``` (2), ```java.lang.String``` (3) <br /></td>
<td>If the value is a ```String```, the ```String``` must be a valid encoding of binary data as specified by the Avro specification for encoding bytes into a JSON string and the correct size for the fixed schema type. <br /><br />
If the value is a ```ByteString```, the ```ByteString``` must be the correct size for the fixed schema type. <br /></td>
<td>```ByteString.copyFromAvroString()```</td>
</tr>
<tr class="even">
<td>record <br /></td>
<td>```com.linkedin.data.DataMap``` <br /></td>
<td>```com.linkedin.data.DataMap``` (2) <br /></td>
<td>Each key in the ```DataMap``` will be used lookup a field in the record schema. The value associated with this key must be a valid Java type for the field’s type. <br /><br />
If the required validation option is enabled, then all required fields must also be present. <br /></td>
<td></td>
</tr>
<tr class="odd">
<td>union <br /></td>
<td>```com.linkedin.data.DataMap``` <br /></td>
<td>```java.lang.String```, ```com.linkedin.data.DataMap``` (2) <br /></td>
<td>f the value is a ```String```, the value must be ```Data.NULL```. <br /><br />
If the value is a ```DataMap```, then the ```DataMap``` must have exactly one entry. The key of the entry must identify a member of the union schema, and the value must be a valid type for the identified union member’s type. <br /></td>
<td></td>
</tr>
</tbody>
</table>

<p>(1) Even though <code class="highlighter-rouge">Number</code> type is allowed and used for fixing up to the
desired type, the Data layer only allows <code class="highlighter-rouge">Integer</code>, <code class="highlighter-rouge">Long</code>, <code class="highlighter-rouge">Float</code>, and
<code class="highlighter-rouge">Double</code> values to be held in a <code class="highlighter-rouge">DataMap</code> or <code class="highlighter-rouge">DataList</code>.<br />
(2) No fix-up is performed.<br />
(3) the <code class="highlighter-rouge">String</code> must be a valid encoding of binary data as specified by
the Avro specification for encoding bytes into a JSON string.</p>

<h4 id="string_to_primitive-coercion-mode"><code class="highlighter-rouge">STRING_TO_PRIMITIVE</code> Coercion Mode</h4>

<p>This mode includes allowed input types and associated validation and
coercion’s of <code class="highlighter-rouge">NORMAL</code>. In addition, it allows the following additional
input types and performs the following coercions on these additional
allowed input types.</p>

<p>|<em>. Schema Type <br /> |</em>. Post-coercion Java Type <br /> |<em>.
Pre-coercion Input Java Types <br /> |</em>. Validation Performed <br />
|_. Coercion Method <br /> |<br />
| int <br /> | <code class="highlighter-rouge">java.lang.Integer</code> <br /> | <code class="highlighter-rouge">java.lang.String</code> <br /> |
If value is a <code class="highlighter-rouge">String</code>, it must be acceptable to <code class="highlighter-rouge">BigDecimal(String
val)</code>, else it has to be a <code class="highlighter-rouge">Number</code> (see <a href="#NormalMode.\"><code class="highlighter-rouge">NORMAL</code></a>)
<br /> | <code class="highlighter-rouge">(new BigDecimal(value)).intValue()</code> <br /> |<br />
| long <br /> | <code class="highlighter-rouge">java.lang.Long</code> <br /> | <code class="highlighter-rouge">java.lang.String</code> | If value
is a <code class="highlighter-rouge">String</code>, it must be acceptable to <code class="highlighter-rouge">BigDecimal(String val)</code>, else
it has to be a <code class="highlighter-rouge">Number</code> (see <a href="#NormalMode.\"><code class="highlighter-rouge">NORMAL</code></a>) | <code class="highlighter-rouge">(new
BigDecimal(value)).longValue()</code> |<br />
| float <br /> | <code class="highlighter-rouge">java.lang.Float</code> <br /> | <code class="highlighter-rouge">java.lang.String</code> | If
value is a <code class="highlighter-rouge">String</code>, it must be acceptable to <code class="highlighter-rouge">BigDecimal(String val)</code>,
else it has to be a <code class="highlighter-rouge">Number</code> (see <a href="#NormalMode.\"><code class="highlighter-rouge">NORMAL</code></a>) <br /> |
<code class="highlighter-rouge">(new BigDecimal(value)).floatValue()</code> |<br />
| double <br /> | <code class="highlighter-rouge">java.lang.Double</code> <br /> | <code class="highlighter-rouge">java.lang.String</code> | If
value is a <code class="highlighter-rouge">String</code>, it must be acceptable to <code class="highlighter-rouge">BigDecimal(String val)</code>,
else it has to be a <code class="highlighter-rouge">Number</code> (see <a href="#NormalMode.\"><code class="highlighter-rouge">NORMAL</code></a>) <br /> |
<code class="highlighter-rouge">(new BigDecimal(value)).doubleValue()</code> |<br />
| boolean <br /> | <code class="highlighter-rouge">java.lang.Boolean</code> <br /> | <code class="highlighter-rouge">java.lang.String</code> | if
value is a <code class="highlighter-rouge">String</code>, its value must be either <code class="highlighter-rouge">"true"</code> or <code class="highlighter-rouge">"false"</code>
ignoring case, else it has to be a <code class="highlighter-rouge">Boolean</code> (see
<a href="#NormalMode.\"><code class="highlighter-rouge">NORMAL</code></a>) <br /> |</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```if ("true".equalsIgnoreCase(value))
    return Boolean.TRUE;
else if ("false".equalsIgnoreCase(value))
    return Boolean.FALSE;
else 
     // invalid string representation
     // of boolean ```
</code></pre></div></div>

<table>
  <tbody>
    <tr>
    </tr>
  </tbody>
</table>

<h3 id="validationresult">ValidationResult</h3>

<p>The result of validation is returned through an instance of the
<code class="highlighter-rouge">ValidationResult</code> class. This class has the following methods:</p>

<table>
<thead>
<tr class="header">
<th>Method</th>
<th>Description <br /></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>```boolean hasFix()``` <br /></td>
<td>Whether any fix-ups (i.e., modification or replacement of input Data layer objects) have been proposed. Fixes may be proposed but not applied because fixes cannot be applied to read-only complex objects. <br /></td>
</tr>
<tr class="even">
<td>```boolean hasFixupReadOnlyError()``` <br /></td>
<td>Whether any fix-ups could not be applied because of read-only complex objects. <br /></td>
</tr>
<tr class="odd">
<td>```Object getFixed()``` <br /></td>
<td>Return a fixed object. In-place fixes may or may not be possible because some objects are immutable. For example, if the schema type is “fixed” and String object is provided as the Data object, the fixed-up object that would be returned will be a ByteString. Since String and ByteString are both immutable and have different types, the fixed object will be a different object, i.e. the fix-up cannot be done in-place. <br /><br />
<br /><br />
For complex objects, the fix-ups can be applied in place. This is because the new values can replace the old values in a ```DataMap``` or ```DataList```. <br /></td>
</tr>
<tr class="even">
<td>```boolean isValid()``` <br /></td>
<td>Whether the fixed object returns by ```getFixed()``` contains any errors. If it returns ```false```, then the fixed object and its dependents are fixed up according to the provided schema. <br /></td>
</tr>
<tr class="odd">
<td>```String getMessage()``` <br /></td>
<td>Provides details on validation and fix-up failures. Returns empty string if ```isValid()``` is ```true``` and fix-ups/validation have occurred without problems. <br /></td>
</tr>
</tbody>
</table>

<p>Note: Schema validation and coercion are currently explicit operations.
They are not implicitly performed when data are de-serialized as part of
remote invocations.</p>

<h2 id="the-data-template-layer">The Data Template Layer</h2>

<p>The Data Template layer provides Java type-safe access to the underlying
data stored in the Data layer. It has explicit knowledge of the schema
of the data stored. The code generator generates classes for complex
schema types that derive from base classes in this layer. The common
base of these generated is <code class="highlighter-rouge">com.linkedin.data.DataTemplate</code>. Typically,
a <code class="highlighter-rouge">DataTemplate</code> instance is an overlay or wrapper for a <code class="highlighter-rouge">DataMap</code> or
<code class="highlighter-rouge">DataList</code> instance. It allows type-safe access to the underlying data
in the <code class="highlighter-rouge">DataMap</code> or <code class="highlighter-rouge">DataList</code>. (The exception is the <code class="highlighter-rouge">FixedTemplate</code>
which is a subclass of <code class="highlighter-rouge">DataTemplate</code> for fixed schema types.)</p>

<p>The Data Template layer provides the following abstract base classes
that are used to construct Java bindings for different complex schema
types.</p>

<table>
  <thead>
    <tr>
      <th>Class</th>
      <th>Underlying Data <br /></th>
      <th>Description <br /></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">AbstractArrayTemplate</code> <br /></td>
      <td><code class="highlighter-rouge">DataList</code> <br /></td>
      <td>Base class for array types. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">DirectArrayTemplate</code> <br /></td>
      <td><code class="highlighter-rouge">DataList</code> <br /></td>
      <td>Base class for array types containing unwrapped item types, extends <code class="highlighter-rouge">AbstractArrayTemplate</code>. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">WrappingArrayTemplate</code> <br /></td>
      <td><code class="highlighter-rouge">DataList</code> <br /></td>
      <td>Base class for array types containing wrapped item types, extends <code class="highlighter-rouge">AbstractArrayTemplate</code>. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">AbstractMapTemplate</code> <br /></td>
      <td><code class="highlighter-rouge">DataMap</code> <br /></td>
      <td>Base class for map types. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">DirectMapTemplate</code> <br /></td>
      <td><code class="highlighter-rouge">DataMap</code> <br /></td>
      <td>Base class for map types containing unwrapped value types, extends <code class="highlighter-rouge">AbstractMapTemplate</code>. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">WrappingMapTemplate</code> <br /></td>
      <td><code class="highlighter-rouge">DataMap</code> <br /></td>
      <td>Base class for map types containing wrapped value types, extends <code class="highlighter-rouge">AbstractMapTemplate</code>. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">FixedTemplate</code> <br /></td>
      <td><code class="highlighter-rouge">ByteString</code> <br /></td>
      <td>Base class for fixed types. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">RecordTemplate</code> <br /></td>
      <td><code class="highlighter-rouge">DataMap</code> <br /></td>
      <td>Base class for record types. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ExceptionTemplate</code> <br /></td>
      <td><code class="highlighter-rouge">DataMap</code> <br /></td>
      <td>Base class for record types that declared as errors. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">UnionTemplate</code> <br /></td>
      <td><code class="highlighter-rouge">DataMap</code> <br /></td>
      <td>Base class for union types. <br /></td>
    </tr>
  </tbody>
</table>

<p>The unwrapped schema types are:</p>

<ul>
  <li>int</li>
  <li>long</li>
  <li>float</li>
  <li>double</li>
  <li>boolean</li>
  <li>string</li>
  <li>bytes</li>
  <li>enum</li>
</ul>

<p>The wrapped schema types are types whose Java type-safe bindings are not
the same as their data type in the Data layer. These types require a
<code class="highlighter-rouge">DataTemplate</code> wrapper to provide type-safe access to the underlying
data managed by the Data layer. The wrapped types are:</p>

<ul>
  <li>array</li>
  <li>map</li>
  <li>fixed</li>
  <li>record and error</li>
  <li>union</li>
</ul>

<p><code class="highlighter-rouge">Enum</code> is an unwrapped type even though its Java type-safe binding is
not the same as its storage type in the Data layer. This is because enum
conversions are done through coercing to and from <code class="highlighter-rouge">java.lang.String</code> s
implemented by the Data Template layer. This is similar to coercing
between different numeric types also implemented by the Data Template
layer.</p>

<p>The following table shows the relationships among types defined in the
data schema, types stored and managed by the Data layer, and the types
of the Java binding in the Data Template
layer.</p>

<table>
  <thead>
    <tr>
      <th>Schema Type <br /></th>
      <th>Data Layer <br /></th>
      <th>Data Template Layer <br /></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>int <br /></td>
      <td><code class="highlighter-rouge">java.lang.Integer</code> <br /></td>
      <td>Coerced to <code class="highlighter-rouge">java.lang.Integer</code> or <code class="highlighter-rouge">int</code> (2) <br /></td>
    </tr>
    <tr>
      <td>long <br /></td>
      <td><code class="highlighter-rouge">java.lang.Integer</code> or <code class="highlighter-rouge">java.lang.Long</code> (1) <br /></td>
      <td>Coerced to <code class="highlighter-rouge">java.lang.Long</code> or <code class="highlighter-rouge">long</code> (2) <br /></td>
    </tr>
    <tr>
      <td>float <br /></td>
      <td><code class="highlighter-rouge">java.lang.Integer</code>, <code class="highlighter-rouge">java.lang.Long</code>, <code class="highlighter-rouge">java.lang.Float</code> or <code class="highlighter-rouge">java.lang.Double</code> (1) <br /></td>
      <td>Coerced to <code class="highlighter-rouge">java.lang.Float</code> or <code class="highlighter-rouge">float</code> (2) <br /></td>
    </tr>
    <tr>
      <td>double <br /></td>
      <td><code class="highlighter-rouge">java.lang.Integer</code>, <code class="highlighter-rouge">java.lang.Long</code>, <code class="highlighter-rouge">java.lang.Float</code> or <code class="highlighter-rouge">java.lang.Double</code> (1) <br /></td>
      <td>Coerced to <code class="highlighter-rouge">java.lang.Double</code> or <code class="highlighter-rouge">double</code> (2) <br /></td>
    </tr>
    <tr>
      <td>boolean <br /></td>
      <td><code class="highlighter-rouge">java.lang.Boolean</code> <br /></td>
      <td>Coerced to <code class="highlighter-rouge">java.lang.Boolean</code> or <code class="highlighter-rouge">boolean</code> (2) <br /></td>
    </tr>
    <tr>
      <td>string <br /></td>
      <td><code class="highlighter-rouge">java.lang.String</code> <br /></td>
      <td><code class="highlighter-rouge">java.lang.String</code> <br /></td>
    </tr>
    <tr>
      <td>bytes <br /></td>
      <td><code class="highlighter-rouge">java.lang.String</code> or <code class="highlighter-rouge">com.linkedin.data.ByteString</code> (3) <br /></td>
      <td><code class="highlighter-rouge">com.linkedin.data.ByteString</code> <br /></td>
    </tr>
    <tr>
      <td>enum <br /></td>
      <td><code class="highlighter-rouge">java.lang.String</code> <br /></td>
      <td>Generated enum class. <br /></td>
    </tr>
    <tr>
      <td>array <br /></td>
      <td><code class="highlighter-rouge">com.linkedin.data.DataList</code> <br /></td>
      <td>Generated or built-in array class. <br /></td>
    </tr>
    <tr>
      <td>map <br /></td>
      <td><code class="highlighter-rouge">com.linkedin.data.DataMap</code> <br /></td>
      <td>Generated or built-in map class. <br /></td>
    </tr>
    <tr>
      <td>fixed <br /></td>
      <td><code class="highlighter-rouge">java.lang.String</code> or <code class="highlighter-rouge">com.linkedin.data.ByteString</code> <br /></td>
      <td>Generated class that derives from <code class="highlighter-rouge">FixedTemplate</code> <br /></td>
    </tr>
    <tr>
      <td>record <br /></td>
      <td><code class="highlighter-rouge">com.linkedin.data.DataMap</code> <br /></td>
      <td>Generated class that derives from <code class="highlighter-rouge">RecordTemplate</code> <br /></td>
    </tr>
    <tr>
      <td>error <br /></td>
      <td><code class="highlighter-rouge">com.linkedin.data.DataMap</code> <br /></td>
      <td>Generated class that derives from <code class="highlighter-rouge">ExceptionTemplate</code> <br /></td>
    </tr>
    <tr>
      <td>union <br /></td>
      <td><code class="highlighter-rouge">com.linkedin.data.DataMap</code> <br /></td>
      <td>Generated class that derives from <code class="highlighter-rouge">UnionTemplate</code> <br /></td>
    </tr>
  </tbody>
</table>

<p>(1) When a JSON object is deserialized, the actual schema type is not
known. Typically, the smallest sized type that can represent the
deserialized value will be used to store the value in-memory.<br />
(2) Depending on the method, un-boxed types will be preferred to boxed
types if applicable and the input or output arguments can never be
null.<br />
(3) When a JSON object is deserialized, the actual schema type is not
known for bytes and fixed. Values of bytes and fixed types are stored as
strings as serialized representation is a string. However, <code class="highlighter-rouge">ByteString</code>
is an equally valid Java type for these schema types.</p>

<h1 id="java-binding">Java Binding</h1>

<p>This section describes the details of the Java classes (dataModels)
generated by the code generator. These bindings are built on the classes
provided by the Data Template layer described above.</p>

<h2 id="package-and-class-names">Package and Class Names</h2>

<p>The Java binding determines the package and class names of the generated
and/or built-in classes using the following rules.</p>

<p>|<em>. Schema Type <br /> |</em>. Java Package and Class Name <br /> |<br />
| maps and arrays of primitive types <br /> | Package name is
<code class="highlighter-rouge">com.linkedin.data.template</code>. <br /><br />
Class name is computed by appending “Map” or “Array” to the
corresponding boxed type’s class name. <br /><br />
For multi-dimensional maps and arrays, a “Map” or “Array” is appended
for each dimension starting with the inner most dimension first.
<br /><br />
<br /><br />
<strong>Example Schema</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{ "type" : "map", "values" : "boolean" }
{ "type" : "array", "items" : { "type" : "map" : "values" : "string" } }
```
</code></pre></div></div>

<p><strong>Java package and class</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">```</span>
<span class="k">package</span> <span class="n">com</span><span class="p">.</span><span class="n">linkedin</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">templates</span><span class="p">;</span>
<span class="k">public</span> <span class="n">class</span> <span class="n">BooleanMap</span> <span class="n">extends</span> <span class="n">DirectArrayTemplate</span><span class="p">&lt;</span><span class="k">Boolean</span><span class="p">&gt;</span> <span class="p">...</span>
<span class="k">public</span> <span class="n">class</span> <span class="n">StringMapArray</span> <span class="n">extends</span> <span class="n">DirectArrayTemplate</span><span class="p">&lt;</span><span class="n">StringMap</span><span class="p">&gt;</span> <span class="p">...</span>
<span class="p">```</span>
</code></pre></div></div>

<p><br /> |<br />
| enum, fixed, record types <br /> (named schema types) | Package name
is the package of the named schema type if it is specified, otherwise
package name will use the namespace of the named schema type by default.
<br /><br />
Class name is the name of the named schema type. <br /><br />
<br /><br />
<strong>Example Schema</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{ "type" : "record", "name" : "a.b.c.d.Foo", "fields" : ... }
{ "type" : "enum", "name" : "Bar", "namespace" : "x.y.z", "package": "x.y.z.test", symbols" : ... }
```
</code></pre></div></div>

<p><strong>Java package and class</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">```</span>
<span class="k">package</span> <span class="n">a</span><span class="p">.</span><span class="n">b</span><span class="p">.</span><span class="n">c</span><span class="p">.</span><span class="n">d</span><span class="p">;</span>
<span class="k">public</span> <span class="n">class</span> <span class="n">Foo</span> <span class="n">extends</span> <span class="n">RecordTemplate</span> <span class="p">...</span>

<span class="k">package</span> <span class="n">x</span><span class="p">.</span><span class="n">y</span><span class="p">.</span><span class="n">z</span><span class="p">.</span><span class="n">test</span><span class="p">;</span>
<span class="k">public</span> <span class="n">enum</span> <span class="n">class</span> <span class="n">Bar</span> <span class="p">...</span>
<span class="p">```</span>
</code></pre></div></div>

<p>|<br />
| maps and arrays of enum, fixed, record <br /><br />
(maps and arrays of named schema types) <br /> | Package name is the
package name of the named schema type, which follows the rule documented
in this table for named schema. <br /><br />
Class name is computed by appending “Map” or “Array” to name of
generated class for the named schema type. <br /><br />
For multi-dimensional maps and arrays, a “Map” or “Array” is appended
for each dimension starting with the inner most dimension first.
<br /><br />
<br /><br />
<strong>Example Schema</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{ "type" : "map", "values" : "a.b.c.d.Foo" }
{ "type" : "map", "values" : { "type" : "array", "items" : "a.b.c.d.Foo" } }

{ "type" : "array", "items" : "x.y.z.Bar" }
{ "type" : "array", "items" : { "type" : "map", "values" : "x.y.z.Bar" } }
```
</code></pre></div></div>

<p><strong>Java package and class</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">```</span>
<span class="k">package</span> <span class="n">a</span><span class="p">.</span><span class="n">b</span><span class="p">.</span><span class="n">c</span><span class="p">.</span><span class="n">d</span><span class="p">;</span>

<span class="k">public</span> <span class="n">class</span> <span class="n">FooMap</span> <span class="n">extends</span> <span class="n">WrappingMapTemplate</span><span class="p">&lt;</span><span class="n">Foo</span><span class="p">&gt;</span> <span class="p">...</span>
<span class="k">public</span> <span class="n">class</span> <span class="n">FooArrayMap</span> <span class="n">extends</span> <span class="n">WrappingMapTemplate</span><span class="p">&lt;</span><span class="n">Foo</span><span class="p">&gt;</span> <span class="p">...</span>

<span class="k">package</span> <span class="n">x</span><span class="p">.</span><span class="n">y</span><span class="p">.</span><span class="n">z</span><span class="p">.</span><span class="n">test</span><span class="p">;</span>
<span class="k">public</span> <span class="n">class</span> <span class="n">BarArray</span> <span class="n">extends</span> <span class="n">DirectArrayTemplate</span><span class="p">&lt;</span><span class="n">Bar</span><span class="p">&gt;</span> <span class="p">...</span>
<span class="k">public</span> <span class="n">class</span> <span class="n">BarMapArray</span> <span class="n">extends</span> <span class="n">DirectArrayTemplate</span><span class="p">&lt;</span><span class="n">Bar</span><span class="p">&gt;</span> <span class="p">...```</span>
</code></pre></div></div>

<p>|<br />
| unions <br /> | The name of the union class is determined in two ways.
<br /><br />
<br /><br />
<strong>1. Union without typeref</strong> <br /><br />
If there is no typeref for the union, the code generator makes up the
class name from the name of the closest enclosing field that declared
the union type. <br /><br />
Package name is the package name of the closest outer record type, which
follows the rule documented in this table for that closest outer record
type. <br /><br />
The generated union class will be declared in the generated class of the
closest outer record type. <br /><br />
Class name will be name of the field in the closest outer record that
declared the union with the first character capitalized. <br /><br />
<br /><br />
<strong>Example Schema</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{
  "type" : "record",
  "name" : "a.b.c.d.Foo",
  "fields" : [ { "name" : "bar", "type" : [ "int", "string" ] } ]
}
```
</code></pre></div></div>

<p><strong>Java package and class</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">```</span>
<span class="k">package</span> <span class="n">a</span><span class="p">.</span><span class="n">b</span><span class="p">.</span><span class="n">c</span><span class="p">.</span><span class="n">d</span><span class="p">;</span>
<span class="k">public</span> <span class="n">class</span> <span class="n">Foo</span> <span class="n">extends</span> <span class="n">RecordTemplate</span> <span class="p">{</span>
  <span class="k">public</span> <span class="n">class</span> <span class="n">Bar</span> <span class="n">extends</span> <span class="n">UnionTemplate</span> <span class="p">...</span>
<span class="p">}</span>
<span class="p">```</span>
</code></pre></div></div>

<p><strong>2. Union with typeref</strong> <br /><br />
If there is a typeref for the union, the code generator will use the
name of typeref for the generated union class. <br /><br />
Package name is the package of the typeref if it is specified, otherwise
package name is the namespace of the typeref by default. <br /><br />
Class name is the name of the typeref.<br />
<br /><br />
<strong>Example Schema</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{
  "type" : "typeref",
  "name" : "a.b.c.d.Bar",
  "package" : "a.b.c.d.test",
  "ref"  : [ "int", "string" ] 
}
```
</code></pre></div></div>

<p><strong>Java package and class</strong> <br /><br />
<br /></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">```</span>
<span class="k">package</span> <span class="n">a</span><span class="p">.</span><span class="n">b</span><span class="p">.</span><span class="n">c</span><span class="p">.</span><span class="n">d</span><span class="p">.</span><span class="n">test</span><span class="p">;</span>
<span class="k">public</span> <span class="n">class</span> <span class="n">Bar</span> <span class="n">extends</span> <span class="n">UnionTemplate</span> <span class="n">implements</span> <span class="n">HasTyperefInfo</span> <span class="p">{</span>
  <span class="p">...</span>
  <span class="k">public</span> <span class="n">TyperefInfo</span> <span class="n">typerefInfo</span><span class="p">()</span> 
  <span class="p">{</span>
    <span class="p">...</span> 
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">```</span>
</code></pre></div></div>

<p>When the typeref provides the name of the generated union class. The
generated class will also implement the <code class="highlighter-rouge">HasTyperefInfo</code> interface. This
interface declares the <code class="highlighter-rouge">typerefInfo()</code> method that will be implemented
by the generated class.</p>

<p>To avoid generating duplicate classes for the duplicate declarations of
unions, it is a good practice to declare unions with a typeref when the
same union type is used more than once.<br /> |<br />
| maps and arrays of unions <br /> | Package name is the package name of
the union, which follows the rule documented in this table for unions.
<br /><br />
The generated class will be declared in the same outer class (for unions
without typeref) or same package (for unions with typeref) as the
generated class for the union. <br /><br />
Class name is computed by appending “Map” or “Array” to the name of the
generated class for the union. <br /><br />
For multi-dimensional maps and arrays, a “Map” or “Array” is appended
for each dimension starting the inner most dimension first. <br /><br />
<br /><br />
<strong>1. Union without typeref</strong> <br /><br />
<br /><br />
<strong>Example Schema</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{
  "type" : "record",
  "name" : "a.b.c.d.Foo",
  "fields" : [
    { "name" : "members", "type" : { "type" : "array", "items" : [ "int", "string" ] } }
    { "name" : "locations", "type" : { "type" : "map", "values" : [ "int", "string" ]  } }
  ]
}
```
</code></pre></div></div>

<p><strong>Java package and class</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">```</span>
<span class="k">package</span> <span class="n">a</span><span class="p">.</span><span class="n">b</span><span class="p">.</span><span class="n">c</span><span class="p">.</span><span class="n">d</span><span class="p">;</span>
<span class="k">public</span> <span class="n">class</span> <span class="n">Foo</span> <span class="n">extends</span> <span class="n">RecordTemplate</span> <span class="p">{</span>
  <span class="k">public</span> <span class="n">class</span> <span class="n">Members</span> <span class="n">extends</span> <span class="n">UnionTemplate</span> <span class="p">...</span>
  <span class="k">public</span> <span class="n">class</span> <span class="n">MembersArray</span> <span class="n">extends</span> <span class="n">WrappingArrayTemplate</span><span class="p">&lt;</span><span class="n">Members</span><span class="p">&gt;</span> <span class="p">...</span>
  <span class="k">public</span> <span class="n">class</span> <span class="n">Locations</span> <span class="n">extends</span> <span class="n">UnionTemplate</span> <span class="p">...</span>
  <span class="k">public</span> <span class="n">class</span> <span class="n">LocationsMap</span> <span class="n">extends</span> <span class="n">WrappingMapTemplate</span><span class="p">&lt;</span><span class="n">Locations</span><span class="p">&gt;</span> <span class="p">...</span>

  <span class="k">public</span> <span class="n">MembersArray</span> <span class="n">getMembers</span><span class="p">()</span> <span class="p">...</span>
  <span class="k">public</span> <span class="n">LocationsMap</span> <span class="n">getLocations</span><span class="p">()</span> <span class="p">...</span>
<span class="p">}</span>
<span class="p">```</span>
</code></pre></div></div>

<p><strong>2. Union with typeref</strong><br />
<strong>Example Schema</strong> <br /></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
{
  "type" : "typeref",
  "name" : "a.b.c.d.Bar",
  "package": "a.b.c.d.test",
  "ref"  : [ "int", "string" ] 
}

{
  "type" : "record",
  "name" : "a.b.c.d.Foo",
  "package" : "a.b.c.d.test",
  "fields" : [
    { "name" : "members", "type" : { "type" : "array", "items" : "Bar" } }
    { "name" : "locations", "type" : { "type" : "map", "values" : "Bar" } }
  ]
}
```
</code></pre></div></div>

<p><strong>Java package and class</strong> <br /><br />
<br /></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">```</span>
<span class="k">package</span> <span class="n">a</span><span class="p">.</span><span class="n">b</span><span class="p">.</span><span class="n">c</span><span class="p">.</span><span class="n">d</span><span class="p">.</span><span class="n">test</span><span class="p">;</span>

<span class="k">public</span> <span class="n">class</span> <span class="n">Bar</span> <span class="n">extends</span> <span class="n">UnionTemplate</span> <span class="p">...</span>
<span class="k">public</span> <span class="n">class</span> <span class="n">BarArray</span> <span class="n">extends</span> <span class="n">WrappingArrayTemplate</span><span class="p">&lt;</span><span class="n">Bar</span><span class="p">&gt;</span> <span class="p">...</span>
<span class="k">public</span> <span class="n">class</span> <span class="n">BarMap</span> <span class="n">extends</span> <span class="n">WrappingMapTemplate</span><span class="p">&lt;</span><span class="n">Bar</span><span class="p">&gt;</span> <span class="p">...</span>

<span class="k">public</span> <span class="n">class</span> <span class="n">Foo</span> <span class="n">extends</span> <span class="n">RecordTemplate</span>
<span class="p">{</span>
  <span class="k">public</span> <span class="n">BarArray</span> <span class="n">getMembers</span><span class="p">()</span> <span class="p">...</span>
  <span class="k">public</span> <span class="n">BarMap</span> <span class="n">getLocations</span><span class="p">()</span> <span class="p">...</span>
<span class="p">}</span>
<span class="p">```</span>
</code></pre></div></div>

<table>
  <tbody>
    <tr>
      <td><br /></td>
    </tr>
  </tbody>
</table>

<h2 id="primitive-types">Primitive Types</h2>

<p>The Java binding for primitive schema types are as follows:</p>

<table>
  <thead>
    <tr>
      <th>Schema Type <br /></th>
      <th>Java Type <br /></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>int <br /></td>
      <td><code class="highlighter-rouge">java.lang.Integer</code> or <code class="highlighter-rouge">int</code> (1) <br /></td>
    </tr>
    <tr>
      <td>long <br /></td>
      <td><code class="highlighter-rouge">java.lang.Long</code> or <code class="highlighter-rouge">long</code> (1) <br /></td>
    </tr>
    <tr>
      <td>float <br /></td>
      <td><code class="highlighter-rouge">java.lang.Float</code> or <code class="highlighter-rouge">float</code> (1) <br /></td>
    </tr>
    <tr>
      <td>double <br /></td>
      <td><code class="highlighter-rouge">java.lang.Double</code> or <code class="highlighter-rouge">double</code> (1) <br /></td>
    </tr>
    <tr>
      <td>boolean <br /></td>
      <td><code class="highlighter-rouge">java.lang.Boolean</code> or <code class="highlighter-rouge">boolean</code> (1) <br /></td>
    </tr>
    <tr>
      <td>string <br /></td>
      <td><code class="highlighter-rouge">java.lang.String</code> <br /></td>
    </tr>
    <tr>
      <td>bytes <br /></td>
      <td><code class="highlighter-rouge">com.linkedin.data.ByteString</code> <br /></td>
    </tr>
  </tbody>
</table>

<p>(1) Depending on the method, un-boxed types will be preferred to boxed
types if applicable when input or output arguments can never be null.</p>

<p>In addition to the standard bindings, custom Java class bindings may be
defined for these types to specify a user-defined class as substitute
for the standard Java class bindings. For additional details, see
<a href="#CustomJavaClassBindingforPrimitiveTypes">Custom Java Class Binding for Primitive
Types</a>.</p>

<h2 id="enum-type">Enum Type</h2>

<p>The code generator generates a Java enum class. There will be a
corresponding symbol in the Java enum class for each symbol in the enum
schema. In addition, the code generator will add a <code class="highlighter-rouge">$UNKNOWN</code> symbol to
the generated enum class. <code class="highlighter-rouge">$UNKNOWN</code> will be returned if the value
stored in the Data layer cannot be mapped to a symbol present in the
Java enum class. For example, this may occur if an enum symbol has been
added to a new version of the enum schema and is transmitted to client
that has not been updated with the new enum schema.</p>

<p>Enums also supports a symbolDocs attribute to provide documentation for
each enum symbol. E.g.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
...
  "symbols" : [ "APPLE", "BANANA", ... ],
  "symbolDocs" : { "APPLE":"A red, yellow or green fruit.", "BANANA":"A yellow fruit.", ... } 
...
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
    <span class="p">```</span>
    <span class="k">package</span> <span class="n">com</span><span class="p">.</span><span class="n">linkedin</span><span class="p">.</span><span class="n">pegasus</span><span class="p">.</span><span class="n">generator</span><span class="p">.</span><span class="n">examples</span><span class="p">;</span>
    
    <span class="p">...</span>
    <span class="p">/**</span>
    <span class="p">*</span> <span class="n">A</span> <span class="n">fruit</span>
    <span class="p">*</span>
    <span class="p">*/</span>
    <span class="k">public</span> <span class="n">enum</span> <span class="n">Fruits</span> <span class="p">{</span>
    
        <span class="p">/**</span>
         <span class="p">*</span> <span class="n">A</span> <span class="n">red</span><span class="p">,</span> <span class="n">yellow</span> <span class="k">or</span> <span class="n">green</span> <span class="n">fruit</span><span class="p">.</span>
         <span class="p">*</span> 
         <span class="p">*/</span>
        <span class="n">APPLE</span><span class="p">,</span>
    
        <span class="p">/**</span>
         <span class="p">*</span> <span class="n">A</span> <span class="n">yellow</span> <span class="n">fruit</span><span class="p">.</span>
         <span class="p">*</span> 
         <span class="p">*/</span>
        <span class="n">BANANA</span><span class="p">,</span>
    
        <span class="p">/**</span>
         <span class="p">*</span> <span class="n">An</span> <span class="n">orange</span> <span class="n">fruit</span><span class="p">.</span>
         <span class="p">*</span> 
         <span class="p">*/</span>
        <span class="n">ORANGE</span><span class="p">,</span>
    
        <span class="p">/**</span>
         <span class="p">*</span> <span class="n">A</span> <span class="n">yellow</span> <span class="n">fruit</span><span class="p">.</span>
         <span class="p">*</span> 
         <span class="p">*/</span>
        <span class="n">PINEAPPLE</span><span class="p">,</span>
        <span class="p">$</span><span class="n">UNKNOWN</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">```</span>

<span class="p">**</span><span class="n">Note</span><span class="p">:**</span> <span class="n">Due</span> <span class="k">to</span> <span class="n">the</span> <span class="n">addition</span> <span class="k">of</span> <span class="n">doclint</span> <span class="k">in</span> <span class="n">JDK8</span><span class="p">,</span> <span class="n">anything</span> <span class="n">under</span> <span class="n">the</span>
<span class="p">`</span><span class="n">symbolDocs</span><span class="p">`</span> <span class="n">attribute</span> <span class="n">must</span> <span class="n">be</span> <span class="n">W3C</span> <span class="n">HTML</span> <span class="m">4.01</span> <span class="n">compliant</span><span class="p">.</span> <span class="n">This</span> <span class="n">is</span> <span class="n">because</span>
<span class="n">the</span> <span class="n">contents</span> <span class="k">of</span> <span class="n">this</span> <span class="k">string</span> <span class="n">will</span> <span class="n">appear</span> <span class="k">as</span> <span class="n">Javadocs</span> <span class="k">in</span> <span class="n">the</span> <span class="n">generated</span>
<span class="n">Java</span> <span class="err">‘</span><span class="n">data</span> <span class="n">template</span><span class="err">’</span> <span class="n">classes</span> <span class="n">later</span><span class="p">.</span> <span class="n">Please</span> <span class="n">take</span> <span class="n">this</span> <span class="n">into</span> <span class="n">consideration</span>
<span class="n">when</span> <span class="n">writing</span> <span class="n">your</span> <span class="n">documentation</span><span class="p">.</span>

<span class="p">##</span> <span class="n">Fixed</span> <span class="n">Type</span>

<span class="n">The</span> <span class="n">code</span> <span class="n">generator</span> <span class="n">generates</span> <span class="n">a</span> <span class="n">class</span> <span class="n">that</span> <span class="n">extends</span>
<span class="p">`</span><span class="n">com</span><span class="p">.</span><span class="n">linkedin</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">template</span><span class="p">.</span><span class="n">FixedTemplate</span><span class="p">`.</span> <span class="n">This</span> <span class="n">class</span> <span class="n">provides</span> <span class="n">the</span>
<span class="n">following</span>
<span class="n">methods</span><span class="p">:</span>

<span class="p">|</span> <span class="n">Method</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                     <span class="p">|</span> <span class="n">Implemented</span> <span class="n">by</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>  <span class="p">|</span> <span class="n">Description</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                   <span class="p">|</span>
<span class="p">|</span> <span class="p">---------------------------------</span> <span class="p">|</span> <span class="p">----------------------</span> <span class="p">|</span> <span class="p">------------------------------------------------------------------------------------------------------------------------------------</span> <span class="p">|</span>
<span class="p">|</span> <span class="p">*</span><span class="n">Constructor</span><span class="p">*(</span><span class="k">String</span> <span class="n">arg</span><span class="p">)</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>  <span class="p">|</span> <span class="n">Generated</span> <span class="n">class</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span> <span class="p">|</span> <span class="n">Construct</span> <span class="k">with</span> <span class="n">an</span> <span class="n">instance</span> <span class="n">whose</span> <span class="n">value</span> <span class="n">is</span> <span class="n">provided</span> <span class="n">by</span> <span class="n">the</span> <span class="n">input</span> <span class="k">string</span> <span class="n">representing</span> <span class="n">the</span> <span class="n">bytes</span> <span class="k">in</span> <span class="n">the</span> <span class="n">fixed</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                   <span class="p">|</span>
<span class="p">|</span> <span class="p">*</span><span class="n">Constructor</span><span class="p">*(</span><span class="n">Object</span> <span class="n">obj</span><span class="p">)</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>  <span class="p">|</span> <span class="n">Generated</span> <span class="n">class</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span> <span class="p">|</span> <span class="n">Construct</span> <span class="k">with</span> <span class="n">an</span> <span class="n">instance</span> <span class="n">whose</span> <span class="n">value</span> <span class="n">is</span> <span class="n">provided</span> <span class="n">by</span> <span class="n">the</span> <span class="n">input</span> <span class="k">string</span> <span class="n">representing</span> <span class="n">the</span> <span class="n">bytes</span> <span class="k">in</span> <span class="n">the</span> <span class="n">fixed</span> <span class="k">or</span> <span class="n">a</span> <span class="p">`</span><span class="n">ByteString</span><span class="p">`.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span> <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="n">ByteString</span> <span class="n">bytes</span><span class="p">()`</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>       <span class="p">|</span> <span class="n">Base</span> <span class="n">class</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>      <span class="p">|</span> <span class="n">Returns</span> <span class="n">the</span> <span class="n">bytes</span> <span class="k">of</span> <span class="n">the</span> <span class="n">fixed</span> <span class="n">type</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                          <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="n">FixedDataSchema</span> <span class="n">schema</span><span class="p">()`</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span> <span class="p">|</span> <span class="n">Generated</span> <span class="n">class</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span> <span class="p">|</span> <span class="n">Returns</span> <span class="n">the</span> <span class="p">`</span><span class="n">DataSchema</span><span class="p">`</span> <span class="k">of</span> <span class="n">the</span> <span class="n">instance</span><span class="p">.</span> <span class="n">The</span> <span class="n">size</span> <span class="k">of</span> <span class="n">the</span> <span class="n">fixed</span> <span class="n">type</span> <span class="n">can</span> <span class="n">be</span> <span class="n">obtained</span> <span class="k">from</span> <span class="n">this</span> <span class="n">schema</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                        <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="n">Object</span> <span class="n">data</span><span class="p">()`</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>            <span class="p">|</span> <span class="n">Base</span> <span class="n">class</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>      <span class="p">|</span> <span class="n">Returns</span> <span class="n">the</span> <span class="n">underlying</span> <span class="n">data</span> <span class="k">of</span> <span class="n">the</span> <span class="n">instance</span><span class="p">.</span> <span class="n">This</span> <span class="n">is</span> <span class="n">the</span> <span class="n">same</span> <span class="k">as</span> <span class="n">bytes</span><span class="p">().</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                     <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="k">String</span> <span class="n">toString</span><span class="p">()`</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>        <span class="p">|</span> <span class="n">Base</span> <span class="n">class</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>      <span class="p">|</span> <span class="n">Returns</span> <span class="n">the</span> <span class="k">string</span> <span class="n">representation</span> <span class="k">of</span> <span class="n">the</span> <span class="n">bytes</span> <span class="k">in</span> <span class="n">the</span> <span class="n">instance</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                               <span class="p">|</span>

<span class="n">A</span> <span class="n">fixed</span> <span class="n">instance</span> <span class="n">is</span> <span class="n">immutable</span> <span class="n">once</span> <span class="n">constructed</span><span class="p">.</span>

<span class="p">##</span> <span class="k">Array</span> <span class="n">Type</span>

<span class="n">The</span> <span class="n">code</span> <span class="n">generator</span> <span class="n">generates</span> <span class="n">a</span> <span class="n">class</span> <span class="n">that</span> <span class="n">extends</span>
<span class="p">`</span><span class="n">com</span><span class="p">.</span><span class="n">linkedin</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">template</span><span class="p">.</span><span class="n">DirectArrayTemplate</span><span class="p">&lt;</span><span class="n">E</span><span class="p">&gt;`</span> <span class="k">or</span>
<span class="p">`</span><span class="n">com</span><span class="p">.</span><span class="n">linkedin</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">template</span><span class="p">.</span><span class="n">WrappingArrayTemplate</span><span class="p">&lt;</span><span class="n">E</span> <span class="n">extends</span>
<span class="n">DataTemplate</span><span class="p">&lt;?&gt;&gt;`.</span> <span class="n">The</span> <span class="n">latter</span> <span class="n">is</span> <span class="n">used</span> <span class="n">for</span> <span class="n">item</span> <span class="n">types</span> <span class="n">whose</span> <span class="n">Java</span> <span class="n">binding</span>
<span class="n">require</span> <span class="n">wrapping</span><span class="p">.</span> <span class="n">The</span> <span class="n">former</span> <span class="n">is</span> <span class="n">used</span> <span class="n">for</span> <span class="n">items</span> <span class="n">types</span> <span class="n">whose</span> <span class="n">Java</span> <span class="n">binding</span>
<span class="n">that</span> <span class="k">do</span> <span class="k">not</span> <span class="n">require</span> <span class="n">wrapping</span><span class="p">.</span> <span class="n">The</span> <span class="p">`</span><span class="n">E</span><span class="p">`</span> <span class="n">generic</span> <span class="n">type</span> <span class="n">variable</span> <span class="n">is</span> <span class="n">the</span> <span class="n">Java</span>
<span class="n">class</span> <span class="k">of</span> <span class="n">the</span> <span class="k">array</span><span class="err">’</span><span class="n">s</span> <span class="n">item</span> <span class="n">type</span><span class="p">.</span> <span class="n">By</span> <span class="n">creating</span> <span class="n">a</span> <span class="n">concrete</span> <span class="n">subclass</span> <span class="n">per</span> <span class="n">map</span>
<span class="n">type</span><span class="p">,</span> <span class="n">this</span> <span class="n">binding</span> <span class="n">avoids</span> <span class="n">lost</span> <span class="k">of</span> <span class="n">item</span> <span class="n">type</span> <span class="n">information</span> <span class="n">due</span> <span class="k">to</span> <span class="n">Java</span>
<span class="n">generics</span> <span class="n">type</span> <span class="n">erasure</span><span class="p">.</span>

<span class="n">The</span> <span class="n">primary</span> <span class="n">characteristics</span> <span class="k">of</span> <span class="n">both</span> <span class="n">base</span> <span class="n">classes</span> <span class="n">are</span> <span class="k">as</span> <span class="n">follows</span><span class="p">:</span>

  <span class="p">-</span> <span class="n">They</span> <span class="n">implement</span> <span class="p">`</span><span class="n">java</span><span class="p">.</span><span class="n">util</span><span class="p">.</span><span class="k">List</span><span class="p">&lt;</span><span class="n">E</span><span class="p">&gt;`.</span>
  <span class="p">-</span> <span class="n">Their</span> <span class="n">methods</span> <span class="n">perform</span> <span class="n">runtime</span> <span class="n">checks</span> <span class="n">on</span> <span class="n">updates</span> <span class="k">and</span> <span class="n">inserts</span> <span class="k">to</span>
    <span class="n">ensure</span> <span class="n">that</span> <span class="n">the</span> <span class="n">value</span> <span class="n">types</span> <span class="k">of</span> <span class="n">arguments</span> <span class="n">are</span> <span class="n">either</span> <span class="n">the</span> <span class="n">exact</span> <span class="n">type</span>
    <span class="n">specified</span> <span class="n">by</span> <span class="n">the</span> <span class="n">type</span> <span class="n">variable</span> <span class="k">or</span> <span class="n">types</span> <span class="n">that</span> <span class="n">can</span> <span class="n">be</span> <span class="n">coerced</span> <span class="k">to</span> <span class="n">the</span>
    <span class="n">specified</span> <span class="n">type</span><span class="p">.</span>

<span class="n">The</span> <span class="n">methods</span> <span class="k">with</span> <span class="n">more</span> <span class="n">specific</span> <span class="n">behavior</span> <span class="n">are</span> <span class="n">described</span>
<span class="n">below</span><span class="p">.</span>

<span class="p">|</span> <span class="n">Method</span>                                 <span class="p">|</span> <span class="n">Implemented</span> <span class="n">by</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>  <span class="p">|</span> <span class="n">Description</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                                                                                                                <span class="p">|</span>
<span class="p">|</span> <span class="p">--------------------------------------</span> <span class="p">|</span> <span class="p">----------------------</span> <span class="p">|</span> <span class="p">-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span> <span class="p">|</span>
<span class="p">|</span> <span class="p">*</span><span class="n">Constructor</span><span class="p">*()</span>                        <span class="p">|</span> <span class="n">Generated</span> <span class="n">class</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span> <span class="p">|</span> <span class="n">Constructs</span> <span class="n">an</span> <span class="n">empty</span> <span class="k">array</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                                                                                                 <span class="p">|</span>
<span class="p">|</span> <span class="p">*</span><span class="n">Constructor</span><span class="p">*(</span><span class="n">int</span> <span class="n">initialCapacity</span><span class="p">)</span>     <span class="p">|</span> <span class="n">Generated</span> <span class="n">class</span>        <span class="p">|</span> <span class="n">Constructs</span> <span class="n">an</span> <span class="n">empty</span> <span class="k">array</span> <span class="k">with</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">initial</span> <span class="n">capacity</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                                                             <span class="p">|</span>
<span class="p">|</span> <span class="p">*</span><span class="n">Constructor</span><span class="p">*(</span><span class="n">Collection</span><span class="p">&lt;</span><span class="n">E</span><span class="p">&gt;</span> <span class="n">c</span><span class="p">)</span>         <span class="p">|</span> <span class="n">Generated</span> <span class="n">class</span>        <span class="p">|</span> <span class="n">Constructs</span> <span class="n">an</span> <span class="k">array</span> <span class="n">by</span> <span class="n">inserting</span> <span class="n">each</span> <span class="n">element</span> <span class="k">of</span> <span class="n">the</span> <span class="n">provided</span> <span class="n">collection</span> <span class="n">into</span> <span class="n">the</span> <span class="n">constructed</span> <span class="k">array</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                       <span class="p">|</span>
<span class="p">|</span> <span class="p">*</span><span class="n">Constructor</span><span class="p">*(</span><span class="n">DataList</span> <span class="k">list</span><span class="p">)</span>           <span class="p">|</span> <span class="n">Generated</span> <span class="n">class</span>        <span class="p">|</span> <span class="n">Constructs</span> <span class="n">an</span> <span class="k">array</span> <span class="n">that</span> <span class="n">wraps</span> <span class="n">the</span> <span class="n">provided</span> <span class="p">`</span><span class="n">DataList</span><span class="p">`.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                                                                    <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="n">ArrayDataSchema</span> <span class="n">schema</span><span class="p">()`</span>             <span class="p">|</span> <span class="n">Generated</span> <span class="n">class</span>        <span class="p">|</span> <span class="n">Returns</span> <span class="n">the</span> <span class="p">`</span><span class="n">DataSchema</span><span class="p">`</span> <span class="k">of</span> <span class="n">the</span> <span class="n">instance</span><span class="p">.</span> <span class="n">The</span> <span class="n">schema</span> <span class="k">of</span> <span class="n">the</span> <span class="n">items</span> <span class="k">in</span> <span class="n">the</span> <span class="k">array</span> <span class="n">can</span> <span class="n">be</span> <span class="n">obtained</span> <span class="k">from</span> <span class="n">this</span> <span class="n">schema</span><span class="p">.</span>                                                                                                                                  <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="n">int</span> <span class="n">hashCode</span><span class="p">()`</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                <span class="p">|</span> <span class="n">Base</span> <span class="n">class</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>      <span class="p">|</span> <span class="n">Returns</span> <span class="n">the</span> <span class="p">`</span><span class="n">hashCode</span><span class="p">()`</span> <span class="k">of</span> <span class="n">the</span> <span class="n">underlying</span> <span class="p">`</span><span class="n">DataList</span><span class="p">`</span> <span class="n">wrapped</span> <span class="n">by</span> <span class="n">this</span> <span class="n">instance</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                                            <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="k">boolean</span> <span class="n">equals</span><span class="p">(</span><span class="n">Object</span> <span class="n">object</span><span class="p">)`</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span> <span class="p">|</span> <span class="n">Base</span> <span class="n">class</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>      <span class="p">|</span> <span class="k">If</span> <span class="n">object</span> <span class="n">is</span> <span class="n">an</span> <span class="n">instance</span> <span class="k">of</span> <span class="p">`</span><span class="n">AbstractArrayTemplate</span><span class="p">`,</span> <span class="n">invoke</span> <span class="n">equals</span> <span class="n">on</span> <span class="n">the</span> <span class="n">underlying</span> <span class="p">`</span><span class="n">DataList</span><span class="p">`</span> <span class="k">of</span> <span class="n">this</span> <span class="n">instance</span> <span class="k">and</span> <span class="n">the</span> <span class="n">object</span><span class="err">’</span><span class="n">s</span> <span class="n">underlying</span> <span class="p">`</span><span class="n">DataList</span><span class="p">`.</span> <span class="n">Otherwise</span><span class="p">,</span> <span class="n">invoke</span> <span class="p">`</span><span class="n">super</span><span class="p">.</span><span class="n">equals</span><span class="p">(</span><span class="n">object</span><span class="p">)`</span> <span class="n">which</span> <span class="n">is</span> <span class="p">`</span><span class="n">AbstractMap</span><span class="p">`</span> <span class="err">’</span><span class="n">s</span> <span class="n">equals</span> <span class="n">method</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span> <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="k">String</span> <span class="n">toString</span><span class="p">()`</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>             <span class="p">|</span> <span class="n">Base</span> <span class="n">class</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>      <span class="p">|</span> <span class="n">Returns</span> <span class="n">the</span> <span class="n">result</span> <span class="k">of</span> <span class="n">calling</span> <span class="p">`</span><span class="n">toString</span><span class="p">()`</span> <span class="n">on</span> <span class="n">the</span> <span class="n">underlying</span> <span class="p">`</span><span class="n">DataList</span><span class="p">`</span> <span class="n">wrapped</span> <span class="n">by</span> <span class="n">this</span> <span class="n">instance</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                          <span class="p">|</span>
<span class="p">|</span> <span class="p">*</span><span class="n">java</span><span class="p">.</span><span class="n">util</span><span class="p">.</span><span class="k">List</span> <span class="n">methods</span><span class="p">*</span>               <span class="p">|</span> <span class="n">Base</span> <span class="n">class</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>      <span class="p">|</span> <span class="n">See</span> <span class="p">`</span><span class="n">java</span><span class="p">.</span><span class="n">util</span><span class="p">.</span><span class="k">List</span><span class="p">`.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                                                                                                      <span class="p">|</span>

<span class="p">##</span> <span class="n">Map</span> <span class="n">Type</span>

<span class="n">The</span> <span class="n">code</span> <span class="n">generator</span> <span class="n">generates</span> <span class="n">a</span> <span class="n">class</span> <span class="n">that</span> <span class="n">extends</span>
<span class="p">`</span><span class="n">com</span><span class="p">.</span><span class="n">linkedin</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">template</span><span class="p">.</span><span class="n">DirectMapTemplate</span><span class="p">&lt;</span><span class="n">E</span><span class="p">&gt;`</span> <span class="k">or</span>
<span class="p">`</span><span class="n">com</span><span class="p">.</span><span class="n">linkedin</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">template</span><span class="p">.</span><span class="n">WrappingMapTemplate</span><span class="p">&lt;</span><span class="n">E</span> <span class="n">extends</span>
<span class="n">DataTemplate</span><span class="p">&lt;?&gt;&gt;`.</span> <span class="n">The</span> <span class="n">latter</span> <span class="n">is</span> <span class="n">used</span> <span class="n">for</span> <span class="n">item</span> <span class="n">types</span> <span class="n">whose</span> <span class="n">Java</span> <span class="n">binding</span>
<span class="n">require</span> <span class="n">wrapping</span><span class="p">.</span> <span class="n">The</span> <span class="n">former</span> <span class="n">is</span> <span class="n">used</span> <span class="n">for</span> <span class="n">items</span> <span class="n">types</span> <span class="n">whose</span> <span class="n">Java</span> <span class="n">binding</span>
<span class="n">that</span> <span class="k">do</span> <span class="k">not</span> <span class="n">require</span> <span class="n">wrapping</span><span class="p">.</span> <span class="n">The</span> <span class="p">`</span><span class="n">E</span><span class="p">`</span> <span class="n">generic</span> <span class="n">type</span> <span class="n">variable</span> <span class="n">is</span> <span class="n">the</span> <span class="n">Java</span>
<span class="n">class</span> <span class="k">of</span> <span class="n">the</span> <span class="n">map</span><span class="err">’</span><span class="n">s</span> <span class="n">value</span> <span class="n">type</span><span class="p">.</span> <span class="n">By</span> <span class="n">creating</span> <span class="n">a</span> <span class="n">concrete</span> <span class="n">subclass</span> <span class="n">per</span> <span class="n">map</span>
<span class="n">type</span><span class="p">,</span> <span class="n">this</span> <span class="n">binding</span> <span class="n">avoids</span> <span class="n">lost</span> <span class="k">of</span> <span class="n">value</span> <span class="n">type</span> <span class="n">information</span> <span class="n">due</span> <span class="k">to</span> <span class="n">Java</span>
<span class="n">generics</span> <span class="n">type</span> <span class="n">erasure</span><span class="p">.</span>

<span class="n">The</span> <span class="n">primary</span> <span class="n">characteristics</span> <span class="k">of</span> <span class="n">both</span> <span class="n">base</span> <span class="n">classes</span> <span class="n">are</span> <span class="k">as</span> <span class="n">follows</span><span class="p">:</span>

  <span class="p">-</span> <span class="n">They</span> <span class="n">implement</span> <span class="p">`</span><span class="n">java</span><span class="p">.</span><span class="n">util</span><span class="p">.</span><span class="n">Map</span><span class="p">&lt;</span><span class="k">String</span><span class="p">,</span> <span class="n">E</span><span class="p">&gt;`.</span>
  <span class="p">-</span> <span class="n">Their</span> <span class="n">methods</span> <span class="n">perform</span> <span class="n">runtime</span> <span class="n">checks</span> <span class="n">on</span> <span class="n">updates</span> <span class="k">and</span> <span class="n">inserts</span> <span class="k">to</span>
    <span class="n">ensure</span> <span class="n">that</span> <span class="n">the</span> <span class="n">value</span> <span class="n">types</span> <span class="k">of</span> <span class="n">arguments</span> <span class="n">are</span> <span class="n">either</span> <span class="n">the</span> <span class="n">exact</span> <span class="n">type</span>
    <span class="n">specified</span> <span class="n">by</span> <span class="n">the</span> <span class="n">type</span> <span class="n">variable</span> <span class="k">or</span> <span class="n">are</span> <span class="n">types</span> <span class="n">that</span> <span class="n">can</span> <span class="n">be</span> <span class="n">coerced</span> <span class="k">to</span>
    <span class="n">the</span> <span class="n">specified</span> <span class="n">type</span><span class="p">.</span>

<span class="n">The</span> <span class="n">methods</span> <span class="k">with</span> <span class="n">somewhat</span> <span class="n">specialized</span> <span class="n">behavior</span> <span class="n">are</span> <span class="n">described</span>
<span class="n">below</span><span class="p">.</span>

<span class="p">|</span> <span class="n">Method</span>                                               <span class="p">|</span> <span class="n">Implemented</span> <span class="n">by</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>  <span class="p">|</span> <span class="n">Description</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                                                                                                          <span class="p">|</span>
<span class="p">|</span> <span class="p">----------------------------------------------------</span> <span class="p">|</span> <span class="p">----------------------</span> <span class="p">|</span> <span class="p">-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span> <span class="p">|</span>
<span class="p">|</span> <span class="p">*</span><span class="n">Constructor</span><span class="p">*()</span>                                      <span class="p">|</span> <span class="n">Generated</span> <span class="n">class</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span> <span class="p">|</span> <span class="n">Constructs</span> <span class="n">an</span> <span class="n">empty</span> <span class="n">map</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                                                                                             <span class="p">|</span>
<span class="p">|</span> <span class="p">*</span><span class="n">Constructor</span><span class="p">*(</span><span class="n">int</span> <span class="n">initialCapacity</span><span class="p">)</span>                   <span class="p">|</span> <span class="n">Generated</span> <span class="n">class</span>        <span class="p">|</span> <span class="n">Constructs</span> <span class="n">an</span> <span class="n">empty</span> <span class="n">map</span> <span class="k">with</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">initial</span> <span class="n">capacity</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                                                         <span class="p">|</span>
<span class="p">|</span> <span class="p">*</span><span class="n">Constructor</span><span class="p">*(</span><span class="n">int</span> <span class="n">initialCapacity</span><span class="p">,</span> <span class="n">float</span> <span class="n">loadFactor</span><span class="p">)</span> <span class="p">|</span> <span class="n">Generated</span> <span class="n">class</span>        <span class="p">|</span> <span class="n">Constructs</span> <span class="n">an</span> <span class="n">empty</span> <span class="n">map</span> <span class="k">with</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">initial</span> <span class="n">capacity</span> <span class="k">and</span> <span class="nf">load</span> <span class="n">factor</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                                         <span class="p">|</span>
<span class="p">|</span> <span class="p">*</span><span class="n">Constructor</span><span class="p">*(</span><span class="n">Map</span><span class="p">\&lt;</span><span class="k">String</span><span class="p">,</span> <span class="n">E</span><span class="p">\&gt;</span> <span class="n">c</span><span class="p">)</span>                    <span class="p">|</span> <span class="n">Generated</span> <span class="n">class</span>        <span class="p">|</span> <span class="n">Constructs</span> <span class="n">a</span> <span class="n">map</span> <span class="n">by</span> <span class="n">inserting</span> <span class="n">each</span> <span class="n">entry</span> <span class="k">of</span> <span class="n">the</span> <span class="n">provided</span> <span class="n">map</span> <span class="n">into</span> <span class="n">new</span> <span class="n">instance</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                                      <span class="p">|</span>
<span class="p">|</span> <span class="p">*</span><span class="n">Constructor</span><span class="p">*(</span><span class="n">DataMap</span> <span class="n">map</span><span class="p">)</span>                           <span class="p">|</span> <span class="n">Generated</span> <span class="n">class</span>        <span class="p">|</span> <span class="n">Constructs</span> <span class="n">an</span> <span class="k">array</span> <span class="n">that</span> <span class="n">wraps</span> <span class="n">the</span> <span class="n">provided</span> <span class="p">`</span><span class="n">DataMap</span><span class="p">`.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                                                               <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="n">MapDataSchema</span> <span class="n">schema</span><span class="p">()`</span>                             <span class="p">|</span> <span class="n">Generated</span> <span class="n">class</span>        <span class="p">|</span> <span class="n">Returns</span> <span class="n">the</span> <span class="p">`</span><span class="n">DataSchema</span><span class="p">`</span> <span class="k">of</span> <span class="n">the</span> <span class="n">instance</span><span class="p">.</span> <span class="n">The</span> <span class="n">schema</span> <span class="k">of</span> <span class="n">the</span> <span class="n">values</span> <span class="k">in</span> <span class="n">the</span> <span class="n">map</span> <span class="n">can</span> <span class="n">be</span> <span class="n">obtained</span> <span class="k">from</span> <span class="n">this</span> <span class="n">schema</span><span class="p">.</span>                                                                                                                             <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="n">int</span> <span class="n">hashCode</span><span class="p">()`</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                              <span class="p">|</span> <span class="n">Base</span> <span class="n">class</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>      <span class="p">|</span> <span class="n">Returns</span> <span class="n">the</span> <span class="p">`</span><span class="n">hashCode</span><span class="p">()`</span> <span class="k">of</span> <span class="n">the</span> <span class="n">underlying</span> <span class="p">`</span><span class="n">DataMap</span><span class="p">`</span> <span class="n">wrapped</span> <span class="n">by</span> <span class="n">this</span> <span class="n">instance</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                                       <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="k">boolean</span> <span class="n">equals</span><span class="p">(</span><span class="n">Object</span> <span class="n">object</span><span class="p">)`</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>               <span class="p">|</span> <span class="n">Base</span> <span class="n">class</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>      <span class="p">|</span> <span class="k">If</span> <span class="n">object</span> <span class="n">is</span> <span class="n">an</span> <span class="n">instance</span> <span class="k">of</span> <span class="p">`</span><span class="n">AbstractMapTemplate</span><span class="p">`,</span> <span class="n">invoke</span> <span class="n">equals</span> <span class="n">on</span> <span class="n">the</span> <span class="n">underlying</span> <span class="p">`</span><span class="n">DataMap</span><span class="p">`</span> <span class="k">of</span> <span class="n">this</span> <span class="n">instance</span> <span class="k">and</span> <span class="n">the</span> <span class="n">object</span><span class="err">’</span><span class="n">s</span> <span class="n">underlying</span> <span class="p">`</span><span class="n">DataMap</span><span class="p">`.</span> <span class="n">Otherwise</span><span class="p">,</span> <span class="n">invoke</span> <span class="n">super</span><span class="p">.</span><span class="n">equals</span><span class="p">(</span><span class="n">object</span><span class="p">)</span> <span class="n">which</span> <span class="n">is</span> <span class="p">`</span><span class="n">AbstractMap</span><span class="p">`</span> <span class="err">’</span><span class="n">s</span> <span class="n">equals</span> <span class="n">method</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span> <span class="p">|</span>
<span class="p">|</span> <span class="k">String</span> <span class="n">toString</span><span class="p">()</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                             <span class="p">|</span> <span class="n">Base</span> <span class="n">class</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>      <span class="p">|</span> <span class="n">Returns</span> <span class="n">the</span> <span class="n">result</span> <span class="k">of</span> <span class="n">calling</span> <span class="p">`</span><span class="n">toString</span><span class="p">()`</span> <span class="n">on</span> <span class="n">the</span> <span class="n">underlying</span> <span class="p">`</span><span class="n">DataMap</span><span class="p">`</span> <span class="n">wrapped</span> <span class="n">by</span> <span class="n">this</span> <span class="n">instance</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                     <span class="p">|</span>
<span class="p">|</span> <span class="p">*</span><span class="n">java</span><span class="p">.</span><span class="n">util</span><span class="p">.</span><span class="n">Map</span> <span class="n">methods</span><span class="p">*</span>                              <span class="p">|</span> <span class="n">Base</span> <span class="n">class</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>      <span class="p">|</span> <span class="n">See</span> <span class="p">`</span><span class="n">java</span><span class="p">.</span><span class="n">util</span><span class="p">.</span><span class="n">Map</span><span class="p">`.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                                                                                                 <span class="p">|</span>

<span class="p">##</span> <span class="k">Record</span> <span class="n">Type</span>

<span class="n">The</span> <span class="n">code</span> <span class="n">generator</span> <span class="n">generates</span> <span class="n">a</span> <span class="n">class</span> <span class="n">that</span> <span class="n">extends</span>
<span class="p">`</span><span class="n">com</span><span class="p">.</span><span class="n">linkedin</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">template</span><span class="p">.</span><span class="n">RecordTemplate</span><span class="p">`.</span> <span class="n">This</span> <span class="n">class</span> <span class="n">provides</span> <span class="n">the</span>
<span class="n">following</span>
<span class="n">methods</span><span class="p">:</span>

<span class="p">|</span> <span class="n">Method</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                      <span class="p">|</span> <span class="n">Implemented</span> <span class="n">by</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>  <span class="p">|</span> <span class="n">Description</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                          <span class="p">|</span>
<span class="p">|</span> <span class="p">----------------------------------</span> <span class="p">|</span> <span class="p">----------------------</span> <span class="p">|</span> <span class="p">-----------------------------------------------------------------------------------------------------------------------------------------------------------</span> <span class="p">|</span>
<span class="p">|</span> <span class="p">*</span><span class="n">Constructor</span><span class="p">*()</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>             <span class="p">|</span> <span class="n">Generated</span> <span class="n">class</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span> <span class="p">|</span> <span class="n">Construct</span> <span class="n">instance</span> <span class="n">that</span> <span class="n">wraps</span> <span class="n">an</span> <span class="n">empty</span> <span class="p">`</span><span class="n">DataMap</span><span class="p">`.</span> <span class="n">Even</span> <span class="n">mandatory</span> <span class="n">fields</span> <span class="n">are</span> <span class="k">not</span> <span class="n">present</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                             <span class="p">|</span>
<span class="p">|</span> <span class="p">*</span><span class="n">Constructor</span><span class="p">*(</span><span class="n">DataMap</span> <span class="n">map</span><span class="p">)</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>  <span class="p">|</span> <span class="n">Generated</span> <span class="n">class</span>        <span class="p">|</span> <span class="n">Construct</span> <span class="n">instance</span> <span class="n">that</span> <span class="n">wraps</span> <span class="n">the</span> <span class="n">provided</span> <span class="p">`</span><span class="n">DataMap</span><span class="p">`.</span> <span class="n">Method</span> <span class="n">invocations</span> <span class="n">on</span> <span class="n">the</span> <span class="p">`</span><span class="n">RecordTemplate</span><span class="p">`</span> <span class="n">translates</span> <span class="k">to</span> <span class="n">accesses</span> <span class="k">to</span> <span class="n">the</span> <span class="n">underlying</span> <span class="p">`</span><span class="n">DataMap</span><span class="p">`.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span> <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="n">RecordDataSchema</span> <span class="n">schema</span><span class="p">()`</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span> <span class="p">|</span> <span class="n">Generated</span> <span class="n">class</span>        <span class="p">|</span> <span class="n">Returns</span> <span class="n">the</span> <span class="p">`</span><span class="n">DataSchema</span><span class="p">`</span> <span class="k">of</span> <span class="n">this</span> <span class="n">instance</span><span class="p">.</span> <span class="n">The</span> <span class="n">fields</span> <span class="k">of</span> <span class="n">the</span> <span class="k">record</span> <span class="n">can</span> <span class="n">be</span> <span class="n">obtained</span> <span class="k">from</span> <span class="n">this</span> <span class="n">schema</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="n">static</span> <span class="n">Fields</span> <span class="n">fields</span><span class="p">()`</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>    <span class="p">|</span> <span class="n">Generated</span> <span class="n">class</span>        <span class="p">|</span> <span class="n">Returns</span> <span class="n">a</span> <span class="n">generated</span> <span class="p">`</span><span class="n">Fields</span><span class="p">`</span> <span class="n">class</span> <span class="n">that</span> <span class="n">provides</span> <span class="n">identifiers</span> <span class="n">for</span> <span class="n">fields</span> <span class="k">of</span> <span class="n">this</span> <span class="k">record</span> <span class="k">and</span> <span class="n">certain</span> <span class="n">nested</span> <span class="n">types</span><span class="p">.</span> <span class="n">See</span> <span class="n">Fields</span> <span class="n">section</span> <span class="n">below</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>           <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="n">DataMap</span> <span class="n">data</span><span class="p">()`</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>            <span class="p">|</span> <span class="n">Base</span> <span class="n">class</span>             <span class="p">|</span> <span class="n">Returns</span> <span class="n">the</span> <span class="n">underlying</span> <span class="p">`</span><span class="n">DataMap</span><span class="p">`</span> <span class="n">wrapped</span> <span class="n">by</span> <span class="n">this</span> <span class="n">instance</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                           <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="k">String</span> <span class="n">toString</span><span class="p">()`</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>         <span class="p">|</span> <span class="n">Base</span> <span class="n">class</span>             <span class="p">|</span> <span class="n">Equivalent</span> <span class="k">to</span> <span class="p">`</span><span class="n">data</span><span class="p">().</span><span class="n">toString</span><span class="p">()`.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                   <span class="p">|</span>

<span class="n">The</span> <span class="n">code</span> <span class="n">generator</span> <span class="n">generates</span> <span class="n">the</span> <span class="n">following</span> <span class="n">methods</span> <span class="k">in</span> <span class="n">the</span> <span class="n">generated</span>
<span class="n">class</span> <span class="n">for</span> <span class="n">each</span> <span class="n">field</span><span class="p">.</span> <span class="p">*</span><span class="n">FieldName</span><span class="p">*</span> <span class="n">is</span> <span class="n">the</span> <span class="n">name</span> <span class="k">of</span> <span class="n">field</span> <span class="k">with</span> <span class="n">the</span> <span class="n">first</span>
<span class="n">character</span>
<span class="n">capitalized</span><span class="p">.</span>

<span class="p">|</span> <span class="n">Method</span>                                  <span class="p">|</span> <span class="n">Description</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                                                                                                                                                    <span class="p">|</span>
<span class="p">|</span> <span class="p">---------------------------------------</span> <span class="p">|</span> <span class="p">-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span> <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="k">boolean</span> <span class="n">hasFieldName</span><span class="p">()`</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>         <span class="p">|</span> <span class="n">Returns</span> <span class="n">whether</span> <span class="n">the</span> <span class="n">field</span> <span class="n">is</span> <span class="n">present</span> <span class="k">in</span> <span class="n">the</span> <span class="n">underlying</span> <span class="p">`</span><span class="n">DataMap</span><span class="p">`.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                                                                                              <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="n">void</span> <span class="n">removeFieldName</span><span class="p">()`</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>         <span class="p">|</span> <span class="n">Removes</span> <span class="n">the</span> <span class="n">field</span> <span class="k">from</span> <span class="n">the</span> <span class="n">underlying</span> <span class="p">`</span><span class="n">DataMap</span><span class="p">`.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                                                                                                               <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="n">T</span> <span class="n">getFieldName</span><span class="p">(</span><span class="n">GetMode</span> <span class="n">mode</span><span class="p">)`</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>   <span class="p">|</span> <span class="n">Returns</span> <span class="n">the</span> <span class="n">value</span> <span class="k">of</span> <span class="n">the</span> <span class="n">field</span><span class="p">.</span> <span class="n">The</span> <span class="n">mode</span> <span class="n">parameter</span> <span class="n">allows</span> <span class="n">the</span> <span class="n">client</span> <span class="k">to</span> <span class="n">specify</span> <span class="n">the</span> <span class="n">desired</span> <span class="n">behavior</span> <span class="k">if</span> <span class="n">the</span> <span class="n">field</span> <span class="n">is</span> <span class="k">not</span> <span class="n">present</span><span class="p">.</span> <span class="p">`</span><span class="n">T</span><span class="p">`</span> <span class="n">is</span> <span class="n">the</span> <span class="n">Java</span> <span class="n">type</span> <span class="k">of</span> <span class="n">the</span> <span class="n">field</span><span class="p">.</span>                                                                                                                  <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="n">T</span> <span class="n">getFieldName</span><span class="p">()`</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>               <span class="p">|</span> <span class="n">Returns</span> <span class="n">the</span> <span class="n">value</span> <span class="k">of</span> <span class="n">the</span> <span class="n">field</span><span class="p">.</span> <span class="n">This</span> <span class="n">is</span> <span class="n">equivalent</span> <span class="k">to</span> <span class="p">`</span><span class="n">getFieldName</span><span class="p">(</span><span class="n">GetMode</span><span class="p">.</span><span class="n">STRICT</span><span class="p">)`.</span> <span class="p">`</span><span class="n">T</span><span class="p">`</span> <span class="n">is</span> <span class="n">the</span> <span class="n">Java</span> <span class="n">type</span> <span class="k">of</span> <span class="n">the</span> <span class="n">field</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                                       <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="n">R</span> <span class="n">setFieldName</span><span class="p">(</span><span class="n">T</span> <span class="n">value</span><span class="p">,</span> <span class="n">SetMode</span> <span class="n">mode</span><span class="p">)`</span> <span class="p">|</span> <span class="n">Sets</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">value</span> <span class="n">into</span> <span class="n">the</span> <span class="n">field</span><span class="p">.</span> <span class="n">The</span> <span class="n">mode</span> <span class="n">parameter</span> <span class="n">allows</span> <span class="n">the</span> <span class="n">client</span> <span class="k">to</span> <span class="n">specify</span> <span class="n">the</span> <span class="n">desired</span> <span class="n">behavior</span> <span class="k">if</span> <span class="n">the</span> <span class="n">provided</span> <span class="n">value</span> <span class="n">is</span> <span class="n">null</span><span class="p">.</span> <span class="n">Returns</span> <span class="n">this</span><span class="p">.</span> <span class="p">`</span><span class="n">R</span><span class="p">`</span> <span class="n">is</span> <span class="n">the</span> <span class="n">generated</span> <span class="n">Java</span> <span class="n">class</span><span class="p">.</span> <span class="p">`</span><span class="n">T</span><span class="p">`</span> <span class="n">is</span> <span class="n">the</span> <span class="n">Java</span> <span class="n">type</span> <span class="k">of</span> <span class="n">the</span> <span class="n">field</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                 <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="n">R</span> <span class="n">setFieldName</span><span class="p">(</span><span class="n">T</span> <span class="n">value</span><span class="p">)`</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>        <span class="p">|</span> <span class="n">Sets</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">value</span> <span class="n">into</span> <span class="n">the</span> <span class="n">field</span><span class="p">.</span> <span class="n">This</span> <span class="n">is</span> <span class="n">equivalent</span> <span class="k">to</span> <span class="p">`</span><span class="n">setFieldName</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">SetMode</span><span class="p">.</span><span class="n">DISALLOW_NULL</span><span class="p">)`.</span> <span class="n">Returns</span> <span class="n">this</span><span class="p">.</span> <span class="p">`</span><span class="n">R</span><span class="p">`</span> <span class="n">is</span> <span class="n">the</span> <span class="n">generated</span> <span class="n">Java</span> <span class="n">class</span><span class="p">.</span> <span class="p">`</span><span class="n">T</span><span class="p">`</span> <span class="n">is</span> <span class="n">the</span> <span class="n">native</span> <span class="n">type</span> <span class="n">rather</span> <span class="n">than</span> <span class="n">the</span> <span class="n">corresponding</span> <span class="n">boxed</span> <span class="n">type</span> <span class="n">where</span> <span class="n">applicable</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">g</span><span class="p">.</span> <span class="p">`</span><span class="n">int</span><span class="p">`</span> <span class="n">instead</span> <span class="k">of</span> <span class="p">`</span><span class="k">Integer</span><span class="p">`.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span> <span class="p">|</span>

<span class="p">&lt;</span><span class="n">a</span> <span class="n">name</span><span class="p">=</span><span class="s2">"GetMode"</span><span class="p">&gt;&lt;/</span><span class="n">a</span><span class="p">&gt;</span>

<span class="p">###</span> <span class="n">GetMode</span>

<span class="n">When</span> <span class="n">getting</span> <span class="n">a</span> <span class="n">field</span> <span class="k">from</span> <span class="n">a</span> <span class="k">record</span><span class="p">,</span> <span class="n">the</span> <span class="n">caller</span> <span class="n">must</span> <span class="n">specify</span> <span class="n">the</span> <span class="n">behavior</span>
<span class="k">of</span> <span class="n">the</span> <span class="k">function</span> <span class="k">in</span> <span class="k">case</span> <span class="n">the</span> <span class="n">requested</span> <span class="n">field</span> <span class="n">does</span> <span class="k">not</span> <span class="n">exist</span> <span class="k">in</span> <span class="n">the</span>
<span class="k">record</span><span class="p">.</span>

<span class="n">The</span> <span class="n">available</span> <span class="n">GetModes</span> <span class="n">are</span><span class="p">:</span>

  <span class="p">-</span> <span class="p">`</span><span class="n">NULL</span><span class="p">`</span>  
    <span class="k">If</span> <span class="n">the</span> <span class="n">field</span> <span class="n">is</span> <span class="n">present</span><span class="p">,</span> <span class="k">then</span> <span class="n">return</span> <span class="n">the</span> <span class="n">value</span> <span class="k">of</span> <span class="n">the</span> <span class="n">field</span><span class="p">.</span> <span class="k">If</span> <span class="n">the</span>
    <span class="n">field</span> <span class="n">is</span> <span class="k">not</span> <span class="n">present</span><span class="p">,</span> <span class="k">then</span> <span class="n">return</span> <span class="n">null</span> <span class="p">(</span><span class="n">even</span> <span class="k">if</span> <span class="n">there</span> <span class="n">is</span> <span class="n">a</span> <span class="n">default</span>
    <span class="n">value</span><span class="p">).</span>
  <span class="p">-</span> <span class="p">`</span><span class="n">DEFAULT</span><span class="p">`</span>  
    <span class="k">If</span> <span class="n">the</span> <span class="n">field</span> <span class="n">is</span> <span class="n">present</span><span class="p">,</span> <span class="k">then</span> <span class="n">return</span> <span class="n">the</span> <span class="n">value</span> <span class="k">of</span> <span class="n">the</span> <span class="n">field</span><span class="p">.</span> <span class="k">If</span> <span class="n">the</span>
    <span class="n">field</span> <span class="n">is</span> <span class="k">not</span> <span class="n">present</span> <span class="k">and</span> <span class="n">there</span> <span class="n">is</span> <span class="n">a</span> <span class="n">default</span> <span class="n">value</span><span class="p">,</span> <span class="k">then</span> <span class="n">return</span> <span class="n">the</span>
    <span class="n">default</span> <span class="n">value</span><span class="p">.</span> <span class="k">If</span> <span class="n">the</span> <span class="n">field</span> <span class="n">is</span> <span class="k">not</span> <span class="n">present</span> <span class="k">and</span> <span class="n">there</span> <span class="n">is</span> <span class="n">no</span> <span class="n">default</span>
    <span class="n">value</span><span class="p">,</span> <span class="k">then</span> <span class="n">return</span> <span class="n">null</span><span class="p">.</span>
  <span class="p">-</span> <span class="p">`</span><span class="n">STRICT</span><span class="p">`</span>  
    <span class="k">If</span> <span class="n">the</span> <span class="n">field</span> <span class="n">is</span> <span class="n">present</span><span class="p">,</span> <span class="k">then</span> <span class="n">return</span> <span class="n">the</span> <span class="n">value</span> <span class="k">of</span> <span class="n">the</span> <span class="n">field</span><span class="p">.</span>  
    <span class="k">If</span> <span class="n">the</span> <span class="n">field</span> <span class="n">is</span> <span class="k">not</span> <span class="n">present</span> <span class="k">and</span> <span class="n">the</span> <span class="n">field</span> <span class="n">has</span> <span class="n">a</span> <span class="n">default</span> <span class="n">value</span><span class="p">,</span> <span class="k">then</span>
    <span class="n">return</span> <span class="n">the</span> <span class="n">default</span> <span class="n">value</span><span class="p">.</span>  
    <span class="k">If</span> <span class="n">the</span> <span class="n">field</span> <span class="n">is</span> <span class="k">not</span> <span class="n">present</span> <span class="k">and</span> <span class="n">the</span> <span class="n">field</span> <span class="n">is</span> <span class="k">not</span> <span class="n">optional</span><span class="p">,</span> <span class="k">then</span>
    <span class="n">throw</span>
    <span class="p">`</span><span class="n">com</span><span class="p">.</span><span class="n">linkedin</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">template</span><span class="p">.</span><span class="n">RequiredFieldNotPresentException</span><span class="p">`.</span>  
    <span class="k">If</span> <span class="n">the</span> <span class="n">field</span> <span class="n">is</span> <span class="k">not</span> <span class="n">present</span> <span class="k">and</span> <span class="n">the</span> <span class="n">field</span> <span class="n">is</span> <span class="n">optional</span><span class="p">,</span> <span class="k">then</span> <span class="n">return</span>
    <span class="n">null</span><span class="p">.</span>

<span class="p">###</span> <span class="n">SetMode</span>

<span class="n">When</span> <span class="n">setting</span> <span class="n">a</span> <span class="n">field</span> <span class="k">in</span> <span class="n">a</span> <span class="k">record</span><span class="p">,</span> <span class="n">the</span> <span class="n">caller</span> <span class="n">must</span> <span class="n">specify</span> <span class="n">the</span> <span class="n">behavior</span>
<span class="k">of</span> <span class="n">the</span> <span class="k">function</span> <span class="k">in</span> <span class="k">case</span> <span class="n">the</span> <span class="n">field</span> <span class="n">is</span> <span class="n">attempted</span> <span class="k">to</span> <span class="n">be</span> <span class="k">set</span> <span class="k">to</span> <span class="p">`</span><span class="n">null</span><span class="p">`.</span>

<span class="n">The</span> <span class="n">available</span> <span class="n">SetModes</span> <span class="n">are</span><span class="p">:</span>

  <span class="p">-</span> <span class="p">`</span><span class="n">IGNORE_NULL</span><span class="p">`</span>  
    <span class="k">If</span> <span class="n">the</span> <span class="n">provided</span> <span class="n">value</span> <span class="n">is</span> <span class="n">null</span><span class="p">,</span> <span class="k">then</span> <span class="k">do</span> <span class="n">nothing</span> <span class="n">i</span><span class="p">.</span><span class="n">e</span><span class="p">.</span> <span class="n">the</span> <span class="n">value</span> <span class="k">of</span> <span class="n">the</span>
    <span class="n">field</span> <span class="n">is</span> <span class="k">not</span> <span class="n">changed</span><span class="p">.</span> <span class="n">The</span> <span class="n">field</span> <span class="n">may</span> <span class="k">or</span> <span class="n">may</span> <span class="n">be</span> <span class="n">present</span><span class="p">.</span>
  <span class="p">-</span> <span class="p">`</span><span class="n">REMOVE_IF_NULL</span><span class="p">`</span>  
    <span class="k">If</span> <span class="n">the</span> <span class="n">provided</span> <span class="n">value</span> <span class="n">is</span> <span class="n">null</span><span class="p">,</span> <span class="k">then</span> <span class="n">remove</span> <span class="n">the</span> <span class="n">field</span><span class="p">.</span> <span class="n">This</span> <span class="n">occurs</span>
    <span class="n">regardless</span> <span class="k">of</span> <span class="n">whether</span> <span class="n">the</span> <span class="n">field</span> <span class="n">is</span> <span class="n">optional</span><span class="p">.</span>
  <span class="p">-</span> <span class="p">`</span><span class="n">REMOVE_OPTIONAL_IF_NULL</span><span class="p">`</span>  
    <span class="k">If</span> <span class="n">the</span> <span class="n">provided</span> <span class="n">value</span> <span class="n">is</span> <span class="n">null</span> <span class="k">and</span> <span class="n">the</span> <span class="n">field</span> <span class="n">is</span> <span class="n">an</span> <span class="n">optional</span> <span class="n">field</span><span class="p">,</span>
    <span class="k">then</span> <span class="n">remove</span> <span class="n">the</span> <span class="n">field</span><span class="p">.</span> <span class="k">If</span> <span class="n">the</span> <span class="n">provided</span> <span class="n">value</span> <span class="n">is</span> <span class="n">null</span> <span class="k">and</span> <span class="n">the</span> <span class="n">field</span>
    <span class="n">is</span> <span class="n">a</span> <span class="n">mandatory</span> <span class="n">field</span><span class="p">,</span> <span class="k">then</span> <span class="n">throw</span>
    <span class="p">`</span><span class="n">java</span><span class="p">.</span><span class="n">lang</span><span class="p">.</span><span class="n">IllegalArgumentException</span><span class="p">`.</span>
  <span class="p">-</span> <span class="p">`</span><span class="n">DISALLOW_NULL</span><span class="p">`</span>  
    <span class="n">The</span> <span class="n">provided</span> <span class="n">value</span> <span class="n">cannot</span> <span class="n">be</span> <span class="n">null</span><span class="p">.</span> <span class="k">If</span> <span class="n">the</span> <span class="n">provided</span> <span class="n">value</span> <span class="n">is</span> <span class="n">null</span><span class="p">,</span>
    <span class="k">then</span> <span class="n">throw</span> <span class="p">`</span><span class="n">java</span><span class="p">.</span><span class="n">lang</span><span class="p">.</span><span class="n">NullPointerException</span><span class="p">`.</span>

<span class="p">&lt;</span><span class="c1">!-- end list --&gt;
</span>
    <span class="p">```</span>
    <span class="k">package</span> <span class="n">com</span><span class="p">.</span><span class="n">linkedin</span><span class="p">.</span><span class="n">pegasus</span><span class="p">.</span><span class="n">generator</span><span class="p">.</span><span class="n">examples</span><span class="p">;</span>
    
    <span class="p">...</span>
    
    <span class="k">public</span> <span class="n">class</span> <span class="n">Foo</span> <span class="n">extends</span> <span class="n">RecordTemplate</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">Foo</span><span class="p">()</span> <span class="p">...</span>
        <span class="k">public</span> <span class="n">Foo</span><span class="p">(</span><span class="n">DataMap</span> <span class="n">data</span><span class="p">)</span> <span class="p">...</span>
        <span class="p">...</span>
    
        <span class="p">//</span> <span class="n">intField</span> <span class="p">-</span> <span class="n">field</span> <span class="k">of</span> <span class="n">int</span> <span class="n">type</span>
        <span class="k">public</span> <span class="k">boolean</span> <span class="n">hasIntField</span><span class="p">()</span> <span class="p">...</span>
        <span class="k">public</span> <span class="n">void</span> <span class="n">removeIntField</span><span class="p">()</span> <span class="p">...</span>
        <span class="k">public</span> <span class="k">Integer</span> <span class="n">getIntField</span><span class="p">(</span><span class="n">GetMode</span> <span class="n">mode</span><span class="p">)</span> <span class="p">...</span>
        <span class="k">public</span> <span class="k">Integer</span> <span class="n">getIntField</span><span class="p">()</span> <span class="p">{</span> <span class="n">return</span> <span class="n">getIntField</span><span class="p">(</span><span class="n">GetMode</span><span class="p">.</span><span class="n">STRICT</span><span class="p">);</span> <span class="p">}</span>
        <span class="k">public</span> <span class="n">Foo</span> <span class="n">setIntField</span><span class="p">(</span><span class="n">int</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">;</span> <span class="n">return</span> <span class="n">this</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="n">Foo</span> <span class="n">setIntField</span><span class="p">(</span><span class="k">Integer</span> <span class="n">value</span><span class="p">,</span> <span class="n">SetMode</span> <span class="n">mode</span> <span class="p">{</span> <span class="p">...</span> <span class="p">;</span> <span class="n">return</span> <span class="n">this</span><span class="p">;</span> <span class="p">}</span>
        <span class="p">...</span>
    
        <span class="p">//</span> <span class="n">bytesField</span> <span class="p">-</span> <span class="n">field</span> <span class="k">of</span> <span class="n">bytes</span><span class="p">,</span> <span class="n">Java</span> <span class="n">binding</span> <span class="n">for</span> <span class="n">bytes</span> <span class="n">is</span> <span class="n">ByteString</span>
        <span class="k">public</span> <span class="k">boolean</span> <span class="n">hasBytesField</span><span class="p">()</span> <span class="p">...</span>
        <span class="k">public</span> <span class="n">void</span> <span class="n">removeBytesField</span><span class="p">()</span> <span class="p">...</span>
        <span class="k">public</span> <span class="n">ByteString</span> <span class="n">getBytesField</span><span class="p">(</span><span class="n">GetMode</span> <span class="n">mode</span><span class="p">)</span> <span class="p">{</span> <span class="n">return</span> <span class="n">getBytesField</span><span class="p">(</span><span class="n">GetMode</span><span class="p">.</span><span class="n">STRICT</span><span class="p">);</span> <span class="p">}</span>
        <span class="k">public</span> <span class="n">ByteString</span> <span class="n">getBytesField</span><span class="p">()</span> <span class="p">...</span>
        <span class="k">public</span> <span class="n">Foo</span> <span class="n">setBytesField</span><span class="p">(</span><span class="n">ByteString</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">;</span> <span class="n">return</span> <span class="n">this</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="n">Foo</span> <span class="n">setBytesField</span><span class="p">(</span><span class="n">ByteString</span> <span class="n">value</span><span class="p">,</span> <span class="n">SetMode</span> <span class="n">mode</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">;</span> <span class="n">return</span> <span class="n">this</span><span class="p">;</span> <span class="p">}</span>
        <span class="p">...</span>
    
        <span class="p">//</span> <span class="n">fruitsField</span> <span class="p">-</span> <span class="n">field</span> <span class="k">of</span> <span class="n">enum</span>
        <span class="k">public</span> <span class="k">boolean</span> <span class="n">hasFruitsField</span><span class="p">()</span> <span class="p">...</span>
        <span class="k">public</span> <span class="n">void</span> <span class="n">removeFruitsField</span><span class="p">()</span> <span class="p">...</span>
        <span class="k">public</span> <span class="n">Fruits</span> <span class="n">getFruitsField</span><span class="p">(</span><span class="n">GetMode</span> <span class="n">mode</span><span class="p">)</span> <span class="p">...</span>
        <span class="k">public</span> <span class="n">Fruits</span> <span class="n">getFruitsField</span><span class="p">()</span> <span class="p">{</span> <span class="n">return</span> <span class="n">getFruitsField</span><span class="p">(</span><span class="n">GetMode</span><span class="p">.</span><span class="n">STRICT</span><span class="p">);</span> <span class="p">}</span>
        <span class="k">public</span> <span class="n">Foo</span> <span class="n">setFruitsField</span><span class="p">(</span><span class="n">Fruits</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">;</span> <span class="n">return</span> <span class="n">this</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="n">Foo</span> <span class="n">setFruitsField</span><span class="p">(</span><span class="n">Fruits</span> <span class="n">value</span><span class="p">,</span> <span class="n">SetMode</span> <span class="n">mode</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">;</span> <span class="n">return</span> <span class="n">this</span><span class="p">;</span> <span class="p">}</span>
        <span class="p">...</span>
    
        <span class="p">//</span> <span class="n">intArrayField</span> <span class="p">-</span> <span class="n">field</span> <span class="k">of</span> <span class="p">{</span> <span class="s2">"type"</span> <span class="p">:</span> <span class="s2">"array"</span><span class="p">,</span> <span class="s2">"items"</span> <span class="p">:</span> <span class="s2">"int"</span> <span class="p">}</span>
        <span class="k">public</span> <span class="k">boolean</span> <span class="n">hasIntArrayField</span><span class="p">()</span> <span class="p">...</span>
        <span class="k">public</span> <span class="n">void</span> <span class="n">removeIntArrayField</span><span class="p">()</span> <span class="p">...</span>
        <span class="k">public</span> <span class="n">IntegerArray</span> <span class="n">getIntArrayField</span><span class="p">(</span><span class="n">GetMode</span> <span class="n">mode</span><span class="p">)</span> <span class="p">...</span>
        <span class="k">public</span> <span class="n">IntegerArray</span> <span class="n">getIntArrayField</span><span class="p">()</span> <span class="p">{</span> <span class="n">return</span> <span class="n">getIntArrayField</span><span class="p">(</span><span class="n">GetMode</span><span class="p">.</span><span class="n">STRICT</span><span class="p">);</span> <span class="p">}</span>
        <span class="k">public</span> <span class="n">Foo</span> <span class="n">setIntArrayField</span><span class="p">(</span><span class="n">IntegerArray</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">;</span> <span class="n">return</span> <span class="n">this</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="n">Foo</span> <span class="n">setIntArrayField</span><span class="p">(</span><span class="n">IntegerArray</span> <span class="n">value</span><span class="p">,</span> <span class="n">SetMode</span> <span class="n">mode</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">;</span> <span class="n">return</span> <span class="n">this</span><span class="p">;</span> <span class="p">}</span>
    
        <span class="p">//</span> <span class="n">stringMapField</span> <span class="p">-</span> <span class="n">field</span> <span class="k">of</span> <span class="p">{</span> <span class="s2">"type"</span> <span class="p">:</span> <span class="s2">"map"</span><span class="p">,</span> <span class="s2">"values"</span> <span class="p">:</span> <span class="s2">"string"</span> <span class="p">}</span>
        <span class="k">public</span> <span class="k">boolean</span> <span class="n">hasStringMapField</span><span class="p">()</span> <span class="p">...</span>
        <span class="k">public</span> <span class="n">void</span> <span class="n">removeStringMapField</span><span class="p">()</span> <span class="p">...</span>
        <span class="k">public</span> <span class="n">StringMap</span> <span class="n">getStringMapField</span><span class="p">(</span><span class="n">GetMode</span> <span class="n">mode</span><span class="p">)</span> <span class="p">...</span>
        <span class="k">public</span> <span class="n">StringMap</span> <span class="n">getStringMapField</span><span class="p">()</span> <span class="p">{</span> <span class="n">return</span> <span class="n">getIntStringMapField</span><span class="p">(</span><span class="n">GetMode</span><span class="p">.</span><span class="n">STRICT</span><span class="p">);</span> <span class="p">}</span>
        <span class="k">public</span> <span class="n">Foo</span> <span class="n">setStringMapField</span><span class="p">(</span><span class="n">StringMap</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">;</span> <span class="n">return</span> <span class="n">this</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="n">Foo</span> <span class="n">setStringMapField</span><span class="p">(</span><span class="n">StringMap</span> <span class="n">value</span><span class="p">,</span> <span class="n">SetMode</span> <span class="n">mode</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">;</span> <span class="n">return</span> <span class="n">this</span><span class="p">;</span> <span class="p">}</span>
        <span class="p">...</span>
    
        <span class="p">//</span> <span class="n">unionField</span> <span class="p">-</span> <span class="n">field</span> <span class="k">of</span> <span class="k">union</span>
        <span class="k">public</span> <span class="k">boolean</span> <span class="n">hasUnionField</span><span class="p">()</span> <span class="p">...</span>
        <span class="k">public</span> <span class="n">void</span> <span class="n">removeUnionField</span><span class="p">()</span> <span class="p">...</span>
        <span class="k">public</span> <span class="n">Foo</span><span class="p">.</span><span class="n">UnionField</span> <span class="n">getUnionField</span><span class="p">(</span><span class="n">GetMode</span> <span class="n">mode</span><span class="p">)</span> <span class="p">...</span>
        <span class="k">public</span> <span class="n">Foo</span><span class="p">.</span><span class="n">UnionField</span> <span class="n">getUnionField</span><span class="p">()</span> <span class="p">{</span> <span class="n">return</span> <span class="n">getUnionField</span><span class="p">(</span><span class="n">GetMode</span><span class="p">.</span><span class="n">STRICT</span><span class="p">);</span> <span class="p">}</span>
        <span class="k">public</span> <span class="n">Foo</span> <span class="n">setUnionField</span><span class="p">(</span><span class="n">Foo</span><span class="p">.</span><span class="n">UnionField</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">;</span> <span class="n">return</span> <span class="n">this</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="n">Foo</span> <span class="n">setUnionField</span><span class="p">(</span><span class="n">Foo</span><span class="p">.</span><span class="n">UnionField</span> <span class="n">value</span><span class="p">,</span> <span class="n">SetMode</span> <span class="n">mode</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">;</span> <span class="n">return</span> <span class="n">this</span><span class="p">;</span> <span class="p">}</span>
    
        <span class="p">//</span> <span class="n">get</span> <span class="n">fields</span>
        <span class="k">public</span> <span class="n">static</span> <span class="n">Foo</span><span class="p">.</span><span class="n">Fields</span> <span class="n">fields</span><span class="p">()</span> <span class="p">{</span>
            <span class="p">...;</span>
        <span class="p">}</span>
    
        <span class="k">public</span> <span class="n">static</span> <span class="n">class</span> <span class="n">Fields</span>
            <span class="n">extends</span> <span class="n">PathSpec</span>
        <span class="p">{</span>
            <span class="p">...</span>
            <span class="k">public</span> <span class="n">PathSpec</span> <span class="n">intField</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
            <span class="k">public</span> <span class="n">PathSpec</span> <span class="n">longField</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
            <span class="k">public</span> <span class="n">PathSpec</span> <span class="n">bytesField</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
            <span class="k">public</span> <span class="n">PathSpec</span> <span class="n">fruitsField</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
            <span class="k">public</span> <span class="n">PathSpec</span> <span class="n">intArrayField</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
            <span class="k">public</span> <span class="n">PathSpec</span> <span class="n">stringMapField</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
            <span class="k">public</span> <span class="n">Foo</span><span class="p">.</span><span class="n">UnionField</span><span class="p">.</span><span class="n">Fields</span> <span class="n">unionField</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="p">```</span>

<span class="p">##</span> <span class="n">Error</span> <span class="n">Type</span>

<span class="n">Error</span> <span class="n">types</span> <span class="n">are</span> <span class="n">specialized</span> <span class="k">record</span> <span class="n">types</span><span class="p">.</span> <span class="n">The</span> <span class="n">code</span> <span class="n">generator</span> <span class="n">generates</span> <span class="n">a</span>
<span class="n">class</span> <span class="n">that</span> <span class="n">extends</span> <span class="p">`</span><span class="n">com</span><span class="p">.</span><span class="n">linkedin</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">template</span><span class="p">.</span><span class="n">ExceptionTemplate</span><span class="p">`.</span> <span class="n">The</span>
<span class="n">generated</span> <span class="n">class</span> <span class="n">has</span> <span class="n">the</span> <span class="n">same</span> <span class="n">methods</span> <span class="k">as</span> <span class="n">a</span> <span class="n">generated</span> <span class="n">class</span> <span class="n">for</span> <span class="n">a</span> <span class="k">record</span>
<span class="k">with</span> <span class="n">the</span> <span class="n">same</span> <span class="n">fields</span><span class="p">.</span> <span class="n">Unlike</span> <span class="p">`</span><span class="n">RecordTemplate</span><span class="p">`</span> <span class="n">instances</span><span class="p">,</span>
<span class="p">`</span><span class="n">ExceptionTemplate</span><span class="p">`</span> <span class="n">instances</span> <span class="n">can</span> <span class="n">be</span> <span class="n">thrown</span> <span class="k">and</span> <span class="n">caught</span><span class="p">.</span>
<span class="p">`</span><span class="n">ExceptionTemplate</span><span class="p">`</span> <span class="n">extends</span> <span class="p">`</span><span class="n">java</span><span class="p">.</span><span class="n">lang</span><span class="p">.</span><span class="n">Exception</span><span class="p">`.</span>

<span class="p">##</span> <span class="k">Union</span> <span class="n">Type</span>

<span class="n">The</span> <span class="n">code</span> <span class="n">generator</span> <span class="n">generates</span> <span class="n">a</span> <span class="n">class</span> <span class="n">that</span> <span class="n">extends</span>
<span class="p">`</span><span class="n">com</span><span class="p">.</span><span class="n">linkedin</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">template</span><span class="p">.</span><span class="n">UnionTemplate</span><span class="p">`.</span> <span class="n">This</span> <span class="n">class</span> <span class="n">provides</span> <span class="n">the</span>
<span class="n">following</span> <span class="n">methods</span><span class="p">:</span>

<span class="p">&lt;</span><span class="n">table</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">thead</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">tr</span> <span class="n">class</span><span class="p">=</span><span class="s2">"header"</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">th</span><span class="p">&gt;</span><span class="n">Method</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;/</span><span class="n">th</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">th</span><span class="p">&gt;</span><span class="n">Implemented</span> <span class="n">by</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;/</span><span class="n">th</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">th</span><span class="p">&gt;</span><span class="n">Description</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;/</span><span class="n">th</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="n">tr</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="n">thead</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">tbody</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">tr</span> <span class="n">class</span><span class="p">=</span><span class="s2">"odd"</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;&lt;</span><span class="n">em</span><span class="p">&gt;</span><span class="n">Constructor</span><span class="p">&lt;/</span><span class="n">em</span><span class="p">&gt;()</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;</span><span class="n">Generated</span> <span class="n">class</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;</span><span class="n">Construct</span> <span class="n">a</span> <span class="k">union</span> <span class="k">with</span> <span class="n">null</span> <span class="k">as</span> <span class="n">it</span> <span class="n">value</span><span class="p">.</span> <span class="n">An</span> <span class="n">instance</span> <span class="k">with</span> <span class="n">null</span> <span class="k">as</span> <span class="n">its</span> <span class="n">value</span> <span class="n">cannot</span> <span class="n">be</span> <span class="n">assigned</span> <span class="n">another</span> <span class="n">value</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="n">tr</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">tr</span> <span class="n">class</span><span class="p">=</span><span class="s2">"even"</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;&lt;</span><span class="n">em</span><span class="p">&gt;</span><span class="n">Constructor</span><span class="p">&lt;/</span><span class="n">em</span><span class="p">&gt;(</span><span class="n">DataMap</span> <span class="n">map</span><span class="p">)</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;</span><span class="n">Generated</span> <span class="n">class</span><span class="p">&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;</span><span class="k">If</span> <span class="n">the</span> <span class="n">argument</span> <span class="n">is</span> <span class="n">null</span> <span class="k">or</span> <span class="p">```</span><span class="n">Data</span><span class="p">.</span><span class="n">NULL</span><span class="p">```,</span> <span class="k">then</span> <span class="n">construct</span> <span class="n">a</span> <span class="k">union</span> <span class="k">with</span> <span class="n">a</span> <span class="n">null</span> <span class="n">value</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="k">If</span> <span class="n">the</span> <span class="n">argument</span> <span class="n">is</span> <span class="k">not</span> <span class="n">null</span><span class="p">,</span> <span class="k">then</span> <span class="n">construct</span> <span class="n">a</span> <span class="k">union</span> <span class="n">whose</span> <span class="n">value</span> <span class="n">is</span> <span class="n">provided</span> <span class="n">by</span> <span class="n">the</span> <span class="p">```</span><span class="n">DataMap</span><span class="p">```.</span> <span class="n">Method</span> <span class="n">invocations</span> <span class="n">on</span> <span class="n">the</span> <span class="p">```</span><span class="n">UnionTemplate</span><span class="p">```</span> <span class="n">translates</span> <span class="k">to</span> <span class="n">accesses</span> <span class="k">to</span> <span class="n">the</span> <span class="n">underlying</span> <span class="p">```</span><span class="n">DataMap</span><span class="p">```.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="n">An</span> <span class="n">instance</span> <span class="k">with</span> <span class="n">null</span> <span class="k">as</span> <span class="n">its</span> <span class="n">value</span> <span class="n">cannot</span> <span class="n">be</span> <span class="n">assigned</span> <span class="n">another</span> <span class="n">value</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="n">An</span> <span class="n">instance</span> <span class="n">that</span> <span class="n">has</span> <span class="n">a</span> <span class="n">non</span><span class="p">-</span><span class="n">null</span> <span class="n">value</span> <span class="n">cannot</span> <span class="n">be</span> <span class="n">later</span> <span class="n">assigned</span> <span class="n">a</span> <span class="n">null</span> <span class="n">value</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="n">Note</span><span class="p">:</span> <span class="n">This</span> <span class="n">limitation</span> <span class="n">is</span> <span class="n">because</span> <span class="n">the</span> <span class="n">underlying</span> <span class="n">data</span> <span class="n">types</span> <span class="n">that</span> <span class="n">back</span> <span class="n">the</span> <span class="k">union</span> <span class="n">for</span> <span class="n">null</span> <span class="n">verus</span> <span class="n">non</span><span class="p">-</span><span class="n">null</span> <span class="n">values</span> <span class="n">are</span> <span class="n">different</span><span class="p">.</span> <span class="n">For</span> <span class="n">non</span><span class="p">-</span><span class="n">null</span> <span class="n">values</span><span class="p">,</span> <span class="n">the</span> <span class="n">underlying</span> <span class="n">data</span> <span class="n">type</span> <span class="n">is</span> <span class="n">a</span> <span class="p">```</span><span class="n">DataMap</span><span class="p">```.</span> <span class="n">For</span> <span class="n">null</span> <span class="n">values</span><span class="p">,</span> <span class="n">the</span> <span class="n">underlying</span> <span class="n">data</span> <span class="n">type</span> <span class="n">is</span> <span class="n">a</span> <span class="k">string</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="n">tr</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">tr</span> <span class="n">class</span><span class="p">=</span><span class="s2">"odd"</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;```</span><span class="n">UnionDataSchema</span> <span class="n">schema</span><span class="p">()```</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;</span><span class="n">Generated</span> <span class="n">class</span><span class="p">&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;</span><span class="n">Returns</span> <span class="n">the</span> <span class="p">```</span><span class="n">DataSchema</span><span class="p">```</span> <span class="k">of</span> <span class="n">the</span> <span class="n">instance</span><span class="p">.</span> <span class="n">The</span> <span class="n">members</span> <span class="k">of</span> <span class="n">the</span> <span class="k">union</span> <span class="n">can</span> <span class="n">be</span> <span class="n">obtained</span> <span class="k">from</span> <span class="n">this</span> <span class="n">schema</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="n">tr</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">tr</span> <span class="n">class</span><span class="p">=</span><span class="s2">"even"</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;```</span><span class="n">DataScheme</span> <span class="n">memberType</span><span class="p">()```</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;</span><span class="n">Base</span> <span class="n">class</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;</span><span class="n">Returns</span> <span class="p">```</span><span class="n">DataSchemaConstants</span><span class="p">.</span><span class="n">NULL_TYPE</span><span class="p">```</span> <span class="k">if</span> <span class="n">the</span> <span class="k">union</span> <span class="n">has</span> <span class="n">a</span> <span class="n">null</span> <span class="n">value</span><span class="p">,</span> <span class="k">else</span> <span class="n">return</span> <span class="n">the</span> <span class="n">schema</span> <span class="n">for</span> <span class="n">the</span> <span class="n">value</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="k">If</span> <span class="n">the</span> <span class="n">schema</span> <span class="n">cannot</span> <span class="n">be</span> <span class="n">determined</span><span class="p">,</span> <span class="k">then</span> <span class="n">throw</span> <span class="p">```</span><span class="n">TemplateOutputCastException</span><span class="p">```.</span> <span class="n">The</span> <span class="n">schema</span> <span class="n">cannot</span> <span class="n">be</span> <span class="n">determined</span> <span class="k">if</span> <span class="n">the</span> <span class="n">content</span> <span class="k">of</span> <span class="n">the</span> <span class="n">underlying</span> <span class="p">```</span><span class="n">DataMap</span><span class="p">```</span> <span class="n">cannot</span> <span class="n">be</span> <span class="n">resolved</span> <span class="k">to</span> <span class="n">a</span> <span class="n">known</span> <span class="n">member</span> <span class="n">type</span> <span class="k">of</span> <span class="n">the</span> <span class="k">union</span> <span class="n">schema</span><span class="p">.</span> <span class="n">See</span> <span class="n">serialization</span> <span class="n">format</span> <span class="n">for</span> <span class="n">details</span><span class="p">.</span> <span class="n">This</span> <span class="n">exception</span> <span class="n">is</span> <span class="n">thrown</span> <span class="k">if</span> <span class="n">the</span> <span class="p">```</span><span class="n">DataMap</span><span class="p">```</span> <span class="n">has</span> <span class="n">more</span> <span class="n">than</span> <span class="n">one</span> <span class="n">entry</span> <span class="k">and</span> <span class="n">the</span> <span class="n">key</span> <span class="k">of</span> <span class="n">the</span> <span class="n">only</span> <span class="n">entry</span> <span class="n">does</span> <span class="k">not</span> <span class="n">identify</span> <span class="n">one</span> <span class="k">of</span> <span class="n">the</span> <span class="n">member</span> <span class="n">types</span> <span class="k">of</span> <span class="n">the</span> <span class="k">union</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="n">tr</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">tr</span> <span class="n">class</span><span class="p">=</span><span class="s2">"odd"</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;```</span><span class="k">boolean</span> <span class="n">memberIs</span><span class="p">(</span><span class="k">String</span> <span class="n">key</span><span class="p">)```</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;</span><span class="n">Base</span> <span class="n">class</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;</span><span class="n">Returns</span> <span class="n">whether</span> <span class="n">the</span> <span class="k">union</span> <span class="n">member</span> <span class="n">key</span> <span class="k">of</span> <span class="n">the</span> <span class="n">current</span> <span class="n">value</span> <span class="n">is</span> <span class="n">equal</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">key</span><span class="p">.</span> <span class="n">The</span> <span class="n">type</span> <span class="k">of</span> <span class="n">the</span> <span class="n">current</span> <span class="n">value</span> <span class="n">is</span> <span class="n">identified</span> <span class="n">by</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">key</span> <span class="k">if</span> <span class="n">the</span> <span class="n">underlying</span> <span class="p">```</span><span class="n">DataMap</span><span class="p">```</span> <span class="n">has</span> <span class="n">a</span> <span class="n">single</span> <span class="n">entry</span> <span class="k">and</span> <span class="n">the</span> <span class="n">entry</span><span class="err">’</span><span class="n">s</span> <span class="n">key</span> <span class="n">equals</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">key</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="n">tr</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">tr</span> <span class="n">class</span><span class="p">=</span><span class="s2">"even"</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;```</span><span class="k">boolean</span> <span class="n">isNull</span><span class="p">()```</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;</span><span class="n">Base</span> <span class="n">class</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;</span><span class="n">Returns</span> <span class="n">whether</span> <span class="n">the</span> <span class="n">value</span> <span class="k">of</span> <span class="n">the</span> <span class="k">union</span> <span class="n">is</span> <span class="n">null</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="n">tr</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">tr</span> <span class="n">class</span><span class="p">=</span><span class="s2">"odd"</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;```</span><span class="n">Object</span> <span class="n">data</span><span class="p">()```</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;</span><span class="n">Base</span> <span class="n">class</span><span class="p">&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;</span><span class="n">Returns</span> <span class="p">```</span><span class="n">Data</span><span class="p">.</span><span class="n">NULL</span><span class="p">```</span> <span class="k">if</span> <span class="n">the</span> <span class="k">union</span> <span class="n">has</span> <span class="n">a</span> <span class="n">null</span> <span class="n">value</span><span class="p">,</span> <span class="k">else</span> <span class="n">return</span> <span class="n">the</span> <span class="n">underlying</span> <span class="p">```</span><span class="n">DataMap</span><span class="p">```</span> <span class="n">fronted</span> <span class="n">by</span> <span class="n">the</span> <span class="n">instance</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="n">tr</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">tr</span> <span class="n">class</span><span class="p">=</span><span class="s2">"even"</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;```</span><span class="k">String</span> <span class="n">toString</span><span class="p">()```</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;</span><span class="n">Base</span> <span class="n">class</span><span class="p">&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">td</span><span class="p">&gt;</span><span class="n">Equivalent</span> <span class="k">to</span> <span class="p">```</span><span class="n">data</span><span class="p">().</span><span class="n">toString</span><span class="p">()```.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;&lt;/</span><span class="n">td</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="n">tr</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="n">tbody</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="n">table</span><span class="p">&gt;</span>

<span class="n">The</span> <span class="n">code</span> <span class="n">generator</span> <span class="n">generates</span> <span class="n">the</span> <span class="n">following</span> <span class="n">methods</span> <span class="k">in</span> <span class="n">the</span> <span class="n">generated</span>
<span class="n">class</span> <span class="n">for</span> <span class="n">each</span> <span class="n">member</span> <span class="n">type</span> <span class="k">of</span> <span class="n">the</span> <span class="k">union</span><span class="p">.</span> <span class="k">In</span> <span class="n">the</span> <span class="n">following</span> <span class="n">table</span><span class="p">,</span>
<span class="p">*</span><span class="n">MemberKey</span><span class="p">*</span> <span class="n">is</span> <span class="n">either</span> <span class="n">the</span> <span class="n">member</span><span class="err">’</span><span class="n">s</span> <span class="n">alias</span> <span class="p">(</span><span class="k">if</span> <span class="n">specified</span><span class="p">)</span> <span class="k">or</span> <span class="n">the</span> <span class="n">member</span><span class="err">’</span><span class="n">s</span>
<span class="n">non</span><span class="p">-</span><span class="n">fully</span> <span class="n">qualified</span> <span class="n">type</span> <span class="n">name</span> <span class="k">with</span> <span class="n">the</span> <span class="n">first</span> <span class="n">character</span>
<span class="n">capitalized</span><span class="p">.</span>

<span class="p">|</span> <span class="n">Method</span>                                  <span class="p">|</span> <span class="n">Description</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                                                                                 <span class="p">|</span>
<span class="p">|</span> <span class="p">---------------------------------------</span> <span class="p">|</span> <span class="p">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span> <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="n">U</span> <span class="n">createWithMemberKey</span><span class="p">(</span><span class="n">T</span> <span class="n">value</span><span class="p">)`</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span> <span class="p">|</span> <span class="n">Create</span> <span class="n">a</span> <span class="k">union</span> <span class="n">instance</span> <span class="k">with</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">value</span> <span class="n">for</span> <span class="n">the</span> <span class="n">member</span> <span class="n">identified</span> <span class="n">by</span> <span class="p">*</span><span class="n">MemberKey</span><span class="p">*.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                  <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="k">boolean</span> <span class="n">isMemberKey</span><span class="p">()`</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>          <span class="p">|</span> <span class="n">Returns</span> <span class="n">whether</span> <span class="n">the</span> <span class="n">value</span> <span class="k">of</span> <span class="n">the</span> <span class="k">union</span> <span class="n">is</span> <span class="k">of</span> <span class="n">the</span> <span class="n">member</span> <span class="n">identified</span> <span class="n">by</span> <span class="n">the</span> <span class="p">*</span><span class="n">MemberKey</span><span class="p">*.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                      <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="n">T</span> <span class="n">getMemberKey</span><span class="p">()`</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>               <span class="p">|</span> <span class="n">Returns</span> <span class="n">the</span> <span class="n">value</span> <span class="k">of</span> <span class="n">the</span> <span class="k">union</span> <span class="k">if</span> <span class="n">it</span> <span class="n">is</span> <span class="n">for</span> <span class="n">the</span> <span class="n">member</span> <span class="n">identified</span> <span class="n">by</span> <span class="p">*</span><span class="n">MemberKey</span><span class="p">*.</span> <span class="p">`</span><span class="n">T</span><span class="p">`</span> <span class="n">is</span> <span class="n">the</span> <span class="n">Java</span> <span class="n">type</span> <span class="k">of</span> <span class="n">the</span> <span class="n">value</span> <span class="k">and</span> <span class="k">if</span> <span class="n">the</span> <span class="n">current</span> <span class="n">value</span> <span class="n">is</span> <span class="k">not</span> <span class="k">of</span> <span class="n">this</span> <span class="n">type</span><span class="p">,</span> <span class="k">then</span> <span class="n">throw</span> <span class="p">`</span><span class="n">TemplateOutputCastException</span><span class="p">`.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span> <span class="p">|</span>
<span class="p">|</span> <span class="p">`</span><span class="n">void</span> <span class="n">setMemberKey</span><span class="p">(</span><span class="n">T</span> <span class="n">value</span><span class="p">)`</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>     <span class="p">|</span> <span class="n">Sets</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">value</span> <span class="n">into</span> <span class="n">the</span> <span class="k">union</span><span class="p">.</span> <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>                                                                                                                                                                    <span class="p">|</span>

<span class="n">Here</span> <span class="n">is</span> <span class="n">an</span> <span class="n">example</span> <span class="n">generated</span> <span class="n">class</span> <span class="n">for</span> <span class="n">a</span> <span class="k">union</span> <span class="n">who</span><span class="err">’</span><span class="n">s</span> <span class="n">members</span> <span class="n">are</span> <span class="k">not</span>
<span class="n">aliased</span><span class="p">.</span>

    <span class="p">```</span>
    <span class="k">package</span> <span class="n">com</span><span class="p">.</span><span class="n">linkedin</span><span class="p">.</span><span class="n">pegasus</span><span class="p">.</span><span class="n">examples</span><span class="p">;</span>
    
    <span class="p">...</span>
    <span class="k">public</span> <span class="n">class</span> <span class="n">Foo</span> <span class="n">extends</span> <span class="n">RecordTemplate</span>
    <span class="p">{</span>
        <span class="p">...</span>
        <span class="k">public</span> <span class="n">final</span> <span class="n">static</span> <span class="n">class</span> <span class="n">UnionField</span> <span class="n">extends</span> <span class="n">UnionTemplate</span>
        <span class="p">{</span>
            <span class="k">public</span> <span class="n">UnionField</span><span class="p">()</span> <span class="p">...</span>
            <span class="k">public</span> <span class="n">UnionField</span><span class="p">(</span><span class="n">Object</span> <span class="n">data</span><span class="p">)</span> <span class="p">...</span>
    
            <span class="p">//</span> <span class="n">int</span> <span class="n">value</span>
            <span class="k">public</span> <span class="k">boolean</span> <span class="n">isInt</span><span class="p">()</span> <span class="p">...</span>
            <span class="k">public</span> <span class="k">Integer</span> <span class="n">getInt</span><span class="p">()</span> <span class="p">...</span>
            <span class="k">public</span> <span class="n">void</span> <span class="n">setInt</span><span class="p">(</span><span class="k">Integer</span> <span class="n">value</span><span class="p">)</span> <span class="p">...</span>
    
            <span class="p">//</span> <span class="k">string</span> <span class="n">value</span>
            <span class="k">public</span> <span class="k">boolean</span> <span class="n">isString</span><span class="p">()</span> <span class="p">...</span>
            <span class="k">public</span> <span class="k">String</span> <span class="n">getString</span><span class="p">()</span> <span class="p">...</span>
            <span class="k">public</span> <span class="n">void</span> <span class="n">setString</span><span class="p">(</span><span class="k">String</span> <span class="n">value</span><span class="p">)</span> <span class="p">...</span>
    
            <span class="p">//</span> <span class="n">com</span><span class="p">.</span><span class="n">linkedin</span><span class="p">.</span><span class="n">pegasus</span><span class="p">.</span><span class="n">generator</span><span class="p">.</span><span class="n">examples</span><span class="p">.</span><span class="n">Fruits</span> <span class="n">enum</span> <span class="n">value</span>
            <span class="k">public</span> <span class="k">boolean</span> <span class="n">isFruits</span><span class="p">()</span> <span class="p">...</span>
            <span class="k">public</span> <span class="n">Fruits</span> <span class="n">getFruits</span><span class="p">()</span> <span class="p">...</span>
            <span class="k">public</span> <span class="n">void</span> <span class="n">setFruits</span><span class="p">(</span><span class="n">Fruits</span> <span class="n">value</span><span class="p">)</span> <span class="p">...</span>
    
            <span class="p">//</span> <span class="n">com</span><span class="p">.</span><span class="n">linkedin</span><span class="p">.</span><span class="n">pegasus</span><span class="p">.</span><span class="n">generator</span><span class="p">.</span><span class="n">examples</span><span class="p">.</span><span class="n">Foo</span> <span class="k">record</span> <span class="n">value</span>
            <span class="k">public</span> <span class="k">boolean</span> <span class="n">isFoo</span><span class="p">()</span> <span class="p">...</span>
            <span class="k">public</span> <span class="n">Foo</span> <span class="n">getFoo</span><span class="p">()</span> <span class="p">...</span>
            <span class="k">public</span> <span class="n">void</span> <span class="n">setFoo</span><span class="p">(</span><span class="n">Foo</span> <span class="n">value</span><span class="p">)</span> <span class="p">...</span>
    
            <span class="p">//</span> <span class="k">array</span> <span class="n">value</span> <span class="p">({</span> <span class="s2">"type"</span> <span class="p">:</span> <span class="s2">"array"</span><span class="p">,</span> <span class="s2">"items"</span> <span class="p">:</span> <span class="s2">"string"</span> <span class="p">})</span>
            <span class="k">public</span> <span class="k">boolean</span> <span class="n">isArray</span><span class="p">()</span> <span class="p">...</span>
            <span class="k">public</span> <span class="n">StringArray</span> <span class="n">getArray</span><span class="p">()</span> <span class="p">...</span>
            <span class="k">public</span> <span class="n">void</span> <span class="n">setArray</span><span class="p">(</span><span class="n">StringArray</span> <span class="n">value</span><span class="p">)</span> <span class="p">...</span>
    
            <span class="p">//</span> <span class="n">map</span> <span class="n">value</span> <span class="p">({</span> <span class="s2">"type"</span> <span class="p">:</span> <span class="s2">"map"</span><span class="p">,</span> <span class="s2">"values"</span> <span class="p">:</span> <span class="s2">"long"</span> <span class="p">})</span>
            <span class="k">public</span> <span class="k">boolean</span> <span class="n">isMap</span><span class="p">()</span> <span class="p">...</span>
            <span class="k">public</span> <span class="n">LongMap</span> <span class="n">getMap</span><span class="p">()</span> <span class="p">...</span>
            <span class="k">public</span> <span class="n">void</span> <span class="n">setMap</span><span class="p">(</span><span class="n">LongMap</span> <span class="n">value</span><span class="p">)</span> <span class="p">...</span>
        <span class="p">}</span>
    
        <span class="k">public</span> <span class="n">static</span> <span class="n">class</span> <span class="n">Fields</span> <span class="n">extends</span> <span class="n">PathSpec</span>
        <span class="p">{</span>
            <span class="p">...</span>
            <span class="k">public</span> <span class="n">Foo</span><span class="p">.</span><span class="n">Fields</span> <span class="n">Foo</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="p">```</span>

<span class="n">For</span> <span class="n">a</span> <span class="k">union</span> <span class="n">who</span><span class="err">’</span><span class="n">s</span> <span class="n">members</span> <span class="n">are</span> <span class="n">aliased</span><span class="p">,</span> <span class="n">the</span> <span class="n">generated</span> <span class="n">methods</span> <span class="n">will</span> <span class="n">use</span>
<span class="n">the</span> <span class="n">alias</span> <span class="n">instead</span> <span class="k">of</span> <span class="n">the</span> <span class="n">member</span><span class="err">’</span><span class="n">s</span> <span class="n">type</span> <span class="n">name</span> <span class="n">like</span> <span class="n">illustrated</span> <span class="n">below</span><span class="p">.</span>

    <span class="p">```</span>
    <span class="k">package</span> <span class="n">com</span><span class="p">.</span><span class="n">linkedin</span><span class="p">.</span><span class="n">pegasus</span><span class="p">.</span><span class="n">examples</span><span class="p">;</span>
    
    <span class="p">...</span>
    <span class="k">public</span> <span class="n">class</span> <span class="n">Foo</span> <span class="n">extends</span> <span class="n">RecordTemplate</span>
    <span class="p">{</span>
        <span class="p">...</span>
        <span class="k">public</span> <span class="n">final</span> <span class="n">static</span> <span class="n">class</span> <span class="n">UnionField</span> <span class="n">extends</span> <span class="n">UnionTemplate</span>
        <span class="p">{</span>
            <span class="k">public</span> <span class="n">UnionField</span><span class="p">()</span> <span class="p">...</span>
            <span class="k">public</span> <span class="n">UnionField</span><span class="p">(</span><span class="n">Object</span> <span class="n">data</span><span class="p">)</span> <span class="p">...</span>
    
            <span class="p">//</span> <span class="n">int</span> <span class="k">with</span> <span class="n">alias</span> <span class="p">({</span> <span class="s2">"type"</span> <span class="p">:</span> <span class="s2">"int"</span><span class="p">,</span> <span class="s2">"alias"</span> <span class="p">:</span> <span class="s2">"count"</span> <span class="p">})</span>
            <span class="k">public</span> <span class="n">UnionField</span> <span class="n">createWithCount</span><span class="p">(</span><span class="k">Integer</span> <span class="n">value</span><span class="p">)</span> <span class="p">...</span>
            <span class="k">public</span> <span class="k">boolean</span> <span class="n">isCount</span><span class="p">()</span> <span class="p">...</span>
            <span class="k">public</span> <span class="k">Integer</span> <span class="n">getCount</span><span class="p">()</span> <span class="p">...</span>
            <span class="k">public</span> <span class="n">void</span> <span class="n">setCount</span><span class="p">(</span><span class="k">Integer</span> <span class="n">value</span><span class="p">)</span> <span class="p">...</span>
    
            <span class="p">//</span> <span class="k">string</span> <span class="k">with</span> <span class="n">alias</span> <span class="p">({</span> <span class="s2">"type"</span> <span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span> <span class="s2">"alias"</span> <span class="p">:</span> <span class="s2">"message"</span> <span class="p">})</span>
            <span class="k">public</span> <span class="n">UnionField</span> <span class="n">createWithMessage</span><span class="p">(</span><span class="k">String</span> <span class="n">value</span><span class="p">)</span> <span class="p">...</span>
            <span class="k">public</span> <span class="k">boolean</span> <span class="n">isMessage</span><span class="p">()</span> <span class="p">...</span>
            <span class="k">public</span> <span class="k">String</span> <span class="n">getMessage</span><span class="p">()</span> <span class="p">...</span>
            <span class="k">public</span> <span class="n">void</span> <span class="n">setMessage</span><span class="p">(</span><span class="k">String</span> <span class="n">value</span><span class="p">)</span> <span class="p">...</span>
    
            <span class="p">//</span> <span class="n">another</span> <span class="k">string</span> <span class="k">with</span> <span class="n">alias</span> <span class="p">({</span> <span class="s2">"type"</span> <span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span> <span class="s2">"alias"</span> <span class="p">:</span> <span class="s2">"greeting"</span> <span class="p">})</span>
            <span class="k">public</span> <span class="n">UnionField</span> <span class="n">createWithGreeting</span><span class="p">(</span><span class="k">String</span> <span class="n">value</span><span class="p">)</span> <span class="p">...</span>
            <span class="k">public</span> <span class="k">boolean</span> <span class="n">isGreeting</span><span class="p">()</span> <span class="p">...</span>
            <span class="k">public</span> <span class="k">String</span> <span class="n">getGreeting</span><span class="p">()</span> <span class="p">...</span>
            <span class="k">public</span> <span class="n">void</span> <span class="n">setGreeting</span><span class="p">(</span><span class="k">String</span> <span class="n">value</span><span class="p">)</span> <span class="p">...</span>
        <span class="p">}</span>
    
        <span class="k">public</span> <span class="n">static</span> <span class="n">class</span> <span class="n">Fields</span> <span class="n">extends</span> <span class="n">PathSpec</span>
        <span class="p">{</span>
            <span class="p">...</span>
            <span class="k">public</span> <span class="n">Foo</span><span class="p">.</span><span class="n">Fields</span> <span class="n">Foo</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="p">```</span>

<span class="p">##</span> <span class="n">Custom</span> <span class="n">Java</span> <span class="n">Class</span> <span class="n">Binding</span> <span class="n">for</span> <span class="n">Primitive</span> <span class="n">Types</span>

<span class="n">A</span> <span class="n">typeref</span> <span class="n">can</span> <span class="n">also</span> <span class="n">be</span> <span class="n">used</span> <span class="k">to</span> <span class="n">define</span> <span class="n">a</span> <span class="n">custom</span> <span class="n">Java</span> <span class="n">class</span> <span class="n">binding</span> <span class="n">for</span> <span class="n">a</span>
<span class="n">primitive</span> <span class="n">type</span><span class="p">.</span> <span class="n">The</span> <span class="n">primary</span> <span class="n">intended</span> <span class="n">use</span> <span class="n">is</span> <span class="k">to</span> <span class="n">provide</span> <span class="n">a</span> <span class="n">more</span> <span class="n">developer</span>
<span class="n">friendly</span> <span class="n">experience</span> <span class="n">by</span> <span class="n">having</span> <span class="n">the</span> <span class="n">framework</span> <span class="n">perform</span> <span class="n">conversions</span> <span class="k">from</span>
<span class="n">primitive</span> <span class="n">type</span> <span class="k">to</span> <span class="n">a</span> <span class="n">more</span> <span class="n">friendly</span> <span class="n">Java</span> <span class="n">class</span> <span class="n">that</span> <span class="n">can</span> <span class="n">implement</span> <span class="n">methods</span>
<span class="n">for</span> <span class="n">manipulating</span> <span class="n">the</span> <span class="n">underlying</span> <span class="n">primitive</span> <span class="n">data</span><span class="p">.</span> <span class="n">Custom</span> <span class="n">Java</span> <span class="n">class</span>
<span class="n">binding</span> <span class="n">also</span> <span class="n">provides</span> <span class="n">additional</span> <span class="n">type</span><span class="p">-</span><span class="n">safety</span> <span class="n">by</span> <span class="n">allowing</span> <span class="n">typerefs</span> <span class="k">of</span> <span class="n">the</span>
<span class="n">same</span> <span class="n">primitive</span> <span class="n">type</span> <span class="k">to</span> <span class="n">be</span> <span class="n">bound</span> <span class="k">to</span> <span class="n">different</span> <span class="n">custom</span> <span class="n">Java</span> <span class="n">classes</span><span class="p">.</span> <span class="n">This</span>
<span class="n">enables</span> <span class="nf">compile</span> <span class="n">time</span> <span class="n">type</span><span class="p">-</span><span class="n">checking</span> <span class="k">to</span> <span class="n">disambiguate</span> <span class="n">typeref</span><span class="err">’</span><span class="n">s</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">g</span><span class="p">.</span> <span class="n">a</span> <span class="n">Urn</span>
<span class="n">typeref</span> <span class="k">to</span> <span class="n">a</span> <span class="k">string</span> <span class="n">can</span> <span class="n">be</span> <span class="n">bound</span> <span class="k">to</span> <span class="n">a</span> <span class="n">different</span> <span class="n">Java</span> <span class="n">class</span> <span class="n">than</span> <span class="n">a</span>
<span class="n">FileName</span> <span class="n">typeref</span> <span class="k">to</span> <span class="n">a</span> <span class="k">string</span><span class="p">.</span>

<span class="n">When</span> <span class="n">a</span> <span class="n">typeref</span> <span class="n">has</span> <span class="n">a</span> <span class="n">custom</span> <span class="n">Java</span> <span class="n">binding</span><span class="p">,</span> <span class="n">the</span> <span class="n">generated</span> <span class="n">Java</span> <span class="n">data</span>
<span class="n">templates</span> <span class="n">that</span> <span class="n">reference</span> <span class="n">this</span> <span class="n">type</span> <span class="n">will</span> <span class="n">accept</span> <span class="k">and</span> <span class="n">return</span> <span class="k">parameters</span> <span class="k">of</span>
<span class="n">the</span> <span class="n">custom</span> <span class="n">Java</span> <span class="n">class</span> <span class="n">instead</span> <span class="k">of</span> <span class="n">standard</span> <span class="n">Java</span> <span class="n">class</span> <span class="n">for</span> <span class="n">the</span> <span class="n">primitive</span>
<span class="n">type</span><span class="p">.</span> <span class="n">The</span> <span class="n">value</span> <span class="n">stored</span> <span class="k">in</span> <span class="n">the</span> <span class="n">underlying</span> <span class="n">DataMap</span> <span class="k">or</span> <span class="n">DataList</span> <span class="n">will</span> <span class="n">always</span>
<span class="n">be</span> <span class="k">of</span> <span class="n">the</span> <span class="n">corresponding</span> <span class="n">primitive</span> <span class="n">Java</span> <span class="n">type</span> <span class="p">(</span><span class="k">not</span> <span class="n">the</span> <span class="n">custom</span> <span class="n">Java</span> <span class="n">type</span><span class="p">.)</span>

<span class="n">A</span> <span class="n">custom</span> <span class="n">Java</span> <span class="n">class</span> <span class="n">binding</span> <span class="n">is</span> <span class="n">declared</span> <span class="n">by</span><span class="p">:</span>

  <span class="p">-</span> <span class="n">defining</span> <span class="n">a</span> <span class="n">typeref</span> <span class="k">of</span> <span class="n">the</span> <span class="n">primitive</span> <span class="n">type</span><span class="p">,</span>
  <span class="p">-</span> <span class="n">adding</span> <span class="n">a</span> <span class="err">“</span><span class="n">java</span><span class="err">”</span> <span class="n">attribute</span> <span class="n">whose</span> <span class="n">value</span> <span class="n">is</span> <span class="n">a</span> <span class="n">map</span> <span class="k">to</span> <span class="n">the</span> <span class="n">typeref</span>
    <span class="n">declaration</span><span class="p">,</span>
  <span class="p">-</span> <span class="n">adding</span> <span class="n">a</span> <span class="err">“</span><span class="n">class</span><span class="err">”</span> <span class="n">attribute</span> <span class="k">to</span> <span class="n">the</span> <span class="err">“</span><span class="n">java</span><span class="err">”</span> <span class="n">map</span> <span class="n">whose</span> <span class="n">value</span> <span class="n">is</span> <span class="n">a</span> <span class="k">string</span>
    <span class="n">that</span> <span class="n">identifies</span> <span class="n">the</span> <span class="n">name</span> <span class="k">of</span> <span class="n">custom</span> <span class="n">Java</span> <span class="n">class</span><span class="p">.</span>

<span class="n">A</span> <span class="n">custom</span> <span class="n">class</span> <span class="n">must</span> <span class="n">meet</span> <span class="n">the</span> <span class="n">following</span> <span class="k">requirements</span><span class="p">:</span>

<span class="m">1.</span>  <span class="n">Instances</span> <span class="k">of</span> <span class="n">the</span> <span class="n">custom</span> <span class="n">class</span> <span class="n">must</span> <span class="n">be</span> <span class="n">immutable</span><span class="p">.</span>
<span class="m">2.</span>  <span class="n">A</span> <span class="n">coercer</span> <span class="n">must</span> <span class="n">be</span> <span class="n">defined</span> <span class="n">that</span> <span class="n">can</span> <span class="n">coerce</span> <span class="n">the</span> <span class="n">primitive</span> <span class="n">Java</span> <span class="n">class</span>
    <span class="k">of</span> <span class="n">the</span> <span class="n">type</span> <span class="k">to</span> <span class="n">the</span> <span class="n">custom</span> <span class="n">Java</span> <span class="n">class</span> <span class="k">of</span> <span class="n">the</span> <span class="n">type</span><span class="p">,</span> <span class="k">in</span> <span class="n">both</span> <span class="n">the</span> <span class="n">input</span>
    <span class="k">and</span> <span class="n">output</span> <span class="n">directions</span><span class="p">.</span> <span class="n">The</span> <span class="n">coercer</span> <span class="n">implements</span> <span class="n">the</span> <span class="p">`</span><span class="n">DirectCoercer</span><span class="p">`</span>
    <span class="n">interface</span><span class="p">.</span>
<span class="m">3.</span>  <span class="n">An</span> <span class="n">instance</span> <span class="k">of</span> <span class="n">the</span> <span class="n">coercer</span> <span class="n">must</span> <span class="n">be</span> <span class="n">registered</span> <span class="k">with</span> <span class="n">the</span> <span class="n">data</span> <span class="n">template</span>
    <span class="n">framework</span><span class="p">.</span>

<span class="p">&lt;</span><span class="c1">!-- end list --&gt;
</span>
    <span class="p">```</span>
    <span class="p">{</span>
      <span class="s2">"type"</span> <span class="p">:</span> <span class="s2">"typeref"</span><span class="p">,</span>
      <span class="s2">"name"</span> <span class="p">:</span> <span class="s2">"CustomPoint"</span><span class="p">,</span>
      <span class="s2">"ref"</span>  <span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
      <span class="s2">"java"</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">"class"</span> <span class="p">:</span> <span class="s2">"CustomPoint"</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="p">```</span>

    <span class="p">```</span>
    <span class="p">/</span>
    <span class="p">//</span> <span class="n">The</span> <span class="n">custom</span> <span class="n">class</span>
    <span class="p">//</span> <span class="n">It</span> <span class="n">has</span> <span class="k">to</span> <span class="n">be</span> <span class="n">immutable</span><span class="p">.</span>
    <span class="p">//</span>
    <span class="k">public</span> <span class="n">class</span> <span class="n">CustomPoint</span>
    <span class="p">{</span>
      <span class="n">private</span> <span class="n">int</span> <span class="n">_x</span><span class="p">;</span>
      <span class="n">private</span> <span class="n">int</span> <span class="n">_y</span><span class="p">;</span>
    
      <span class="k">public</span> <span class="n">CustomPoint</span><span class="p">(</span><span class="k">String</span> <span class="n">s</span><span class="p">)</span>
      <span class="p">{</span>
        <span class="k">String</span> <span class="n">parts</span><span class="p">[]</span> <span class="p">=</span> <span class="n">s</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">);</span>
        <span class="n">_x</span> <span class="p">=</span> <span class="k">Integer</span><span class="p">.</span><span class="nf">parseInt</span><span class="p">(</span><span class="n">parts</span><span class="s2">"0"</span><span class="p">:</span><span class="m">0</span><span class="p">);</span>
        <span class="n">_y</span> <span class="p">=</span> <span class="k">Integer</span><span class="p">.</span><span class="nf">parseInt</span><span class="p">(</span><span class="n">parts</span><span class="s2">"1"</span><span class="p">:</span><span class="m">1</span><span class="p">);</span>
      <span class="p">}</span>
    
      <span class="k">public</span> <span class="n">CustomPoint</span><span class="p">(</span><span class="n">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">int</span> <span class="n">y</span><span class="p">)</span>
      <span class="p">{</span>
        <span class="n">_x</span> <span class="p">=</span> <span class="n">x</span><span class="p">;</span>
        <span class="n">_y</span> <span class="p">=</span> <span class="n">y</span><span class="p">;</span>
      <span class="p">}</span>
    
      <span class="k">public</span> <span class="n">int</span> <span class="n">getX</span><span class="p">()</span>
      <span class="p">{</span>
        <span class="n">return</span> <span class="n">_x</span><span class="p">;</span>
      <span class="p">}</span>
    
      <span class="k">public</span> <span class="n">int</span> <span class="n">getY</span><span class="p">()</span>
      <span class="p">{</span>
        <span class="n">return</span> <span class="n">_y</span><span class="p">;</span>
      <span class="p">}</span>
    
      <span class="p">//</span> <span class="n">Implement</span> <span class="n">equals</span><span class="p">,</span> <span class="n">hashCode</span><span class="p">,</span> <span class="n">toString</span><span class="p">,</span> <span class="p">...</span>
    
      <span class="p">//</span>
      <span class="p">//</span> <span class="n">The</span> <span class="n">custom</span> <span class="n">class</span><span class="s1">'s DirectCoercer.
      //
      public static class CustomPointCoercer implements DirectCoercer&lt;CustomPoint&gt;
      {
        @Override
        public Object coerceInput(CustomPoint object)
          throws ClassCastException
        {
          return object.toString();
        }
    
        @Override
        public CustomPoint coerceOutput(Object object)
          throws TemplateOutputCastException
        {
          if (object instanceof String == false)
          {
            throw new TemplateOutputCastException("Output " + object + 
                                                  " is not a string, and cannot be coerced to " + 
                                                  CustomPoint.class.getName());
          }
          return new CustomPoint((String) object);
        }
      }
    
      //
      // Automatically register Java custom class and its coercer.
      //
      static
      {
        Custom.registerCoercer(CustomPoint.class, new CustomPointCoercer());
      }
    }
    ```

## Fields class

The code generator also generates a `Fields` class within the generated
class for certain complex types. The primary use case for the `Fields`
class is to provide a type-safe way to refer or identify a field within
a record or a member of a union. The `Fields` class of a record is
accessed through the generated `fields()` method of the generated class
for a record. Only record types have the generated `fields()` method.

If there are nested complex types, a path to a particular nested field
may be obtained by chaining method invocations on `Fields` classes along
the path to the field, e.g. `Foo.fields().barField().bazField()`. The
path may be used to specify the nested fields to return from a resource
request, i.e. deep projection.

The following table summarizes which complex types will have a generated
`Fields` class and the content of the `Fields`
class.

| Complex type &lt;br /&gt; | Whether type will have a generated Fields class &lt;br /&gt;                                                           | Content of generated Fields class &lt;br /&gt;                                               |
| ------------------- | ---------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------- |
| record &lt;br /&gt;       | A `Fields` class always generated. &lt;br /&gt;                                                                        | A method returning a `PathSpec` will be generated for each field of the record. &lt;br /&gt; |
| union &lt;br /&gt;        | A `Fields` class always generated. &lt;br /&gt;                                                                        | A method returning a `PathSpec` will be generated for each member of the union. &lt;br /&gt; |
| array &lt;br /&gt;        | A `Fields` class will be generated if the array directly or indirectly contains a nested record or union. &lt;br /&gt; | An `items()` method returning a `PathSpec` will be generated for the array. &lt;br /&gt;     |
| map &lt;br /&gt;          | A `Fields` class will be generated if the map directly or indirectly contains a nested record or union. &lt;br /&gt;   | A `values()` method returning a `PathSpec` will be generated for the map.              |

## Clone Method

For the classes that wrap `DataMap` or `DataList`, their clone method
will clone the underlying `DataMap` or `DataList` and then create and
return a new `DataTemplate` of the same class to wrap the clone. This
clone operation performs a shallow copy.

## Escaping for Reserved Words

When symbols such as schema names or enum symbol names are the same as
one of the reserved words in Java, the code generator will escape these
symbols by appending an underscore (“_”) to the name to obtain the Java
name of the symbol.

## Exceptions

The Data layer can throw two exceptions:

  - `java.lang.ClassCastException` - This exception is thrown if the
    input argument to a method is not the expected type, cannot be cast
    or coerced to the expected type.
  - `com.linkedin.data.TemplateOutputCastException` - This exception if
    the underlying data cannot be wrapped, cast or coerced to the type
    to type of the output argument.

&lt;a name="RunningtheCodeGenerator"&gt;&lt;/a&gt;

## Running the Code Generator

The code generator that generates the Java bindings is the
`com.linkedin.pegasus.generator.PegasusDataTemplateGenerator` class.

The arguments to the main method of this class are `targetDirectoryPath
[sourceFile or schemaName]+`".

  - `targetDirectoryPath` provides the root of the output directory for
    Java source files generated by the code generator. The output
    directory structure will follow the Java convention, with Java
    source files residing in sub-directories corresponding to the
    package name of the classes in the Java source files.
  - `sourceFile` provides the name of a file. Files containing schemas
    should have an `.pdsc` extension. Although a file name provided as
    an argument to the code generator need not end with `.pdsc`, only
    `.pdsc` files will be read by the schema resolver when trying to
    resolve a name to schema. Java type: `String`.
  - `schemaName` provides the fully qualified name of a schema. The
    schema resolver computes a relative path name from this argument and
    enumerate through resolver paths to locate a file with this relative
    name. If a file is found, the code generator will parse the file
    looking for a schema with the specified name. Java type: `String[]`.

The resolver path is provided by the “generator.resolver.path” property.
Its format is the same as the format for Java classpath. Each path is
separated by a colon (“:”). Only file system directory paths may be
specified (i.e. the resolver does not comprehend `.jar` files in the
resolver path.). You can set this in java by `System.setProperty()`.

The dependencies of the code generator are:

  - `com.sun.codemodel:codemodel:2.2`
  - `org.codehaus.jackson-core-asl:jackson-core-asl:1.4.0`
  - `com.linkedin.pegasus:cow`
  - `com.linkedin.pegasus:r2`
  - `com.linkedin.pegasus:generator`

### Running the Code Generator from Command Line

### Running the Code Generator with Gradle

A `dataTemplate.gradle` script is available in the `build_script/`
directory of pegasus. To use it, add the script to your project, then
add this to your `build.gradle` file:

    ```
    apply from: "${buildScriptDirPath}/dataTemplate.gradle"
    ```

and put the `.pdsc` files in a directory structure of the form:
‘src/\\\&lt;sourceset\\\&gt;/pegasus’, where typically it would be
`src/main/pegasus`. The plugin is set to trigger on this sort of
directory structure and have the files laid out like a java source tree,
ie if the namespace of my foo schema is “com.linkedin.foo.rest.api”, the
file would be located at
`src/main/pegasus/com/linkedin/foo/rest/api/Foo.pdsc`. See
`restli-example-api/build.gradle` in the Pegasus codebase for an
example. This script will generate the required Java classes before the
compileJava task, so that other classes can refer to it.

Note this will only generate the data templates, but further steps will
be needed to generate the rest.li IDL and the clientModel.

# Avro Translation

## Translating Schemas to and from Avro

The schema and data translators inspect your classpath to determine
which version of avro you are using and require you have the matching
pegasus \`data-avro-&lt;avro_version&gt;\` adapter module in your classpath.

For example, if you are using avro 1.6, you must add a dependency on the
pegasus \`data-avro-1_6\` module:

</span></code></pre></div></div>
<p>com.linkedin.pegasus:data-avro-1_6:<current-version></current-version></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
If you are using avro 1.4, it’s adaptor module is included by default so
you don’t need to depend on it explicitly.

Schema translation is implemented by the
\`com.linkedin.data.avro.SchemaTranslator\` class.

For example, to convert from a avro schema, do:

</code></pre></div></div>
<p>DataSchema pegasusDataSchema =
SchemaTranslator.avroToDataSchema(avroSchema, options);</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
And to convert to an avro schema, do:

</code></pre></div></div>
<p>Schema avroSchema = SchemaTranslator.dataToAvroSchema(pegasusDataSchema,
options);</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
## Translating Data to and from Avro

Data translation is implemented by the
\`com.linkedin.data.avro.DataTranslator\` class. Translating data
requires that one has schemas for both formats (.avsc and .pdsc). Please
see above section section about translating schemas for details. Once
both schemas are available, data can be converted.

For example, to convert avro data, do:

</code></pre></div></div>
<p>DataTranslator.dataMapToGenericRecord(data, pegasusDataSchema,
avroSchema); // for dataMaps<br />
// OR<br />
GenericRecord avroRecord =
DataTranslator.dataMapToGenericRecord(recordTemplate.data(),
recordTemplate(), avroSchema); // for record templates</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
And to convert from avro data, do:  
</code></pre></div></div>
<p>DataMap pegasusData = genericRecordToDataMap(avroRecord,
pegasusDataSchema, avroSchema);<br />
```</p>

                     </div>
                   </div>
</div>



      <footer class="page-footer">
    <div class="container">
      <div class="row">
        <div class="col s6">
          <h5>Rest.li</h5>
          <p class="text-lighten-4">Rest.li is an open source REST framework for building robust, scalable RESTful architectures using type-safe bindings and asynchronous, non-blocking IO. Rest.li fills a niche for applying RESTful principles at scale with an end-to-end developer workflow for building REST APIs, which promotes clean REST practices, uniform interface design and consistent data modeling.</p>
        </div>
        <div class="col s5 offset-s1">
          <h5 class="black-text">Community</h5>
          <ul>
              <li>Github <a class="" href="https://github.com/linkedin/rest.li">Rest.li</a></li>
              <li>Linkedin <a class="" href="http://www.linkedin.com/groups/Restli-4855943">Rest.li Group</a></li>
            <li>Follow us on twitter: <a class="" href="https://twitter.com/rest_li"> @rest_li</a></li>
            <li>Issue Tracking: <a class="" href="https://github.com/linkedin/rest.li/issues">github issue tracking</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-copyright">
        <div class="container">
            <div>
                <span style="text-align: right; float: left">
                Copyright © 2018. Powered by <a target="_blank" href="http://jekyllrb.com/" class="black-text text-lighten-3">Jekyll</a>
                </span> 
            </div>
        </div>  
    </div>
</footer>
      
    <!--  Scripts-->                                                                               
<script src="/js/jquery.min.js"></script>
<script src="/js/materialize.min.js"></script>
<script src="/js/init.js"></script>

  </body>

</html>
