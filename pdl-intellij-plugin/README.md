IntelliJ IDEA Plugin
--------------------

Features:

* `.pdl` language support
* Syntax highlighting, incl. config
* Code formatting & brace matching, incl. code style config
* Follow/find references
* Reference auto-complete, incl. automatic import statement generation
* Syntax errors for unrecognized type references
* Go to type
* Find usages
* New `pdlPsiFile` templates: `"New" > "Pegasus Data Language File"`
* Doc comment support
* Optimize imports
* Reference support of types declared in `.pdsc` files

Making changes to the Schema language
-------------------------------------

Update `src/main/grammar/Pdl.flex` and/or `src/main/grammar/Pdl.bnf`, then run the `generateGrammar` task in Gradle.
This task is automatically run as part of the standard `idea` and `build` tasks.

See [Grammar Kit](https://github.com/JetBrains/Grammar-Kit) for details on how to make changes
to the lexer and parser.

Installation
------------

The PDL plugin can be installed directly from IntelliJ:

```
Preferences -> Plugins -> Browse Repositories... -> Search for "Pegasus data language" -> Click install
```

*NOTE:* The Courier plugin is available via the
[JetBrains plugin repository](https://plugins.jetbrains.com/plugin/8005?pr=).

Development
-----------

Setup:

* Install the Grammar-Kit IntelliJ IDEA Plugin.

TODO
----

* [ ] Flesh out documentation
* [ ] Improve quality of syntax error messages
* [ ] Add java lang integration for jumping between `.pdl`s and generated record template class symbols
* [ ] Add Documentation provider
* [ ] Add namespace error checking:

```
// Find the package of the file's directory and check if it matches the namespace:
PsiPackage ns = JavaDirectoryService.getInstance().getPackage(directory);
return ns != null ? ns.getQualifiedName() : "UNKNOWN";
```

### Plugin directory structure

```
├── pdl-intellij-plugin/
│   ├── build.gradle
│   ├── plugin_module.iml (will be generated by 'ligradle idea')
│   ├── src
│   │   ├── main
│   │   │   ├── grammars
│   │   │   │   ├── <pdl grammar definitions>
│   │   │   ├── java
│   │   │   │   ├── <plugin source code>
│   │   │   ├── resources
│   │   │   │   ├── META-INF
│   │   │   │   │   ├── plugin.xml (Main Intellij pdlPsiFile for plugin declaration)
│   │   │   │   ├── messages (Contains localization properties files)
│   │   │   │   │   ├── pdlplugin.properties (default locale messages)
│   │   ├── mainGeneratedGrammar (Generated sources root)
│   │   │   ├── java
│   │   │   │   ├── <generated grammar source code>
│   │   ├── test
│   │   │   ├── java (Tests source code)
│   │   │   ├── resources (Tests related resources)
```

### References

To learn about developing IntelliJ plugins refer to the [IntelliJ Platform SDK
Documentation](http://www.jetbrains.org/intellij/sdk/docs/index.html).
