<!DOCTYPE html>
<html lang="en">

  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-128576866-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-128576866-1');
    </script>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>

    <title>Modeling Resources with Rest.li</title>
    <meta name="description" content="This document will describe how to model a resource using Rest.li." />

    <link rel="icon" type="image/png" href="/rest.li/assets/images/icon_pegasus.png">
  
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" type="text/css" media="screen,projection" href="/rest.li/assets/css/main.css">
    <link rel="canonical" href="/rest.li/modeling/modeling" />
    <link rel="alternate" type="application/rss+xml" title="rest.li" href="/rest.li/feed.xml" />

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

    <script src="//code.jquery.com/jquery-3.0.0.min.js"></script>
    <script src="/rest.li/assets/js/search-input.js"></script>
    

    
    <script>
       $(function() {
          $("h1").addClass("no_toc");
       });
    </script>
</head>


  <body>

    <nav class="dark-grey" role="navigation">
    <div class="nav-wrapper container"><a id="logo-container" class="brand-logo" href="/rest.li/">Rest.li</a>
      <ul class="right hide-on-med-and-down">
        
        <li>
          <a href="/rest.li/get_started/quick_start" >
            Getting Started
          </a>
        </li>
        
        <li>
          <a href="/rest.li/user_guide/server_architecture" >
            User Guide
          </a>
        </li>
        
        <li>
          <a href="/rest.li/spec/protocol" >
            API Reference
          </a>
        </li>
        
        <li>
          <a href="/rest.li/contribute/howto" >
            Contribute
          </a>
        </li>
        
          <li>
            <div class="center row" >
              <div class="col s12 ">
                <div class="row">
                  <div class="input-field col s6 s12 min">
                      <i id="search-txt" class="material-icons prefix">search</i>
                      <input type="text" id="search-input">
                    </div>
                  </div>
                </div>
              </div>
          </li>
          <li>
              <a id="github-menu" href="http://github.com/linkedin/rest.li/" >
                   <i class="fa fa-github"></i>
                </a>
          </li>
          </ul>
      <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
</nav>



        <div class="container">
        <div class="row">
                <div class="col s12 m4 l3"> 
               
                    
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">User Guide</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/user_guide/server_architecture">Rest.li Architecture</a></li>
                       
                         <li><a href="/rest.li/user_guide/restli_server">Rest.li Server</a></li>
                       
                         <li><a href="/rest.li/user_guide/restli_client">Rest.li Client Framework</a></li>
                       
                         <li><a href="/rest.li/user_guide/unstructured_data">Unstructured Data</a></li>
                       
                         <li><a href="/rest.li/Components">Components</a></li>
                       
                         <li><a href="/rest.li/Asynchronous-Servers-and-Clients-in-Rest_li">Asynchronous in Rest.li</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Data Schemas</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/pdl_schema">PDL Schema</a></li>
                       
                         <li><a href="/rest.li/pdsc_syntax">PDSC Syntax</a></li>
                       
                         <li><a href="/rest.li/pdl_migration">Migrating from PDSC to PDL</a></li>
                       
                         <li><a href="/rest.li/avro_translation">Avro Translation</a></li>
                       
                         <li><a href="/rest.li/java_binding">Java Binding</a></li>
                       
                         <li><a href="/rest.li/annotation_processor">Schema Annotation Processor</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Modeling Resources</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/modeling/modeling">Modeling Resources</a></li>
                       
                         <li><a href="/rest.li/modeling/compatibility_check">Snapshots and Resource Compatibility Checking</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Data</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/how_data_is_serialized_for_transport">How Data is Serialized for Transport</a></li>
                       
                         <li><a href="/rest.li/how_data_is_represented_in_memory">How Data is Represented in Memory</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Main concepts</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/Rest_li-Filters">Filters</a></li>
                       
                         <li><a href="/rest.li/Projections">Projections</a></li>
                       
                         <li><a href="/rest.li/pathspec">PathSpecs</a></li>
                       
                         <li><a href="/rest.li/Validation-in-Rest_li">Validation</a></li>
                       
                         <li><a href="/rest.li/Attachment-Streaming">Attachment Streaming</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Mutli-language</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/multi_language_compatibility_matrix">Compatibility Matrix</a></li>
                       
                         <li><a href="/rest.li/test_suite">Test Suite</a></li>
                       
                         <li><a href="https://github.com/mchen07/restli-csharp">C#</a></li>
                       
                         <li><a href="/rest.li/Scala-Integration">Scala Integration</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Testing</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/Writing-unit-tests-for-Rest_li-clients-and-servers">Writing Unit Tests</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">How to</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/Send-Rest_li-Request-Query-In-Request-Body">Send Request Query in the Body</a></li>
                       
                         <li><a href="/rest.li/How-to-use-projections-in-Java">Use Projections</a></li>
                       
                         <li><a href="/rest.li/Rest_li_Avro_conversions">Avro Conversion</a></li>
                       
                         <li><a href="/rest.li/Compression">Compression</a></li>
                       
                         <li><a href="/rest.li/Rest_li-2_x-upgrade-instructions">Migrate to Rest.li 2.x</a></li>
                       
                         <li><a href="/rest.li/testsuite_how_to">Test Suite</a></li>
                       
                         <li><a href="/rest.li/howto_add_new_language">Test Suite - Add New Language</a></li>
                       
                         <li><a href="/rest.li/user_guide/service_errors_java">Configure Service Errors in Java</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">FAQ</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/Data-FAQ">Rest.li - FAQ</a></li>
                       
                         <li><a href="/rest.li/testsuite_troubleshooting">Test Suite - Troubleshooting</a></li>
                       
                        </ul>
                     </ul>
                        
                    </div>
                     <div class="markdown-body col s12 m3 l9">
                            <h1 id="modeling-resources-with-restli">Modeling Resources with Rest.li</h1>

<h2 id="contents">Contents</h2>

<ul>
  <li><a href="#restlis-uniform-interface">Rest.li’s Uniform Interface</a></li>
  <li><a href="#restli-modeling-tips">Rest.li Modeling Tips</a></li>
  <li><a href="#common-modeling-challenges">Common Modeling Challenges</a></li>
  <li><a href="#options-for-modeling-entity-relationships">Options for Modeling Entity Relationships</a></li>
  <li><a href="#general-tips">General Tips</a></li>
  <li><a href="#when-all-else-fails-non-uniform-interfaces">When All Else Fails: Non-Uniform Interfaces</a></li>
</ul>

<p>This document will describe how to model a resource using Rest.li. Before reading this page, you may want to get a feel for how to write and build code with Rest.li by reading the <a href="/rest.li/start/step_by_step">Tutorial to Create a Server and Client</a>.</p>

<h2 id="restlis-uniform-interface">Rest.li’s Uniform Interface</h2>

<p>Rest.li is intended to foster the design of Uniform Interfaces. The idea
of Uniform Interfaces is core to REST because it establishes standard
patterns and behaviors that allow clients to explore and make sense of
interfaces that they have never seen before.</p>

<p>Rest.li’s approach to uniform interface is based on REST principles and
comprises the following:</p>

<ul>
  <li>Resource Identifiers</li>
  <li>Self-Descriptive Messages</li>
  <li>Resource Methods</li>
  <li>Resource Types</li>
</ul>

<h3 id="resource-identifiers">Resource Identifiers</h3>

<p>Some resource types have an identifier, a name by which it can be
accessed. Rest.li resource identifiers are URIs that follow specific
patterns.</p>

<h3 id="self-descriptive-messages">Self-Descriptive Messages</h3>

<p>Rest.li messages are built with a JSON-encoded body, which provides a
self-describing structure for the data in the message. The Rest.li
framework provides convenient access to messages using Pegasus
RecordTemplates.</p>

<p>Since Rest.li is built on HTTP, messages may also contain metadata in
HTTP headers.</p>

<h3 id="resource-methods">Resource Methods</h3>

<p>Resources are the nouns in the Rest.li world, and Resource Methods are
the verbs. Rest.li provides a standard set of Resource Methods that
describe what clients may do with the resources. These verbs are
different than the HTTP verbs (GET, POST, PUT, DELETE, and so on) but
map onto them (CREATE is a POST, UPDATE is a PUT, FIND is a GET).</p>

<ul>
  <li>CREATE is used to create an entity. Create requires that the
resource identifier is assigned by the server. (HTTP verb: POST)</li>
  <li>GET is used to read an entity. Get may require the client to provide
the resource identifier, depending on the resource type. (HTTP verb:
GET)</li>
  <li>UPDATE is used to modify an entity. Update may require the client to
provide the resource identifier, depending on the resource type.
(HTTP verb: PUT)</li>
  <li>DELETE is used to remove an entity. Delete may require the client to
provide the resource identifier, depending on the resource type.
(HTTP verb: DELETE)</li>
  <li>FIND is used to search for entities. Find allows the client to
provide query parameters for the search. Find methods return a list
of entities. (HTTP verb: GET)</li>
</ul>

<p>CREATE, GET, UPDATE, DELETE and FIND also have a corresponding batch method.
For example, BATCH_GET is used to read multiple entities and requires
the client to provide a list of resource identifiers. It returns a map
from identifiers to entities.</p>

<h3 id="resource-types">Resource Types</h3>

<p>Each Rest.li resource endpoint is one of the following types:
Collection, Simple, Association. Additionally, each resource endpoint
may be a sub-resource of any other resource. These resources can be implemented with synchronous or asynchronous templates. Asynchronous is recommended if the code implementation is non-blocking.</p>

<h4 id="collection">Collection</h4>

<p>Collection is the most frequently used resource type. A collection
models a key/value map of entities. It may be helpful to think of a
database table with a primary key. Collections have a key type, used for
identifying entities in the collection, and a value type used to
represent the entity itself.</p>

<p>Collections can support all of the Rest.li resource methods described
above.</p>

<p>Synchronous collections are declared by creating a class that extends
<code class="highlighter-rouge">CollectionResourceTemplate</code> (or <code class="highlighter-rouge">ComplexKeyResourceTemplate</code> for complex
keys, see below for details).</p>

<p>Asynchronous collections are declared by creating a class that extends <code class="highlighter-rouge">CollectionResourceAsyncTemplate</code> or <code class="highlighter-rouge">CollectionResourceTaskTemplate</code>.</p>

<p>For example:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RestLiCollection</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="err">“</span><span class="n">items</span><span class="err">”</span><span class="o">,</span> <span class="err">…</span><span class="o">)</span>  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ItemsResource</span> <span class="kd">extends</span> <span class="nc">CollectionResourceTaskTemplate</span><span class="err">\</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span>
<span class="nc">Item</span><span class="err">\</span><span class="o">&gt;</span>  
</code></pre></div></div>

<p>Defines an asynchronous resource with a URI of the form:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/items/{longKey}  
</code></pre></div></div>

<p>For keys with complex hierarchical data structures, use
<code class="highlighter-rouge">ComplexKeyResourceTaskTemplate</code>.</p>

<p>For Example:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RestLiCollection</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="err">“</span><span class="n">widgets</span><span class="err">”</span><span class="o">,</span> <span class="err">…</span><span class="o">)</span>  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WidgetResource</span> <span class="kd">implements</span> <span class="kd">extends</span>
<span class="nc">ComplexKeyResourceTaskTemplate</span><span class="err">\</span><span class="o">&lt;</span><span class="nc">WidgetKey</span><span class="o">,</span> <span class="nc">EmptyRecord</span><span class="o">,</span> <span class="nc">Widget</span><span class="err">\</span><span class="o">&gt;</span>  
</code></pre></div></div>

<p>Defines a resource with a URI of the
form:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/widgets/number={number}\&amp;thing.make={thing.make}\&amp;thing.model={thing.model}  
</code></pre></div></div>

<h4 id="simple">Simple</h4>

<p>A simple resource models a singleton entity in a particular scope.
Simple resources support the Rest.li resource methods GET, UPDATE and
DELETE.</p>

<p>Synchronous simple resources are declared by creating a class that extends
<code class="highlighter-rouge">SimpleResourceTemplate</code>.</p>

<p>Asynchronous simple resources are declared by creating a class that extends <code class="highlighter-rouge">SimpleResourceAsyncTemplate</code> or <code class="highlighter-rouge">SimpleResourceTaskTemplate</code>.</p>

<p>For example:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RestLiSimple</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="err">“</span><span class="n">selectedItem</span><span class="err">”</span><span class="o">,</span> <span class="err">…</span><span class="o">)</span>  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SelectedItemResource</span> <span class="kd">extends</span> <span class="nc">SimpleResourceTaskTemplate</span><span class="o">&lt;</span><span class="nc">Item</span><span class="o">&gt;</span>  
</code></pre></div></div>

<p>Defines a resource with a URI of the form:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/selectedItem  
</code></pre></div></div>

<h4 id="association">Association</h4>

<p>Associations are structured like specialized collections but are used
for a different modeling purpose. Associations model relationships
between entities. Associations are like mapping tables in a database.
Associations have a compound key consisting of multiple partial keys.
Each partial key references one of the associated entities. Like
collections, associations have a value type. However, in the case of
associations, the value type is used to model attributes on the
relationship between entities.</p>

<p>Associations support all of the Rest.li resource methods except for
Create. Create requires the server to assign the resource identifier,
which is incompatible with the constraint that an association’s partial
keys are “foreign” keys from the referenced entities. Instead of using
Create, new association relationships are made by using Update, which
allows the client to provide the resource identifier.</p>

<p>Asynchronous association resources are declared by creating a class that extends <code class="highlighter-rouge">AssociationResourceAsyncTemplate</code> or <code class="highlighter-rouge">AssociationResourceTaskTemplate</code>.</p>

<p>For example:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RestLiAssociation</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"myRelations"</span><span class="o">,</span> <span class="n">assocKeys</span><span class="o">={</span><span class="err">`</span><span class="nc">Key</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="err">“</span><span class="n">key1</span><span class="err">”</span><span class="o">,</span> <span class="n">type</span><span class="o">=</span><span class="kt">long</span><span class="o">.</span><span class="na">class</span><span class="o">),</span> <span class="nd">@Key</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="err">“</span><span class="n">key2</span><span class="err">”</span><span class="o">,</span> <span class="n">type</span><span class="o">=</span><span class="kt">long</span><span class="o">.</span><span class="na">class</span><span class="o">)},</span> <span class="err">…</span><span class="o">)</span>  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyRelationResource</span> <span class="kd">extends</span> <span class="nc">AssociationResourceTaskTemplate</span><span class="o">&lt;</span><span class="nc">Relation</span><span class="o">&gt;</span> <span class="o">{</span> <span class="err">…</span> <span class="o">}</span>  
</code></pre></div></div>

<p>Defines a child resource with a URI of the form:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/myRelations/key1={longKey1}\&amp;key2={longKey2}  
</code></pre></div></div>
<h4 id="asynchronous-resources">Asynchronous resources</h4>
<p>Asynchronous Rest.li resources should be used when the downstream implementations are non-blocking. This means that your implementation should not be blocking while waiting for any downstream service. If the downstream service has an asynchronous implementation, please use that.</p>

<p>There are asynchronous resource templates for Collection, Simple, Association, and ComplexKey resources.</p>

<p>Task templates should be used when the resource implementation will leverage ParSeq <code class="highlighter-rouge">Task</code>s.</p>

<p>Async templates should be used when the resource implementation will leverage <code class="highlighter-rouge">Callback</code>s.</p>

<p>Please see <a href="/rest.li/Asynchronous-Servers-and-Clients-in-Rest_li/async-server-implementations">Async Server Implementations</a> for more information on implementation.</p>

<h4 id="child-resources-sub-resources">Child Resources (Sub-resources)</h4>

<p>Child resources are resources that are referenced through a parent
resource. In Rest.li, the resource identifier for a child resource is an
extension of the resource identifier for the parent resource. This means
that the child resource has access to all of the information used to
access the parent resource, including entity keys. A common pattern for
using child resources is when accessing an element of a collection
requires the key of another collection (the parent resource).</p>

<p>For example:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RestLiCollection</span><span class="o">(</span><span class="n">parent</span><span class="o">=</span><span class="nc">MyParentResource</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">name</span><span class="o">=</span><span class="err">“</span><span class="n">mySubResources</span><span class="err">”</span><span class="o">,</span><span class="err">…</span><span class="o">)</span>  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MySubResource</span> <span class="kd">extends</span> <span class="nc">CollectionResourceTemplate</span><span class="err">\</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span><span class="nc">MySub</span><span class="err">\</span><span class="o">&gt;</span> <span class="o">{</span> <span class="err">…</span> <span class="o">}</span>  
</code></pre></div></div>

<p>Defines a child resource with a URI of the form:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/myParentResources/{parentResourceKey}/mySubResources/{stringKey}  
</code></pre></div></div>

<h3 id="resources-customizations">Resources Customizations</h3>

<p>Rest.li resources may be customized to handle a variety of use cases.
The most common means of customization is to only implement the methods
appropriate for a particular use case. Rest.li allows you to implement
as many or as few of the resource methods as you choose. The framework
will understand which methods you have implemented, and will advertise
only those methods to clients.</p>

<p>Here are some examples.</p>

<h4 id="read-only-collections">Read-Only Collections</h4>

<p>A read-only collection can be used to expose entities that you do not
want your clients to be able to modify. This might be useful if you need
to expose a view which is derived from other data, or if you need to
expose entities whose lifecycle is managed internally by your domain.</p>

<p>Read-Only collections can easily be implemented using Rest.li
Collections, by only including read methods such as GET, BATCH_GET and
FIND. By omitting any write operations (CREATE, UPDATE, DELETE) the
collection becomes read-only.</p>

<h4 id="natural-keys">Natural Keys</h4>

<p>Another variation on collections is a “natural key” collection, where
the identifier for each entity is one of the domain attributes of the
entity itself. (The alternative is a synthetic key collection, where the
identifier is assigned arbitrarily, such as from a sequence number).</p>

<p>Natural key collections are implemented in Rest.li using Collections, by
omitting the implementation for CREATE, and instead using UPDATE to add
entities into the Collection. This is because CREATE is used when the
server assigns the key for the entity. Although the name may be
counter-intuitive, using UPDATE for this case is correct, because it is
the resource method with the best defined semantics (PUT this entity
representation at this location).</p>

<h4 id="complex-keys">Complex Keys</h4>

<p>By extending <code class="highlighter-rouge">ComplexKeyResourceTemplate</code> instead of
<code class="highlighter-rouge">CollectionResourceTemplate</code>, a collection may use any complex type (any
defined pegasus record type) as a key.</p>

<h4 id="factories">Factories</h4>

<p>A “Factory” Resource is used when the representation of an entity is
assigned by the server using some input information provided by the
client. For example, an authentication service might create a Session
entity given a username and password, but the Session entity is created
internally by the service.</p>

<p>To create a Factory resource in rest.li, use a Collection which only
implements CREATE (and optionally DELETE). The value type of the
Collection should be a Pegasus schema representing the input to the
factory method. The key type should be the key for the resulting entity.</p>

<p>Note that a Factory would normally be paired with a Collection (perhaps
a Read-Only Collection) which provides access to the entities
themselves.</p>

<h2 id="restli-modeling-tips">Rest.li Modeling Tips</h2>

<ol>
  <li>Start with nouns (“things”) in your domain. These will be your
resources and entity representations.</li>
  <li>Think about the keys for each entity — what is the minimal
information you need in order to GET (read) an entity?</li>
  <li>For any entity that can be accessed with a single key, try creating
a root-level Collection resource. Implement as many of the Rest.li
methods as you reasonably can.</li>
  <li>For a singleton entity, try creating a root-level Simple resource
and implement the GET, UPDATE and DELETE methods where applicable.</li>
  <li>For entities that require multiple keys to access,
    <ol>
      <li>If all but one of the keys belongs to other resources, try
modeling as a child resource of another entity.</li>
      <li>If all of the keys belong to other resources, consider whether
your entity is really a relationship between the other entities.
If so, try creating an association.</li>
      <li>If all of the keys are unique to this entity, you may have a
collection with a complex key.</li>
    </ol>
  </li>
</ol>

<h2 id="common-modeling-challenges">Common Modeling Challenges</h2>

<h3 id="common-key-different-entity-type">Common Key, Different Entity Type</h3>

<p>Rest.li collections have a single value type that is used for all of the
resource methods supported by the collection. There are cases where you
want to use different entity representations with the same key, for
example, the input to CREATE is a different type than that returned by
GET (See Factories section above). In such cases, you have two options:</p>

<ol>
  <li>Use a union in the Pegasus schema for your value type.</li>
  <li>Create a different resource for each value type</li>
</ol>

<h3 id="common-entity-type-different-keys">Common Entity Type, Different Keys</h3>

<p>Sometimes the same entity can be accessed using different sets of keys.</p>

<p>For example, Products belong to Companies. They are normally accessed
efficiently by using both the CompanyId and ProductId, so the Product
collection is a child resource of the Company collection. But if there
is a legacy access path which uses only ProductId, this method cannot be
modeled on the Product resource because the client does not have a key
for the parent Company.</p>

<p>In such cases, you have a few options:</p>

<ol>
  <li>Create a separate resource for each access path</li>
  <li>Use FIND methods for some or all of the access paths</li>
</ol>

<h2 id="options-for-modeling-entity-relationships">Options for Modeling Entity Relationships</h2>

<p>A frequently encountered question is how relationships between entities
should be modeled. Suppose you have two objects, A and B - should you
model their relationship by:</p>

<ul>
  <li>Creating an association between A and B?</li>
  <li>Making B a subresource of A?</li>
  <li>Making B a field of A?</li>
</ul>

<p>Here are some rules of thumb to help answer this question:</p>

<p>Associations are preferred when:</p>

<ul>
  <li>A and B have independent lifecycles. For example, they can both
exist without needing to be related</li>
  <li>A and B have a many-to-many / bidirectional relationship (you can
lookup in either direction)</li>
  <li>You need to store attributes on the relationship itself</li>
  <li>You need to relate more than two objects: A, B, and C</li>
  <li>There is more than one type of relationship between A and B</li>
</ul>

<p>Fields are preferred (B is a field of A) when:</p>

<ul>
  <li>B exists only as a part (fragment) of A. A is not complete without
B.</li>
  <li>B does not have its own independent key</li>
  <li>B models a value, not an entity. For example, identity is not
important; only the values of attributes matter for equality.</li>
  <li>There are a small number of B objects related to any given A object,
such that they can all be accessed together.</li>
  <li>B is usually accessed and modified as part of A</li>
</ul>

<p>Subresources are preferred (B is a subresource of A) when:</p>

<ul>
  <li>B has its own key, which is unique within the scope of A.</li>
  <li>A’s key is required to access B</li>
  <li>B is frequently accessed or modified independent of A</li>
  <li>B is queried as a collection, e.g., using filters, sorts, or
pagination</li>
  <li>B models an entity that is dependent on A, but which is not a part
of A</li>
  <li>Each B relates to exactly one A</li>
</ul>

<h2 id="general-tips">General Tips</h2>

<ul>
  <li>Remember that it’s ok to have multiple separate Resources with the
same Pegasus schema as value type, as long as each resource
represents a distinct pattern of interaction. Likewise, it’s okay to
have separate Resources which access the same underlying
implementation.</li>
</ul>

<!-- end list -->

<ul>
  <li>Resource identifiers are the key (pun intended) to parent/child
resource relationships. A resource should be made a child resource
if and only if it depends on the parent resource’s key. If a
resource can be accessed without providing the parent’s key, it
should not be a child.</li>
</ul>

<!-- end list -->

<ul>
  <li>Use separate resources for different representations of the same
underlying implementation. If you want to provide more than one
representation (Pegasus schema) of the same information, you can
create a resource for each representation. However, if one
representation is just a subset of the other, you should use
Rest.li’s field projection support.</li>
</ul>

<h2 id="when-all-else-fails-non-uniform-interfaces">When All Else Fails: Non-Uniform Interfaces</h2>

<p>Uniform Interfaces give us a powerful way to expose resources to the
broadest possible set of clients. However, if you have a requirement
which can’t reasonably be modeled using the uniform interface
constructs, Rest.li does provide a loophole to help you. Actions are a
special type of resource method which allow arbitrary RecordTemplate
types as input and output parameters, and which have no constraints on
semantics. It should be possible to model any operation as an Action,
allowing you to fit your special case within Rest.li. However, because
Actions do not conform to the Uniform Interface, actions cannot easily
be used by higher-level frameworks like query languages, etc., which may
be built on top of Rest.li. You should therefore avoid Actions whenever
there is another reasonable option.</p>

                     </div>
                   </div>
</div>



      <footer class="page-footer">
    <div class="container">
      <div class="row">
        <div class="col s6">
          <h5>Rest.li</h5>
          <p class="text-lighten-4">Rest.li is an open source REST framework for building robust, scalable RESTful architectures using type-safe bindings and asynchronous, non-blocking IO. Rest.li fills a niche for applying RESTful principles at scale with an end-to-end developer workflow for building REST APIs, which promotes clean REST practices, uniform interface design and consistent data modeling.</p>
        </div>
        <div class="col s5 offset-s1">
          <h5 class="black-text">Community</h5>
          <ul>
              <li>GitHub <a class="" href="https://github.com/linkedin/rest.li">Rest.li</a></li>
              <li>LinkedIn <a class="" href="https://www.linkedin.com/groups/4855943/">Rest.li Group</a></li>
            <li>Follow us on twitter: <a class="" href="https://twitter.com/rest_li"> @rest_li</a></li>
            <li>Issue Tracking: <a class="" href="https://github.com/linkedin/rest.li/issues">GitHub issue tracking</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-copyright">
        <div class="container">
            <div class="row">
              <div class="col s6">
                      Copyright 2018 LinkedIn Corporation </br>
                      This work is licensed under a <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.  </br>
                      For clarity, no trademark is licensed.
                      </br></br>
              </div>
              <div class="col s5 offset-s1">
                      This work was made by using Jekyll (and a Jekyll Starter Template)</br>
                      <a target="_blank" href="https://github.com/macrod68/jekyll-materialize-starter-template">https://github.com/macrod68/jekyll-materialize-starter-template</a></br>
                      Copyright © 2017 Marco Damiani. Powered by <a target="_blank" href="http://jekyllrb.com/">Jekyll</a></br>
                      License:<a target="_blank" href="https://opensource.org/licenses/MIT">MIT</a>
              </div>
            </div>
        </div>
    </div>
    <script>
      $(function() {
        return $("h2, h3, h4, h5, h6").each(function(i, el) {
          var $el, icon, id;
          $el = $(el);
          id = $el.attr('id');
          icon = '<i class="fa fa-link"></i>';
          if (id) {
            return $el.append($("<a />").addClass("header-link").attr("href", "#" + id).html(icon));
          }
        });
      });
      </script>
</footer>

      
    <!--  Scripts-->                                                                               
<script src="/rest.li/assets/js/jquery.min.js"></script>
<script src="/rest.li/assets/js/materialize.min.js"></script>
<script src="/rest.li/assets/js/init.js"></script>

  </body>

</html>
